function e(e){return e&&e.__esModule?e.default:e}function t(e,t,n,a){Object.defineProperty(e,t,{get:n,set:a,enumerable:!0,configurable:!0})}Date.now();Date.now();Date.now();Date.now();Date.now();new Matrix4,new Matrix4;new Matrix4;new Matrix4,new Matrix4;new Matrix4;new Matrix4,new Matrix4;new Matrix4;new Matrix4;Date.now();var n;n="\n  #ifdef GL_ES \n  precision mediump float;\n#define GLSLIFY 1\n \n  #endif \n  varying vec4 v_Color; \n  void main() { \n    gl_FragColor = v_Color; \n  }";var a;function r(e,t,n,a,r){var i=e.createBuffer();if(!i)return console.log("Failed to create the buffer object"),!1;e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW);var o=e.getAttribLocation(e.program,r);return o<0?(console.log("Failed to get the storage location of "+r),!1):(e.vertexAttribPointer(o,n,a,!1,0,0),e.enableVertexAttribArray(o),e.bindBuffer(e.ARRAY_BUFFER,null),!0)}a="#define GLSLIFY 1\n\n  attribute vec4 a_Position; \n  attribute vec4 a_Color; \n  uniform mat4 u_MvpMatrix; \n  varying vec4 v_Color; \n  void main() { \n    gl_Position = u_MvpMatrix * a_Position; \n    v_Color = a_Color; \n  }";var i=function(){var t=null;if(t=document.getElementById("webgl").getContext("webgl2",{alpha:!1}))if(window.initShaders(t,e(a),e(n))){var i=function(e){var t=new Float32Array([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,-1,1,-1,-1,1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,-1]),n=new Float32Array([.5,.5,1,.4,.5,.5,1,.4,.5,.5,1,.4,.5,.5,1,.4,.5,1,.5,.4,.5,1,.5,.4,.5,1,.5,.4,.5,1,.5,.4,1,.5,.5,.4,1,.5,.5,.4,1,.5,.5,.4,1,.5,.5,.4,1,1,.5,.4,1,1,.5,.4,1,1,.5,.4,1,1,.5,.4,1,1,1,.4,1,1,1,.4,1,1,1,.4,1,1,1,.4,.5,1,1,.4,.5,1,1,.4,.5,1,1,.4,.5,1,1,.4]),a=new Uint8Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),i=e.createBuffer();return i&&r(e,t,3,e.FLOAT,"a_Position")&&r(e,n,4,e.FLOAT,"a_Color")?(e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,i),e.bufferData(e.ELEMENT_ARRAY_BUFFER,a,e.STATIC_DRAW),a.length):-1}(t);if(i<0)console.log("Failed to set the vertex information");else{console.log(" here "),t.clearColor(0,0,0,.3),t.enable(t.DEPTH_TEST),t.enable(t.BLEND),t.blendEquation(t.MAX),t.blendFunc(t.ZERO,t.ONE);var o=t.getUniformLocation(t.program,"u_MvpMatrix");if(o){var s=new window.Matrix4;s.setPerspective(30,1,1,100),s.lookAt(3,3,7,0,0,0,0,1,0),t.uniformMatrix4fv(o,!1,s.elements),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.depthMask(!1),t.drawElements(t.TRIANGLES,i,t.UNSIGNED_BYTE,0),t.depthMask(!0)}else console.log("Failed to get the storage location of u_MvpMatrix")}}else console.log("Failed to intialize shaders.");else console.log("Failed to get the rendering context for WebGL")};
/* @license twgl.js 4.23.2 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */let o=Float32Array;function s(e,t,n){const a=new o(3);return e&&(a[0]=e),t&&(a[1]=t),n&&(a[2]=n),a}function c(e,t,n){return(n=n||new o(3))[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n}function u(e,t,n){return(n=n||new o(3))[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}function l(e,t,n){n=n||new o(3);const a=e[2]*t[0]-e[0]*t[2],r=e[0]*t[1]-e[1]*t[0];return n[0]=e[1]*t[2]-e[2]*t[1],n[1]=a,n[2]=r,n}function E(e,t){t=t||new o(3);const n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],a=Math.sqrt(n);return a>1e-5?(t[0]=e[0]/a,t[1]=e[1]/a,t[2]=e[2]/a):(t[0]=0,t[1]=0,t[2]=0),t}function m(e,t,n){return(n=n||new o(3))[0]=e[0]*t[0],n[1]=e[1]*t[1],n[2]=e[2]*t[2],n}var _=Object.freeze({__proto__:null,add:c,copy:function(e,t){return(t=t||new o(3))[0]=e[0],t[1]=e[1],t[2]=e[2],t},create:s,cross:l,distance:function(e,t){const n=e[0]-t[0],a=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(n*n+a*a+r*r)},distanceSq:function(e,t){const n=e[0]-t[0],a=e[1]-t[1],r=e[2]-t[2];return n*n+a*a+r*r},divide:function(e,t,n){return(n=n||new o(3))[0]=e[0]/t[0],n[1]=e[1]/t[1],n[2]=e[2]/t[2],n},divScalar:function(e,t,n){return(n=n||new o(3))[0]=e[0]/t,n[1]=e[1]/t,n[2]=e[2]/t,n},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},lerp:function(e,t,n,a){return(a=a||new o(3))[0]=e[0]+n*(t[0]-e[0]),a[1]=e[1]+n*(t[1]-e[1]),a[2]=e[2]+n*(t[2]-e[2]),a},lerpV:function(e,t,n,a){return(a=a||new o(3))[0]=e[0]+n[0]*(t[0]-e[0]),a[1]=e[1]+n[1]*(t[1]-e[1]),a[2]=e[2]+n[2]*(t[2]-e[2]),a},length:function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])},lengthSq:function(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]},max:function(e,t,n){return(n=n||new o(3))[0]=Math.max(e[0],t[0]),n[1]=Math.max(e[1],t[1]),n[2]=Math.max(e[2],t[2]),n},min:function(e,t,n){return(n=n||new o(3))[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.min(e[2],t[2]),n},mulScalar:function(e,t,n){return(n=n||new o(3))[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n},multiply:m,negate:function(e,t){return(t=t||new o(3))[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},normalize:E,setDefaultType:function(e){const t=o;return o=e,t},subtract:u});let d,T,A,R=Float32Array;function p(e,t){return(t=t||new R(16))[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function h(e){return(e=e||new R(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function f(e,t){t=t||new R(16);const n=e[0],a=e[1],r=e[2],i=e[3],o=e[4],s=e[5],c=e[6],u=e[7],l=e[8],E=e[9],m=e[10],_=e[11],d=e[12],T=e[13],A=e[14],p=e[15],h=m*p,f=A*_,C=c*p,F=A*u,v=c*_,S=m*u,N=r*p,I=A*i,g=r*_,B=m*i,M=r*u,L=c*i,O=l*T,U=d*E,x=o*T,P=d*s,b=o*E,D=l*s,y=n*T,G=d*a,w=n*E,X=l*a,W=n*s,V=o*a,H=h*s+F*E+v*T-(f*s+C*E+S*T),Y=f*a+N*E+B*T-(h*a+I*E+g*T),k=C*a+I*s+M*T-(F*a+N*s+L*T),K=S*a+g*s+L*E-(v*a+B*s+M*E),z=1/(n*H+o*Y+l*k+d*K);return t[0]=z*H,t[1]=z*Y,t[2]=z*k,t[3]=z*K,t[4]=z*(f*o+C*l+S*d-(h*o+F*l+v*d)),t[5]=z*(h*n+I*l+g*d-(f*n+N*l+B*d)),t[6]=z*(F*n+N*o+L*d-(C*n+I*o+M*d)),t[7]=z*(v*n+B*o+M*l-(S*n+g*o+L*l)),t[8]=z*(O*u+P*_+b*p-(U*u+x*_+D*p)),t[9]=z*(U*i+y*_+X*p-(O*i+G*_+w*p)),t[10]=z*(x*i+G*u+W*p-(P*i+y*u+V*p)),t[11]=z*(D*i+w*u+V*_-(b*i+X*u+W*_)),t[12]=z*(x*m+D*A+U*c-(b*A+O*c+P*m)),t[13]=z*(w*A+O*r+G*m-(y*m+X*A+U*r)),t[14]=z*(y*c+V*A+P*r-(W*A+x*r+G*c)),t[15]=z*(W*m+b*r+X*c-(w*c+V*m+D*r)),t}function C(e,t,n){n=n||s();const a=t[0],r=t[1],i=t[2],o=a*e[3]+r*e[7]+i*e[11]+e[15];return n[0]=(a*e[0]+r*e[4]+i*e[8]+e[12])/o,n[1]=(a*e[1]+r*e[5]+i*e[9]+e[13])/o,n[2]=(a*e[2]+r*e[6]+i*e[10]+e[14])/o,n}function F(e,t,n){n=n||s();const a=t[0],r=t[1],i=t[2];return n[0]=a*e[0]+r*e[4]+i*e[8],n[1]=a*e[1]+r*e[5]+i*e[9],n[2]=a*e[2]+r*e[6]+i*e[10],n}var v=Object.freeze({__proto__:null,axisRotate:function(e,t,n,a){a=a||new R(16);let r=t[0],i=t[1],o=t[2];const s=Math.sqrt(r*r+i*i+o*o);r/=s,i/=s,o/=s;const c=r*r,u=i*i,l=o*o,E=Math.cos(n),m=Math.sin(n),_=1-E,d=c+(1-c)*E,T=r*i*_+o*m,A=r*o*_-i*m,p=r*i*_-o*m,h=u+(1-u)*E,f=i*o*_+r*m,C=r*o*_+i*m,F=i*o*_-r*m,v=l+(1-l)*E,S=e[0],N=e[1],I=e[2],g=e[3],B=e[4],M=e[5],L=e[6],O=e[7],U=e[8],x=e[9],P=e[10],b=e[11];return a[0]=d*S+T*B+A*U,a[1]=d*N+T*M+A*x,a[2]=d*I+T*L+A*P,a[3]=d*g+T*O+A*b,a[4]=p*S+h*B+f*U,a[5]=p*N+h*M+f*x,a[6]=p*I+h*L+f*P,a[7]=p*g+h*O+f*b,a[8]=C*S+F*B+v*U,a[9]=C*N+F*M+v*x,a[10]=C*I+F*L+v*P,a[11]=C*g+F*O+v*b,e!==a&&(a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]),a},axisRotation:function(e,t,n){n=n||new R(16);let a=e[0],r=e[1],i=e[2];const o=Math.sqrt(a*a+r*r+i*i);a/=o,r/=o,i/=o;const s=a*a,c=r*r,u=i*i,l=Math.cos(t),E=Math.sin(t),m=1-l;return n[0]=s+(1-s)*l,n[1]=a*r*m+i*E,n[2]=a*i*m-r*E,n[3]=0,n[4]=a*r*m-i*E,n[5]=c+(1-c)*l,n[6]=r*i*m+a*E,n[7]=0,n[8]=a*i*m+r*E,n[9]=r*i*m-a*E,n[10]=u+(1-u)*l,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},copy:p,create:function(){return new R(16).fill(0)},frustum:function(e,t,n,a,r,i,o){const s=t-e,c=a-n,u=r-i;return(o=o||new R(16))[0]=2*r/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2*r/c,o[6]=0,o[7]=0,o[8]=(e+t)/s,o[9]=(a+n)/c,o[10]=i/u,o[11]=-1,o[12]=0,o[13]=0,o[14]=r*i/u,o[15]=0,o},getAxis:function(e,t,n){const a=4*t;return(n=n||s())[0]=e[a+0],n[1]=e[a+1],n[2]=e[a+2],n},getTranslation:function(e,t){return(t=t||s())[0]=e[12],t[1]=e[13],t[2]=e[14],t},identity:h,inverse:f,lookAt:function(e,t,n,a){return a=a||new R(16),d=d||s(),T=T||s(),A=A||s(),E(u(e,t,A),A),E(l(n,A,d),d),E(l(A,d,T),T),a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=0,a[4]=T[0],a[5]=T[1],a[6]=T[2],a[7]=0,a[8]=A[0],a[9]=A[1],a[10]=A[2],a[11]=0,a[12]=e[0],a[13]=e[1],a[14]=e[2],a[15]=1,a},multiply:function(e,t,n){n=n||new R(16);const a=e[0],r=e[1],i=e[2],o=e[3],s=e[4],c=e[5],u=e[6],l=e[7],E=e[8],m=e[9],_=e[10],d=e[11],T=e[12],A=e[13],p=e[14],h=e[15],f=t[0],C=t[1],F=t[2],v=t[3],S=t[4],N=t[5],I=t[6],g=t[7],B=t[8],M=t[9],L=t[10],O=t[11],U=t[12],x=t[13],P=t[14],b=t[15];return n[0]=a*f+s*C+E*F+T*v,n[1]=r*f+c*C+m*F+A*v,n[2]=i*f+u*C+_*F+p*v,n[3]=o*f+l*C+d*F+h*v,n[4]=a*S+s*N+E*I+T*g,n[5]=r*S+c*N+m*I+A*g,n[6]=i*S+u*N+_*I+p*g,n[7]=o*S+l*N+d*I+h*g,n[8]=a*B+s*M+E*L+T*O,n[9]=r*B+c*M+m*L+A*O,n[10]=i*B+u*M+_*L+p*O,n[11]=o*B+l*M+d*L+h*O,n[12]=a*U+s*x+E*P+T*b,n[13]=r*U+c*x+m*P+A*b,n[14]=i*U+u*x+_*P+p*b,n[15]=o*U+l*x+d*P+h*b,n},negate:function(e,t){return(t=t||new R(16))[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t},ortho:function(e,t,n,a,r,i,o){return(o=o||new R(16))[0]=2/(t-e),o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2/(a-n),o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2/(r-i),o[11]=0,o[12]=(t+e)/(e-t),o[13]=(a+n)/(n-a),o[14]=(i+r)/(r-i),o[15]=1,o},perspective:function(e,t,n,a,r){r=r||new R(16);const i=Math.tan(.5*Math.PI-.5*e),o=1/(n-a);return r[0]=i/t,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=i,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=(n+a)*o,r[11]=-1,r[12]=0,r[13]=0,r[14]=n*a*o*2,r[15]=0,r},rotateX:function(e,t,n){n=n||new R(16);const a=e[4],r=e[5],i=e[6],o=e[7],s=e[8],c=e[9],u=e[10],l=e[11],E=Math.cos(t),m=Math.sin(t);return n[4]=E*a+m*s,n[5]=E*r+m*c,n[6]=E*i+m*u,n[7]=E*o+m*l,n[8]=E*s-m*a,n[9]=E*c-m*r,n[10]=E*u-m*i,n[11]=E*l-m*o,e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n},rotateY:function(e,t,n){n=n||new R(16);const a=e[0],r=e[1],i=e[2],o=e[3],s=e[8],c=e[9],u=e[10],l=e[11],E=Math.cos(t),m=Math.sin(t);return n[0]=E*a-m*s,n[1]=E*r-m*c,n[2]=E*i-m*u,n[3]=E*o-m*l,n[8]=E*s+m*a,n[9]=E*c+m*r,n[10]=E*u+m*i,n[11]=E*l+m*o,e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n},rotateZ:function(e,t,n){n=n||new R(16);const a=e[0],r=e[1],i=e[2],o=e[3],s=e[4],c=e[5],u=e[6],l=e[7],E=Math.cos(t),m=Math.sin(t);return n[0]=E*a+m*s,n[1]=E*r+m*c,n[2]=E*i+m*u,n[3]=E*o+m*l,n[4]=E*s-m*a,n[5]=E*c-m*r,n[6]=E*u-m*i,n[7]=E*l-m*o,e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n},rotationX:function(e,t){t=t||new R(16);const n=Math.cos(e),a=Math.sin(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=a,t[7]=0,t[8]=0,t[9]=-a,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rotationY:function(e,t){t=t||new R(16);const n=Math.cos(e),a=Math.sin(e);return t[0]=n,t[1]=0,t[2]=-a,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=a,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rotationZ:function(e,t){t=t||new R(16);const n=Math.cos(e),a=Math.sin(e);return t[0]=n,t[1]=a,t[2]=0,t[3]=0,t[4]=-a,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},scale:function(e,t,n){n=n||new R(16);const a=t[0],r=t[1],i=t[2];return n[0]=a*e[0],n[1]=a*e[1],n[2]=a*e[2],n[3]=a*e[3],n[4]=r*e[4],n[5]=r*e[5],n[6]=r*e[6],n[7]=r*e[7],n[8]=i*e[8],n[9]=i*e[9],n[10]=i*e[10],n[11]=i*e[11],e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n},scaling:function(e,t){return(t=t||new R(16))[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},setAxis:function(e,t,n,a){a!==e&&(a=p(e,a));const r=4*n;return a[r+0]=t[0],a[r+1]=t[1],a[r+2]=t[2],a},setDefaultType:function(e){const t=R;return R=e,t},setTranslation:function(e,t,n){return e!==(n=n||h())&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11]),n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=1,n},transformDirection:F,transformNormal:function(e,t,n){n=n||s();const a=f(e),r=t[0],i=t[1],o=t[2];return n[0]=r*a[0]+i*a[1]+o*a[2],n[1]=r*a[4]+i*a[5]+o*a[6],n[2]=r*a[8]+i*a[9]+o*a[10],n},transformPoint:C,translate:function(e,t,n){n=n||new R(16);const a=t[0],r=t[1],i=t[2],o=e[0],s=e[1],c=e[2],u=e[3],l=e[4],E=e[5],m=e[6],_=e[7],d=e[8],T=e[9],A=e[10],p=e[11],h=e[12],f=e[13],C=e[14],F=e[15];return e!==n&&(n[0]=o,n[1]=s,n[2]=c,n[3]=u,n[4]=l,n[5]=E,n[6]=m,n[7]=_,n[8]=d,n[9]=T,n[10]=A,n[11]=p),n[12]=o*a+l*r+d*i+h,n[13]=s*a+E*r+T*i+f,n[14]=c*a+m*r+A*i+C,n[15]=u*a+_*r+p*i+F,n},translation:function(e,t){return(t=t||new R(16))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},transpose:function(e,t){if((t=t||new R(16))===e){let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,t}const n=e[0],a=e[1],r=e[2],i=e[3],o=e[4],s=e[5],c=e[6],u=e[7],l=e[8],E=e[9],m=e[10],_=e[11],d=e[12],T=e[13],A=e[14],p=e[15];return t[0]=n,t[1]=o,t[2]=l,t[3]=d,t[4]=a,t[5]=s,t[6]=E,t[7]=T,t[8]=r,t[9]=c,t[10]=m,t[11]=A,t[12]=i,t[13]=u,t[14]=_,t[15]=p,t}});const S={};{const e=S;e[5120]=Int8Array,e[5121]=Uint8Array,e[5122]=Int16Array,e[5123]=Uint16Array,e[5124]=Int32Array,e[5125]=Uint32Array,e[5126]=Float32Array,e[32819]=Uint16Array,e[32820]=Uint16Array,e[33635]=Uint16Array,e[5131]=Uint16Array,e[33640]=Uint32Array,e[35899]=Uint32Array,e[35902]=Uint32Array,e[36269]=Uint32Array,e[34042]=Uint32Array}function N(e){if(e instanceof Int8Array)return 5120;if(e instanceof Uint8Array)return 5121;if(e instanceof Uint8ClampedArray)return 5121;if(e instanceof Int16Array)return 5122;if(e instanceof Uint16Array)return 5123;if(e instanceof Int32Array)return 5124;if(e instanceof Uint32Array)return 5125;if(e instanceof Float32Array)return 5126;throw new Error("unsupported typed array type")}function I(e){if(e===Int8Array)return 5120;if(e===Uint8Array)return 5121;if(e===Uint8ClampedArray)return 5121;if(e===Int16Array)return 5122;if(e===Uint16Array)return 5123;if(e===Int32Array)return 5124;if(e===Uint32Array)return 5125;if(e===Float32Array)return 5126;throw new Error("unsupported typed array type")}function g(e){const t=S[e];if(!t)throw new Error("unknown gl type");return t}const B="undefined"!=typeof SharedArrayBuffer?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};function M(...e){console.error(...e)}function L(...e){console.warn(...e)}function O(e,t){return"undefined"!=typeof WebGLRenderbuffer&&t instanceof WebGLRenderbuffer}function U(e,t){return"undefined"!=typeof WebGLTexture&&t instanceof WebGLTexture}const x={attribPrefix:""};function P(e,t,n,a,r){e.bindBuffer(t,n),e.bufferData(t,a,r||35044)}function b(e,t,n,a){if(r=t,"undefined"!=typeof WebGLBuffer&&r instanceof WebGLBuffer)return t;var r;n=n||34962;const i=e.createBuffer();return P(e,n,i,t,a),i}function D(e){return"indices"===e}function y(e){return e.length?e:e.data}const G=/coord|texture/i,w=/color|colour/i;function X(e,t){let n;if(n=G.test(e)?2:w.test(e)?4:3,t%n>0)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${n} but ${t} values is not evenly divisible by ${n}. You should specify it.`);return n}function W(e,t){return e.numComponents||e.size||X(t,y(e).length)}function V(e,t){if(B(e))return e;if(B(e.data))return e.data;Array.isArray(e)&&(e={data:e});let n=e.type;return n||(n=D(t)?Uint16Array:Float32Array),new n(e.data)}function H(e,t){const n={};return Object.keys(t).forEach((function(a){if(!D(a)){const i=t[a],o=i.attrib||i.name||i.attribName||x.attribPrefix+a;if(i.value){if(!Array.isArray(i.value)&&!B(i.value))throw new Error("array.value is not array or typedarray");n[o]={value:i.value}}else{let t,s,c,u;if(i.buffer&&i.buffer instanceof WebGLBuffer)t=i.buffer,u=i.numComponents||i.size,s=i.type,c=i.normalize;else if("number"==typeof i||"number"==typeof i.data){const n=i.data||i,o=i.type||Float32Array,l=n*o.BYTES_PER_ELEMENT;s=I(o),c=void 0!==i.normalize?i.normalize:(r=o)===Int8Array||r===Uint8Array,u=i.numComponents||i.size||X(a,n),t=e.createBuffer(),e.bindBuffer(34962,t),e.bufferData(34962,l,i.drawType||35044)}else{const n=V(i,a);t=b(e,n,void 0,i.drawType),s=N(n),c=void 0!==i.normalize?i.normalize:function(e){return e instanceof Int8Array||e instanceof Uint8Array}(n),u=W(i,a)}n[o]={buffer:t,numComponents:u,type:s,normalize:c,stride:i.stride||0,offset:i.offset||0,divisor:void 0===i.divisor?void 0:i.divisor,drawType:i.drawType}}}var r})),e.bindBuffer(34962,null),n}const Y=["position","positions","a_position"];function k(e,t,n){const a=H(e,t),r=Object.assign({},n||{});r.attribs=Object.assign({},n?n.attribs:{},a);const i=t.indices;if(i){const t=V(i,"indices");r.indices=b(e,t,34963),r.numElements=t.length,r.elementType=N(t)}else r.numElements||(r.numElements=function(e,t){let n,a;for(a=0;a<Y.length&&(n=Y[a],!(n in t))&&(n=x.attribPrefix+n,!(n in t));++a);a===Y.length&&(n=Object.keys(t)[0]);const r=t[n];if(!r.buffer)return 1;e.bindBuffer(34962,r.buffer);const i=e.getBufferParameter(34962,34660);var o;e.bindBuffer(34962,null);const s=i/(5120===(o=r.type)||5121===o?1:5122===o||5123===o?2:5124===o||5125===o||5126===o?4:0),c=r.numComponents||r.size,u=s/c;if(u%1!=0)throw new Error(`numComponents ${c} not correct for length ${length}`);return u}(e,r.attribs));return r}function K(e,t,n){const a="indices"===n?34963:34962;return b(e,V(t,n),a)}function z(e,t){const n={};return Object.keys(t).forEach((function(a){n[a]=K(e,t[a],a)})),t.indices?(n.numElements=t.indices.length,n.elementType=N(V(t.indices))):n.numElements=function(e){let t,n;for(n=0;n<Y.length&&(t=Y[n],!(t in e));++n);n===Y.length&&(t=Object.keys(e)[0]);const a=e[t],r=y(a).length;if(void 0===r)return 1;const i=W(a,t),o=r/i;if(r%i>0)throw new Error(`numComponents ${i} not correct for length ${r}`);return o}(t),n}const j=y,Z=W;function q(e,t){let n=0;return e.push=function(){for(let t=0;t<arguments.length;++t){const a=arguments[t];if(a instanceof Array||B(a))for(let t=0;t<a.length;++t)e[n++]=a[t];else e[n++]=a}},e.reset=function(e){n=e||0},e.numComponents=t,Object.defineProperty(e,"numElements",{get:function(){return this.length/this.numComponents|0}}),e}function Q(e,t,n){return q(new(n||Float32Array)(e*t),e)}function $(e){return"indices"!==e}function J(e,t,n){const a=e.length,r=new Float32Array(3);for(let i=0;i<a;i+=3)n(t,[e[i],e[i+1],e[i+2]],r),e[i]=r[0],e[i+1]=r[1],e[i+2]=r[2]}function ee(e,t,n){n=n||s();const a=t[0],r=t[1],i=t[2];return n[0]=a*e[0]+r*e[1]+i*e[2],n[1]=a*e[4]+r*e[5]+i*e[6],n[2]=a*e[8]+r*e[9]+i*e[10],n}function te(e,t){return J(e,t,F),e}function ne(e,t){return J(e,f(t),ee),e}function ae(e,t){return J(e,t,C),e}function re(e,t){return Object.keys(e).forEach((function(n){const a=e[n];n.indexOf("pos")>=0?ae(a,t):n.indexOf("tan")>=0||n.indexOf("binorm")>=0?te(a,t):n.indexOf("norm")>=0&&ne(a,t)})),e}function ie(e,t,n){return e=e||2,{position:{numComponents:2,data:[(t=t||0)+-1*(e*=.5),(n=n||0)+-1*e,t+1*e,n+-1*e,t+-1*e,n+1*e,t+1*e,n+1*e]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function oe(e,t,n,a,r){e=e||1,t=t||1,n=n||1,a=a||1,r=r||h();const i=(n+1)*(a+1),o=Q(3,i),s=Q(3,i),c=Q(2,i);for(let r=0;r<=a;r++)for(let i=0;i<=n;i++){const u=i/n,l=r/a;o.push(e*u-.5*e,0,t*l-.5*t),s.push(0,1,0),c.push(u,l)}const u=n+1,l=Q(3,n*a*2,Uint16Array);for(let e=0;e<a;e++)for(let t=0;t<n;t++)l.push((e+0)*u+t,(e+1)*u+t,(e+0)*u+t+1),l.push((e+1)*u+t,(e+1)*u+t+1,(e+0)*u+t+1);return re({position:o,normal:s,texcoord:c,indices:l},r)}function se(e,t,n,a,r,i,o){if(t<=0||n<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");a=a||0,i=i||0;const s=(r=r||Math.PI)-a,c=(o=o||2*Math.PI)-i,u=(t+1)*(n+1),l=Q(3,u),E=Q(3,u),m=Q(2,u);for(let r=0;r<=n;r++)for(let o=0;o<=t;o++){const u=o/t,_=r/n,d=c*u+i,T=s*_+a,A=Math.sin(d),R=Math.cos(d),p=Math.sin(T),h=R*p,f=Math.cos(T),C=A*p;l.push(e*h,e*f,e*C),E.push(h,f,C),m.push(1-u,_)}const _=t+1,d=Q(3,t*n*2,Uint16Array);for(let e=0;e<t;e++)for(let t=0;t<n;t++)d.push((t+0)*_+e,(t+0)*_+e+1,(t+1)*_+e),d.push((t+1)*_+e,(t+0)*_+e+1,(t+1)*_+e+1);return{position:l,normal:E,texcoord:m,indices:d}}const ce=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function ue(e){const t=(e=e||1)/2,n=[[-t,-t,-t],[+t,-t,-t],[-t,+t,-t],[+t,+t,-t],[-t,-t,+t],[+t,-t,+t],[-t,+t,+t],[+t,+t,+t]],a=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],r=[[1,0],[0,0],[0,1],[1,1]],i=Q(3,24),o=Q(3,24),s=Q(2,24),c=Q(3,12,Uint16Array);for(let e=0;e<6;++e){const t=ce[e];for(let c=0;c<4;++c){const u=n[t[c]],l=a[e],E=r[c];i.push(u),o.push(l),s.push(E)}const u=4*e;c.push(u+0,u+1,u+2),c.push(u+0,u+2,u+3)}return{position:i,normal:o,texcoord:s,indices:c}}function le(e,t,n,a,r,i,o){if(a<3)throw new Error("radialSubdivisions must be 3 or greater");if(r<1)throw new Error("verticalSubdivisions must be 1 or greater");const s=void 0===i||i,c=void 0===o||o,u=(s?2:0)+(c?2:0),l=(a+1)*(r+1+u),E=Q(3,l),m=Q(3,l),_=Q(2,l),d=Q(3,a*(r+u/2)*2,Uint16Array),T=a+1,A=Math.atan2(e-t,n),R=Math.cos(A),p=Math.sin(A),h=r+(c?2:0);for(let i=s?-2:0;i<=h;++i){let o,s=i/r,c=n*s;i<0?(c=0,s=1,o=e):i>r?(c=n,s=1,o=t):o=e+i/r*(t-e),-2!==i&&i!==r+2||(o=0,s=0),c-=n/2;for(let e=0;e<T;++e){const t=Math.sin(e*Math.PI*2/a),n=Math.cos(e*Math.PI*2/a);E.push(t*o,c,n*o),i<0?m.push(0,-1,0):i>r?m.push(0,1,0):0===o?m.push(0,0,0):m.push(t*R,p,n*R),_.push(e/a,1-s)}}for(let e=0;e<r+u;++e)if(!(1===e&&s||e===r+u-2&&c))for(let t=0;t<a;++t)d.push(T*(e+0)+0+t,T*(e+0)+1+t,T*(e+1)+1+t),d.push(T*(e+0)+0+t,T*(e+1)+1+t,T*(e+1)+0+t);return{position:E,normal:m,texcoord:_,indices:d}}function Ee(e,t){t=t||[];const n=[];for(let a=0;a<e.length;a+=4){const r=e[a],i=e.slice(a+1,a+4);i.push.apply(i,t);for(let e=0;e<r;++e)n.push.apply(n,i)}return n}function me(){const e=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],t=Ee([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),n=Ee([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),a=e.length/3,r={position:Q(3,a),texcoord:Q(2,a),normal:Q(3,a),color:Q(4,a,Uint8Array),indices:Q(3,a/3,Uint16Array)};r.position.push(e),r.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),r.normal.push(t),r.color.push(n);for(let e=0;e<a;++e)r.indices.push(e);return r}function _e(e,t,n,a,r,i,o){if(r<=0)throw new Error("subdivisionDown must be > 0");const s=(o=o||1)-(i=i||0),u=2*(r+1)*4,l=Q(3,u),E=Q(3,u),_=Q(2,u);function d(e,t,n){return e+(t-e)*n}function T(t,n,o,u,T,A){for(let R=0;R<=r;R++){const p=n/1,h=R/r,f=2*(p-.5),C=(i+h*s)*Math.PI,F=Math.sin(C),v=Math.cos(C),S=d(e,t,F),N=f*a,I=v*e,g=F*S;l.push(N,I,g);const B=c(m([0,F,v],o),u);E.push(B),_.push(p*T+A,h)}}for(let e=0;e<2;e++){const a=2*(e/1-.5);T(t,e,[1,1,1],[0,0,0],1,0),T(t,e,[0,0,0],[a,0,0],0,0),T(n,e,[1,1,1],[0,0,0],1,0),T(n,e,[0,0,0],[a,0,0],0,1)}const A=Q(3,2*r*4,Uint16Array);function R(e,t){for(let n=0;n<r;++n)A.push(e+n+0,e+n+1,t+n+0),A.push(e+n+1,t+n+1,t+n+0)}const p=r+1;return R(0*p,4*p),R(5*p,7*p),R(6*p,2*p),R(3*p,1*p),{position:l,normal:E,texcoord:_,indices:A}}function de(e,t,n,a,r,i){return le(e,e,t,n,a,r,i)}function Te(e,t,n,a,r,i){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(a<3)throw new Error("verticalSubdivisions must be 3 or greater");r=r||0;const o=(i=i||2*Math.PI)-r,s=n+1,c=a+1,u=s*c,l=Q(3,u),E=Q(3,u),m=Q(2,u),_=Q(3,n*a*2,Uint16Array);for(let i=0;i<c;++i){const c=i/a,u=c*Math.PI*2,_=Math.sin(u),d=e+_*t,T=Math.cos(u),A=T*t;for(let e=0;e<s;++e){const t=e/n,a=r+t*o,i=Math.sin(a),s=Math.cos(a),u=i*d,R=s*d,p=i*_,h=s*_;l.push(u,A,R),E.push(p,T,h),m.push(t,1-c)}}for(let e=0;e<a;++e)for(let t=0;t<n;++t){const n=1+t,a=1+e;_.push(s*e+t,s*a+t,s*e+n),_.push(s*a+t,s*a+n,s*e+n)}return{position:l,normal:E,texcoord:m,indices:_}}function Ae(e,t,n,a,r){if(t<3)throw new Error("divisions must be at least 3");r=r||1,a=a||0;const i=(t+1)*((n=n||1)+1),o=Q(3,i),s=Q(3,i),c=Q(2,i),u=Q(3,n*t*2,Uint16Array);let l=0;const E=e-a,m=t+1;for(let e=0;e<=n;++e){const i=a+E*Math.pow(e/n,r);for(let a=0;a<=t;++a){const r=2*Math.PI*a/t,E=i*Math.cos(r),_=i*Math.sin(r);if(o.push(E,0,_),s.push(0,1,0),c.push(1-a/t,e/n),e>0&&a!==t){const e=l+(a+1),t=l+a,n=l+a-m,r=l+(a+1)-m;u.push(e,t,n),u.push(e,n,r)}}l+=t+1}return{position:o,normal:s,texcoord:c,indices:u}}function Re(e){return function(t){const n=e.apply(this,Array.prototype.slice.call(arguments,1));return z(t,n)}}function pe(e){return function(t){const n=e.apply(null,Array.prototype.slice.call(arguments,1));return k(t,n)}}const he=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function fe(e,t,n,a){a=a||0;const r=e.length;for(let i=0;i<r;++i)t[n+i]=e[i]+a}function Ce(e,t){const n=j(e),a=new n.constructor(t);let r=a;var i,o;return n.numComponents&&n.numElements&&q(a,n.numComponents),e.data&&(r={data:a},i=e,o=r,he.forEach((function(e){const t=i[e];void 0!==t&&(o[e]=t)}))),r}const Fe=pe(me),ve=Re(me),Se=pe(ue),Ne=Re(ue),Ie=pe(oe),ge=Re(oe),Be=pe(se),Me=Re(se),Le=pe(le),Oe=Re(le),Ue=pe(ie),xe=Re(ie),Pe=pe(_e),be=Re(_e),De=pe(de),ye=Re(de),Ge=pe(Te),we=Re(Te),Xe=pe(Ae),We=Re(Ae),Ve=Pe,He=be,Ye=_e;var ke=Object.freeze({__proto__:null,create3DFBufferInfo:Fe,create3DFBuffers:ve,create3DFVertices:me,createAugmentedTypedArray:Q,createCubeBufferInfo:Se,createCubeBuffers:Ne,createCubeVertices:ue,createPlaneBufferInfo:Ie,createPlaneBuffers:ge,createPlaneVertices:oe,createSphereBufferInfo:Be,createSphereBuffers:Me,createSphereVertices:se,createTruncatedConeBufferInfo:Le,createTruncatedConeBuffers:Oe,createTruncatedConeVertices:le,createXYQuadBufferInfo:Ue,createXYQuadBuffers:xe,createXYQuadVertices:ie,createCresentBufferInfo:Ve,createCresentBuffers:He,createCresentVertices:Ye,createCrescentBufferInfo:Pe,createCrescentBuffers:be,createCrescentVertices:_e,createCylinderBufferInfo:De,createCylinderBuffers:ye,createCylinderVertices:de,createTorusBufferInfo:Ge,createTorusBuffers:we,createTorusVertices:Te,createDiscBufferInfo:Xe,createDiscBuffers:We,createDiscVertices:Ae,deindexVertices:function(e){const t=e.indices,n={},a=t.length;return Object.keys(e).filter($).forEach((function(r){const i=e[r],o=i.numComponents,s=Q(o,a,i.constructor);for(let e=0;e<a;++e){const n=t[e]*o;for(let e=0;e<o;++e)s.push(i[n+e])}n[r]=s})),n},flattenNormals:function(e){if(e.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");const t=e.normal,n=t.length;for(let e=0;e<n;e+=9){const n=t[e+0],a=t[e+1],r=t[e+2],i=t[e+3],o=t[e+4],s=t[e+5];let c=n+i+t[e+6],u=a+o+t[e+7],l=r+s+t[e+8];const E=Math.sqrt(c*c+u*u+l*l);c/=E,u/=E,l/=E,t[e+0]=c,t[e+1]=u,t[e+2]=l,t[e+3]=c,t[e+4]=u,t[e+5]=l,t[e+6]=c,t[e+7]=u,t[e+8]=l}return e},makeRandomVertexColors:function(e,t){t=t||{};const n=e.position.numElements,a=Q(4,n,Uint8Array),r=t.rand||function(e,t){return t<3?(n=256,Math.random()*n|0):255;var n};if(e.color=a,e.indices)for(let e=0;e<n;++e)a.push(r(e,0),r(e,1),r(e,2),r(e,3));else{const e=t.vertsPerColor||3,i=n/e;for(let t=0;t<i;++t){const n=[r(t,0),r(t,1),r(t,2),r(t,3)];for(let t=0;t<e;++t)a.push(n)}}return e},reorientDirections:te,reorientNormals:ne,reorientPositions:ae,reorientVertices:re,concatVertices:function(e){const t={};let n;for(let a=0;a<e.length;++a){const r=e[a];Object.keys(r).forEach((function(e){t[e]||(t[e]=[]),n||"indices"===e||(n=e);const a=r[e],i=Z(a,e),o=j(a).length/i;t[e].push(o)}))}const a=t[n],r={};return Object.keys(t).forEach((function(t){const n=function(t){let n,a=0;for(let r=0;r<e.length;++r){const i=e[r][t];a+=j(i).length,n&&!i.data||(n=i)}return{length:a,spec:n}}(t),i=Ce(n.spec,n.length);!function(t,n,a){let r=0,i=0;for(let o=0;o<e.length;++o){const s=e[o][t],c=j(s);"indices"===t?(fe(c,a,i,r),r+=n[o]):fe(c,a,i),i+=c.length}}(t,a,j(i)),r[t]=i})),r},duplicateVertices:function(e){const t={};return Object.keys(e).forEach((function(n){const a=e[n],r=j(a),i=Ce(a,r.length);fe(r,j(i),0),t[n]=i})),t}});function Ke(e){return!!e.texStorage2D}const ze=function(){const e={},t={};return function(n,a){return function(n){const a=n.constructor.name;if(!e[a]){for(const e in n)if("number"==typeof n[e]){const a=t[n[e]];t[n[e]]=a?`${a} | ${e}`:e}e[a]=!0}}(n),t[a]||("number"==typeof a?`0x${a.toString(16)}`:a)}}();const je={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},Ze=B,qe=function(){let e;return function(){return e=e||("undefined"!=typeof document&&document.createElement?document.createElement("canvas").getContext("2d"):null),e}}(),Qe={};{const e=Qe;e[6406]={numColorComponents:1},e[6409]={numColorComponents:1},e[6410]={numColorComponents:2},e[6407]={numColorComponents:3},e[6408]={numColorComponents:4},e[6403]={numColorComponents:1},e[36244]={numColorComponents:1},e[33319]={numColorComponents:2},e[33320]={numColorComponents:2},e[6407]={numColorComponents:3},e[36248]={numColorComponents:3},e[6408]={numColorComponents:4},e[36249]={numColorComponents:4},e[6402]={numColorComponents:1},e[34041]={numColorComponents:2}}let $e;function Je(e){if(!$e){const e={6406:{textureFormat:6406,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},6409:{textureFormat:6409,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},6410:{textureFormat:6410,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[5121,5131,36193,5126]},6407:{textureFormat:6407,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[5121,5131,36193,5126,33635]},6408:{textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[5121,5131,36193,5126,32819,32820]},6402:{textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[5125,5123]},33321:{textureFormat:6403,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[5121]},36756:{textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[5120]},33325:{textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[5126,5131]},33326:{textureFormat:6403,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[5126]},33330:{textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[5121]},33329:{textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[5120]},33332:{textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5123]},33331:{textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5122]},33334:{textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5125]},33333:{textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5124]},33323:{textureFormat:33319,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[5121]},36757:{textureFormat:33319,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[5120]},33327:{textureFormat:33319,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[5126,5131]},33328:{textureFormat:33319,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[5126]},33336:{textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5121]},33335:{textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5120]},33338:{textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5123]},33337:{textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5122]},33340:{textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5125]},33339:{textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5124]},32849:{textureFormat:6407,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[5121]},35905:{textureFormat:6407,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[5121]},36194:{textureFormat:6407,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[5121,33635]},36758:{textureFormat:6407,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[5120]},35898:{textureFormat:6407,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35899]},35901:{textureFormat:6407,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35902]},34843:{textureFormat:6407,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[5126,5131]},34837:{textureFormat:6407,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[5126]},36221:{textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[5121]},36239:{textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[5120]},36215:{textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[5123]},36233:{textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[5122]},36209:{textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[5125]},36227:{textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[5124]},32856:{textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[5121]},35907:{textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[5121]},36759:{textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[5120]},32855:{textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[5121,32820,33640]},32854:{textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[5121,32819]},32857:{textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[33640]},34842:{textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[5126,5131]},34836:{textureFormat:6408,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[5126]},36220:{textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5121]},36238:{textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5120]},36975:{textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[33640]},36214:{textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5123]},36232:{textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5122]},36226:{textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[5124]},36208:{textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[5125]},33189:{textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[5123,5125]},33190:{textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5125]},36012:{textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5126]},35056:{textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[34042]},36013:{textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[36269]}};Object.keys(e).forEach((function(t){const n=e[t];n.bytesPerElementMap={},n.bytesPerElement.forEach((function(e,t){const a=n.type[t];n.bytesPerElementMap[a]=e}))})),$e=e}return $e[e]}function et(e,t){const n=Je(e);if(!n)throw"unknown internal format";const a=n.bytesPerElementMap[t];if(void 0===a)throw"unknown internal format";return a}function tt(e){const t=Je(e);if(!t)throw"unknown internal format";return{format:t.textureFormat,type:t.type[0]}}function nt(e){return 0==(e&e-1)}function at(e,t,n,a){if(!Ke(e))return nt(t)&&nt(n);const r=Je(a);if(!r)throw"unknown internal format";return r.colorRenderable&&r.textureFilterable}function rt(e){const t=Je(e);if(!t)throw"unknown internal format";return t.textureFilterable}function it(e,t,n){return Ze(t)?N(t):n||5121}function ot(e,t,n,a,r){if(r%1!=0)throw"can't guess dimensions";if(n||a){if(a){if(!n&&(n=r/a)%1)throw"can't guess dimensions"}else if((a=r/n)%1)throw"can't guess dimensions"}else{const e=Math.sqrt(r/(34067===t?6:1));e%1==0?(n=e,a=e):(n=r,a=1)}return{width:n,height:a}}function st(e,t){void 0!==t.colorspaceConversion&&e.pixelStorei(37443,t.colorspaceConversion),void 0!==t.premultiplyAlpha&&e.pixelStorei(37441,t.premultiplyAlpha),void 0!==t.flipY&&e.pixelStorei(37440,t.flipY)}function ct(e){e.pixelStorei(3317,4),Ke(e)&&(e.pixelStorei(3314,0),e.pixelStorei(32878,0),e.pixelStorei(3316,0),e.pixelStorei(3315,0),e.pixelStorei(32877,0))}function ut(e,t,n,a){var r;a.minMag&&(n.call(e,t,10241,a.minMag),n.call(e,t,10240,a.minMag)),a.min&&n.call(e,t,10241,a.min),a.mag&&n.call(e,t,10240,a.mag),a.wrap&&(n.call(e,t,10242,a.wrap),n.call(e,t,10243,a.wrap),(32879===t||(r=t,"undefined"!=typeof WebGLSampler&&r instanceof WebGLSampler))&&n.call(e,t,32882,a.wrap)),a.wrapR&&n.call(e,t,32882,a.wrapR),a.wrapS&&n.call(e,t,10242,a.wrapS),a.wrapT&&n.call(e,t,10243,a.wrapT),a.minLod&&n.call(e,t,33082,a.minLod),a.maxLod&&n.call(e,t,33083,a.maxLod),a.baseLevel&&n.call(e,t,33084,a.baseLevel),a.maxLevel&&n.call(e,t,33085,a.maxLevel)}function lt(e,t,n){const a=n.target||3553;e.bindTexture(a,t),ut(e,a,e.texParameteri,n)}function Et(e,t,n,a,r,i){i=i||6408;const o=(n=n||je.textureOptions).target||3553;if(a=a||n.width,r=r||n.height,e.bindTexture(o,t),at(e,a,r,i))e.generateMipmap(o);else{const t=rt(i)?9729:9728;e.texParameteri(o,10241,t),e.texParameteri(o,10240,t),e.texParameteri(o,10242,33071),e.texParameteri(o,10243,33071)}}function mt(e){return!0===e.auto||void 0===e.auto&&void 0===e.level}function _t(e,t){return(t=t||{}).cubeFaceOrder||[34069,34070,34071,34072,34073,34074]}function dt(e,t){const n=_t(0,t).map((function(e,t){return{face:e,ndx:t}}));return n.sort((function(e,t){return e.face-t.face})),n}function Tt(e,t,n,a){const r=(a=a||je.textureOptions).target||3553,i=a.level||0;let o=n.width,s=n.height;const c=a.internalFormat||a.format||6408,u=tt(c),l=a.format||u.format,E=a.type||u.type;if(st(e,a),e.bindTexture(r,t),34067===r){const u=n.width,m=n.height;let _,d;if(u/6===m)_=m,d=[0,0,1,0,2,0,3,0,4,0,5,0];else if(m/6===u)_=u,d=[0,0,0,1,0,2,0,3,0,4,0,5];else if(u/3==m/2)_=u/3,d=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(u/2!=m/3)throw"can't figure out cube map from element: "+(n.src?n.src:n.nodeName);_=u/2,d=[0,0,1,0,0,1,1,1,0,2,1,2]}const T=qe();T?(T.canvas.width=_,T.canvas.height=_,o=_,s=_,dt(0,a).forEach((function(t){const a=d[2*t.ndx+0]*_,r=d[2*t.ndx+1]*_;T.drawImage(n,a,r,_,_,0,0,_,_),e.texImage2D(t.face,i,c,l,E,T.canvas)})),T.canvas.width=1,T.canvas.height=1):"undefined"!=typeof createImageBitmap&&(o=_,s=_,dt(0,a).forEach((function(u){const m=d[2*u.ndx+0]*_,T=d[2*u.ndx+1]*_;e.texImage2D(u.face,i,c,_,_,0,l,E,null),createImageBitmap(n,m,T,_,_,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then((function(n){st(e,a),e.bindTexture(r,t),e.texImage2D(u.face,i,c,l,E,n),mt(a)&&Et(e,t,a,o,s,c)}))})))}else if(32879===r||35866===r){const t=Math.min(n.width,n.height),a=Math.max(n.width,n.height),o=a/t;if(o%1!=0)throw"can not compute 3D dimensions of element";const s=n.width===a?1:0,u=n.height===a?1:0;e.pixelStorei(3317,1),e.pixelStorei(3314,n.width),e.pixelStorei(32878,0),e.pixelStorei(32877,0),e.texImage3D(r,i,c,t,t,t,0,l,E,null);for(let a=0;a<o;++a){const o=a*t*s,c=a*t*u;e.pixelStorei(3316,o),e.pixelStorei(3315,c),e.texSubImage3D(r,i,0,0,a,t,t,1,l,E,n)}ct(e)}else e.texImage2D(r,i,c,l,E,n);mt(a)&&Et(e,t,a,o,s,c),lt(e,t,a)}function At(){}function Rt(e,t){return void 0!==t||function(e){if("undefined"!=typeof document){const t=document.createElement("a");return t.href=e,t.hostname===location.hostname&&t.port===location.port&&t.protocol===location.protocol}{const t=new URL(location.href).origin;return new URL(e,location.href).origin===t}}(e)?t:"anonymous"}function pt(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof ImageData&&e instanceof ImageData||"undefined"!=typeof HTMLElement&&e instanceof HTMLElement}function ht(e,t,n){return pt(e)?(setTimeout((function(){n(null,e)})),e):function(e,t,n){let a;if(n=n||At,t=void 0!==t?t:je.crossOrigin,t=Rt(e,t),"undefined"!=typeof Image){a=new Image,void 0!==t&&(a.crossOrigin=t);const r=function(){a.removeEventListener("error",i),a.removeEventListener("load",o),a=null},i=function(){const t="couldn't load image: "+e;M(t),n(t,a),r()},o=function(){n(null,a),r()};return a.addEventListener("error",i),a.addEventListener("load",o),a.src=e,a}if("undefined"!=typeof ImageBitmap){let r,i;const o=function(){n(r,i)},s={};t&&(s.mode="cors"),fetch(e,s).then((function(e){if(!e.ok)throw e;return e.blob()})).then((function(e){return createImageBitmap(e,{premultiplyAlpha:"none",colorSpaceConversion:"none"})})).then((function(e){i=e,setTimeout(o)})).catch((function(e){r=e,setTimeout(o)})),a=null}return a}(e,t,n)}function ft(e,t,n){const a=(n=n||je.textureOptions).target||3553;if(e.bindTexture(a,t),!1===n.color)return;const r=function(e){return e=e||je.textureColor,Ze(e)?e:new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}(n.color);if(34067===a)for(let t=0;t<6;++t)e.texImage2D(34069+t,0,6408,1,1,0,6408,5121,r);else 32879===a||35866===a?e.texImage3D(a,0,6408,1,1,1,0,6408,5121,r):e.texImage2D(a,0,6408,1,1,0,6408,5121,r)}function Ct(e,t,n,a){a=a||At,n=n||je.textureOptions,ft(e,t,n);return ht((n=Object.assign({},n)).src,n.crossOrigin,(function(r,i){r?a(r,t,i):(Tt(e,t,i,n),a(null,t,i))}))}function Ft(e,t,n,a){a=a||At;const r=n.src;if(6!==r.length)throw"there must be 6 urls for a cubemap";const i=n.level||0,o=n.internalFormat||n.format||6408,s=tt(o),c=n.format||s.format,u=n.type||5121,l=n.target||3553;if(34067!==l)throw"target must be TEXTURE_CUBE_MAP";ft(e,t,n),n=Object.assign({},n);let E=6;const m=[],_=_t(0,n);let d;d=r.map((function(r,s){return ht(r,n.crossOrigin,(T=_[s],function(r,s){--E,r?m.push(r):s.width!==s.height?m.push("cubemap face img is not a square: "+s.src):(st(e,n),e.bindTexture(l,t),5===E?_t().forEach((function(t){e.texImage2D(t,i,o,c,u,s)})):e.texImage2D(T,i,o,c,u,s),mt(n)&&e.generateMipmap(l)),0===E&&a(m.length?m:void 0,t,d)}));var T}))}function vt(e,t,n,a){a=a||At;const r=n.src,i=n.internalFormat||n.format||6408,o=tt(i),s=n.format||o.format,c=n.type||5121,u=n.target||35866;if(32879!==u&&35866!==u)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";ft(e,t,n),n=Object.assign({},n);let l=r.length;const E=[];let m;const _=n.level||0;let d=n.width,T=n.height;const A=r.length;let R=!0;m=r.map((function(r,o){return ht(r,n.crossOrigin,(p=o,function(r,o){if(--l,r)E.push(r);else{if(st(e,n),e.bindTexture(u,t),R){R=!1,d=n.width||o.width,T=n.height||o.height,e.texImage3D(u,_,i,d,T,A,0,s,c,null);for(let t=0;t<A;++t)e.texSubImage3D(u,_,0,0,t,d,T,1,s,c,o)}else{let t,n=o;o.width===d&&o.height===T||(t=qe(),n=t.canvas,t.canvas.width=d,t.canvas.height=T,t.drawImage(o,0,0,d,T)),e.texSubImage3D(u,_,0,0,p,d,T,1,s,c,n),t&&n===t.canvas&&(t.canvas.width=0,t.canvas.height=0)}mt(n)&&e.generateMipmap(u)}0===l&&a(E.length?E:void 0,t,m)}));var p}))}function St(e,t,n,a){const r=(a=a||je.textureOptions).target||3553;e.bindTexture(r,t);let i=a.width,o=a.height,s=a.depth;const c=a.level||0,u=a.internalFormat||a.format||6408,l=tt(u),E=a.format||l.format,m=a.type||it(0,n,l.type);if(Ze(n))n instanceof Uint8ClampedArray&&(n=new Uint8Array(n.buffer));else{const e=g(m);n=new e(n)}const _=et(u,m),d=n.byteLength/_;if(d%1)throw"length wrong size for format: "+ze(e,E);let T;if(32879===r||35866===r)if(i||o||s)!i||o&&s?!o||i&&s?(T=ot(0,r,i,o,d/s),i=T.width,o=T.height):(T=ot(0,r,i,s,d/o),i=T.width,s=T.height):(T=ot(0,r,o,s,d/i),o=T.width,s=T.height);else{const e=Math.cbrt(d);if(e%1!=0)throw"can't guess cube size of array of numElements: "+d;i=e,o=e,s=e}else T=ot(0,r,i,o,d),i=T.width,o=T.height;if(ct(e),e.pixelStorei(3317,a.unpackAlignment||1),st(e,a),34067===r){const t=d/6*(_/n.BYTES_PER_ELEMENT);dt(0,a).forEach((a=>{const r=t*a.ndx,s=n.subarray(r,r+t);e.texImage2D(a.face,c,u,i,o,0,E,m,s)}))}else 32879===r||35866===r?e.texImage3D(r,c,u,i,o,s,0,E,m,n):e.texImage2D(r,c,u,i,o,0,E,m,n);return{width:i,height:o,depth:s,type:m}}function Nt(e,t,n){const a=n.target||3553;e.bindTexture(a,t);const r=n.level||0,i=n.internalFormat||n.format||6408,o=tt(i),s=n.format||o.format,c=n.type||o.type;if(st(e,n),34067===a)for(let t=0;t<6;++t)e.texImage2D(34069+t,r,i,n.width,n.height,0,s,c,null);else 32879===a||35866===a?e.texImage3D(a,r,i,n.width,n.height,n.depth,0,s,c,null):e.texImage2D(a,r,i,n.width,n.height,0,s,c,null)}function It(e,t,n){n=n||At,t=t||je.textureOptions;const a=e.createTexture(),r=t.target||3553;let i=t.width||1,o=t.height||1;const s=t.internalFormat||6408;e.bindTexture(r,a),34067===r&&(e.texParameteri(r,10242,33071),e.texParameteri(r,10243,33071));let c=t.src;if(c)if("function"==typeof c&&(c=c(e,t)),"string"==typeof c)Ct(e,a,t,n);else if(Ze(c)||Array.isArray(c)&&("number"==typeof c[0]||Array.isArray(c[0])||Ze(c[0]))){const n=St(e,a,c,t);i=n.width,o=n.height}else Array.isArray(c)&&("string"==typeof c[0]||pt(c[0]))?34067===r?Ft(e,a,t,n):vt(e,a,t,n):(Tt(e,a,c,t),i=c.width,o=c.height);else Nt(e,a,t);return mt(t)&&Et(e,a,t,i,o,s),lt(e,a,t),a}function gt(e,t,n){n=n||At;let a=0;const r=[],i={},o={};function s(){0===a&&setTimeout((function(){n(r.length?r:void 0,i,o)}),0)}return Object.keys(t).forEach((function(n){const c=t[n];let u;var l;("string"==typeof(l=c.src)||Array.isArray(l)&&"string"==typeof l[0])&&(u=function(e,t,i){o[n]=i,--a,e&&r.push(e),s()},++a),i[n]=It(e,c,u)})),s(),i}const Bt=M;function Mt(e){return"undefined"!=typeof document&&document.getElementById?document.getElementById(e):null}const Lt={};function Ot(e,t){return Lt[t].bindPoint}function Ut(e,t){return function(n){e.uniform1i(t,n)}}function xt(e,t){return function(n){e.uniform1iv(t,n)}}function Pt(e,t){return function(n){e.uniform2iv(t,n)}}function bt(e,t){return function(n){e.uniform3iv(t,n)}}function Dt(e,t){return function(n){e.uniform4iv(t,n)}}function yt(e,t,n,a){const r=Ot(0,t);return Ke(e)?function(t){let i,o;U(0,t)?(i=t,o=null):(i=t.texture,o=t.sampler),e.uniform1i(a,n),e.activeTexture(33984+n),e.bindTexture(r,i),e.bindSampler(n,o)}:function(t){e.uniform1i(a,n),e.activeTexture(33984+n),e.bindTexture(r,t)}}function Gt(e,t,n,a,r){const i=Ot(0,t),o=new Int32Array(r);for(let e=0;e<r;++e)o[e]=n+e;return Ke(e)?function(t){e.uniform1iv(a,o),t.forEach((function(t,a){let r,s;e.activeTexture(33984+o[a]),U(0,t)?(r=t,s=null):(r=t.texture,s=t.sampler),e.bindSampler(n,s),e.bindTexture(i,r)}))}:function(t){e.uniform1iv(a,o),t.forEach((function(t,n){e.activeTexture(33984+o[n]),e.bindTexture(i,t)}))}}function wt(e,t){return function(n){if(n.value)switch(e.disableVertexAttribArray(t),n.value.length){case 4:e.vertexAttrib4fv(t,n.value);break;case 3:e.vertexAttrib3fv(t,n.value);break;case 2:e.vertexAttrib2fv(t,n.value);break;case 1:e.vertexAttrib1fv(t,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(34962,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,n.numComponents||n.size,n.type||5126,n.normalize||!1,n.stride||0,n.offset||0),void 0!==n.divisor&&e.vertexAttribDivisor(t,n.divisor)}}function Xt(e,t){return function(n){if(n.value){if(e.disableVertexAttribArray(t),4!==n.value.length)throw new Error("The length of an integer constant value must be 4!");e.vertexAttrib4iv(t,n.value)}else e.bindBuffer(34962,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||5124,n.stride||0,n.offset||0),void 0!==n.divisor&&e.vertexAttribDivisor(t,n.divisor)}}function Wt(e,t){return function(n){if(n.value){if(e.disableVertexAttribArray(t),4!==n.value.length)throw new Error("The length of an unsigned integer constant value must be 4!");e.vertexAttrib4uiv(t,n.value)}else e.bindBuffer(34962,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||5125,n.stride||0,n.offset||0),void 0!==n.divisor&&e.vertexAttribDivisor(t,n.divisor)}}function Vt(e,t,n){const a=n.size,r=n.count;return function(n){e.bindBuffer(34962,n.buffer);const i=n.size||n.numComponents||a,o=i/r,s=n.type||5126,c=Lt[s].size*i,u=n.normalize||!1,l=n.offset||0,E=c/r;for(let a=0;a<r;++a)e.enableVertexAttribArray(t+a),e.vertexAttribPointer(t+a,o,s,u,c,l+E*a),void 0!==n.divisor&&e.vertexAttribDivisor(t+a,n.divisor)}}Lt[5126]={Type:Float32Array,size:4,setter:function(e,t){return function(n){e.uniform1f(t,n)}},arraySetter:function(e,t){return function(n){e.uniform1fv(t,n)}}},Lt[35664]={Type:Float32Array,size:8,setter:function(e,t){return function(n){e.uniform2fv(t,n)}},cols:2},Lt[35665]={Type:Float32Array,size:12,setter:function(e,t){return function(n){e.uniform3fv(t,n)}},cols:3},Lt[35666]={Type:Float32Array,size:16,setter:function(e,t){return function(n){e.uniform4fv(t,n)}},cols:4},Lt[5124]={Type:Int32Array,size:4,setter:Ut,arraySetter:xt},Lt[35667]={Type:Int32Array,size:8,setter:Pt,cols:2},Lt[35668]={Type:Int32Array,size:12,setter:bt,cols:3},Lt[35669]={Type:Int32Array,size:16,setter:Dt,cols:4},Lt[5125]={Type:Uint32Array,size:4,setter:function(e,t){return function(n){e.uniform1ui(t,n)}},arraySetter:function(e,t){return function(n){e.uniform1uiv(t,n)}}},Lt[36294]={Type:Uint32Array,size:8,setter:function(e,t){return function(n){e.uniform2uiv(t,n)}},cols:2},Lt[36295]={Type:Uint32Array,size:12,setter:function(e,t){return function(n){e.uniform3uiv(t,n)}},cols:3},Lt[36296]={Type:Uint32Array,size:16,setter:function(e,t){return function(n){e.uniform4uiv(t,n)}},cols:4},Lt[35670]={Type:Uint32Array,size:4,setter:Ut,arraySetter:xt},Lt[35671]={Type:Uint32Array,size:8,setter:Pt,cols:2},Lt[35672]={Type:Uint32Array,size:12,setter:bt,cols:3},Lt[35673]={Type:Uint32Array,size:16,setter:Dt,cols:4},Lt[35674]={Type:Float32Array,size:32,setter:function(e,t){return function(n){e.uniformMatrix2fv(t,!1,n)}},rows:2,cols:2},Lt[35675]={Type:Float32Array,size:48,setter:function(e,t){return function(n){e.uniformMatrix3fv(t,!1,n)}},rows:3,cols:3},Lt[35676]={Type:Float32Array,size:64,setter:function(e,t){return function(n){e.uniformMatrix4fv(t,!1,n)}},rows:4,cols:4},Lt[35685]={Type:Float32Array,size:32,setter:function(e,t){return function(n){e.uniformMatrix2x3fv(t,!1,n)}},rows:2,cols:3},Lt[35686]={Type:Float32Array,size:32,setter:function(e,t){return function(n){e.uniformMatrix2x4fv(t,!1,n)}},rows:2,cols:4},Lt[35687]={Type:Float32Array,size:48,setter:function(e,t){return function(n){e.uniformMatrix3x2fv(t,!1,n)}},rows:3,cols:2},Lt[35688]={Type:Float32Array,size:48,setter:function(e,t){return function(n){e.uniformMatrix3x4fv(t,!1,n)}},rows:3,cols:4},Lt[35689]={Type:Float32Array,size:64,setter:function(e,t){return function(n){e.uniformMatrix4x2fv(t,!1,n)}},rows:4,cols:2},Lt[35690]={Type:Float32Array,size:64,setter:function(e,t){return function(n){e.uniformMatrix4x3fv(t,!1,n)}},rows:4,cols:3},Lt[35678]={Type:null,size:0,setter:yt,arraySetter:Gt,bindPoint:3553},Lt[35680]={Type:null,size:0,setter:yt,arraySetter:Gt,bindPoint:34067},Lt[35679]={Type:null,size:0,setter:yt,arraySetter:Gt,bindPoint:32879},Lt[35682]={Type:null,size:0,setter:yt,arraySetter:Gt,bindPoint:3553},Lt[36289]={Type:null,size:0,setter:yt,arraySetter:Gt,bindPoint:35866},Lt[36292]={Type:null,size:0,setter:yt,arraySetter:Gt,bindPoint:35866},Lt[36293]={Type:null,size:0,setter:yt,arraySetter:Gt,bindPoint:34067},Lt[36298]={Type:null,size:0,setter:yt,arraySetter:Gt,bindPoint:3553},Lt[36299]={Type:null,size:0,setter:yt,arraySetter:Gt,bindPoint:32879},Lt[36300]={Type:null,size:0,setter:yt,arraySetter:Gt,bindPoint:34067},Lt[36303]={Type:null,size:0,setter:yt,arraySetter:Gt,bindPoint:35866},Lt[36306]={Type:null,size:0,setter:yt,arraySetter:Gt,bindPoint:3553},Lt[36307]={Type:null,size:0,setter:yt,arraySetter:Gt,bindPoint:32879},Lt[36308]={Type:null,size:0,setter:yt,arraySetter:Gt,bindPoint:34067},Lt[36311]={Type:null,size:0,setter:yt,arraySetter:Gt,bindPoint:35866};const Ht={};Ht[5126]={size:4,setter:wt},Ht[35664]={size:8,setter:wt},Ht[35665]={size:12,setter:wt},Ht[35666]={size:16,setter:wt},Ht[5124]={size:4,setter:Xt},Ht[35667]={size:8,setter:Xt},Ht[35668]={size:12,setter:Xt},Ht[35669]={size:16,setter:Xt},Ht[5125]={size:4,setter:Wt},Ht[36294]={size:8,setter:Wt},Ht[36295]={size:12,setter:Wt},Ht[36296]={size:16,setter:Wt},Ht[35670]={size:4,setter:Xt},Ht[35671]={size:8,setter:Xt},Ht[35672]={size:12,setter:Xt},Ht[35673]={size:16,setter:Xt},Ht[35674]={size:4,setter:Vt,count:2},Ht[35675]={size:9,setter:Vt,count:3},Ht[35676]={size:16,setter:Vt,count:4};const Yt=/ERROR:\s*\d+:(\d+)/gi;const kt=/^[ \t]*\n/;function Kt(e){let t=0;return kt.test(e)&&(t=1,e=e.replace(kt,"")),{lineOffset:t,shaderSource:e}}function zt(e,t){return e.errorCallback(t),e.callback&&setTimeout((()=>{e.callback(`${t}\n${e.errors.join("\n")}`)})),null}function jt(e,t,n,a){const r=e.createShader(n);return e.shaderSource(r,Kt(t).shaderSource),e.compileShader(r),a.callback||function(e,t,n,a){a=a||Bt;const r=e.getShaderParameter(n,35713);if(!r){const r=e.getShaderInfoLog(n),{lineOffset:i,shaderSource:o}=Kt(e.getShaderSource(n));a(`${function(e,t="",n=0){const a=[...t.matchAll(Yt)],r=new Map(a.map(((e,n)=>{const r=parseInt(e[1]),i=a[n+1],o=i?i.index:t.length;return[r-1,t.substring(e.index,o)]})));return e.split("\n").map(((e,t)=>{const a=r.get(t);return`${t+1+n}: ${e}${a?`\n\n^^^ ${a}`:""}`})).join("\n")}(o,r,i)}\nError compiling ${ze(e,t)}: ${r}`)}return r}(e,n,r,a.errorCallback)?r:(e.deleteShader(r),null)}function Zt(e,t,n){let a,r,i;if("function"==typeof t&&(n=t,t=void 0),"function"==typeof e)n=e,e=void 0;else if(e&&!Array.isArray(e)){if(e.errorCallback&&e.errors)return e;const t=e;n=t.errorCallback,e=t.attribLocations,a=t.transformFeedbackVaryings,r=t.transformFeedbackMode,i=t.callback}const o=n||Bt,s=[],c={errorCallback(e,...t){s.push(e),o(e,...t)},transformFeedbackVaryings:a,transformFeedbackMode:r,callback:i,errors:s};if(e){let n={};Array.isArray(e)?e.forEach((function(e,a){n[e]=t?t[a]:a})):n=e,c.attribLocations=n}return c}const qt=["VERTEX_SHADER","FRAGMENT_SHADER"];function Qt(e,t){return t.indexOf("frag")>=0?35632:t.indexOf("vert")>=0?35633:void 0}function $t(e,t){t.forEach((function(t){e.deleteShader(t)}))}const Jt=(e=0)=>new Promise((t=>setTimeout(t,e)));function en(e,t,n,a,r){const i=Zt(n,a,r),o=[],s=[];for(let n=0;n<t.length;++n){let a=t[n];if("string"==typeof a){const t=Mt(a),r=t?t.text:a;let o=e[qt[n]];t&&t.type&&(o=Qt(0,t.type)||o),a=jt(e,r,o,i),s.push(a)}c=a,"undefined"!=typeof WebGLShader&&c instanceof WebGLShader&&o.push(a)}var c;if(o.length!==t.length)return $t(e,s),zt(i,"not enough shaders for program");const u=e.createProgram();o.forEach((function(t){e.attachShader(u,t)})),i.attribLocations&&Object.keys(i.attribLocations).forEach((function(t){e.bindAttribLocation(u,i.attribLocations[t],t)}));let l=i.transformFeedbackVaryings;return l&&(l.attribs&&(l=l.attribs),Array.isArray(l)||(l=Object.keys(l)),e.transformFeedbackVaryings(u,l,i.transformFeedbackMode||35981)),e.linkProgram(u),i.callback?(async function(e,t,n){const a=e.getExtension("KHR_parallel_shader_compile"),r=a?(e,t)=>e.getProgramParameter(t,a.COMPLETION_STATUS_KHR):()=>!0;let i=0;do{await Jt(i),i=1e3/60}while(!r(e,t));const o=tn(e,t,n.errorCallback),s=o?void 0:n.errors.join("\n");if(!o){(n.errorCallback||Bt)(s),e.deleteProgram(t),t=null}n.callback(s,t)}(e,u,i),null):tn(e,u,i.errorCallback)?u:(e.deleteProgram(u),$t(e,s),null)}function tn(e,t,n){n=n||Bt;const a=e.getProgramParameter(t,35714);if(!a){n(`Error in program linking: ${e.getProgramInfoLog(t)}`)}return a}function nn(e,t,n,a,r){const i=Zt(n,a,r),o=[];for(let n=0;n<t.length;++n){const a=jt(e,t[n],e[qt[n]],i);if(!i.callback&&!a)return null;o.push(a)}return en(e,o,i)}function an(e){const t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}const rn=/(\.|\[|]|\w+)/g;function on(e,t,n,a){const r=e.split(rn).filter((e=>""!==e));let i=0,o="";for(;;){const e=r[i++];o+=e;const c=(s=e[0])>="0"&&s<="9",u=c?parseInt(e):e;c&&(o+=r[i++]);if(i===r.length){n[u]=t;break}{const e=r[i++],t="["===e,s=n[u]||(t?[]:{});n[u]=s,n=s,a[o]=a[o]||function(e){return function(t){ln(e,t)}}(s),o+=e}}var s}function sn(e,t){let n=0;function a(t,a,r){const i=a.name.endsWith("[0]"),o=a.type,s=Lt[o];if(!s)throw new Error(`unknown type: 0x${o.toString(16)}`);let c;if(s.bindPoint){const t=n;n+=a.size,c=i?s.arraySetter(e,o,t,r,a.size):s.setter(e,o,t,r,a.size)}else c=s.arraySetter&&i?s.arraySetter(e,r):s.setter(e,r);return c.location=r,c}const r={},i={},o=e.getProgramParameter(t,35718);for(let n=0;n<o;++n){const o=e.getActiveUniform(t,n);if(an(o))continue;let s=o.name;s.endsWith("[0]")&&(s=s.substr(0,s.length-3));const c=e.getUniformLocation(t,o.name);if(c){const e=a(0,o,c);r[s]=e,on(s,e,i,r)}}return r}function cn(e,t){const n={},a=e.getProgramParameter(t,35971);for(let r=0;r<a;++r){const a=e.getTransformFeedbackVarying(t,r);n[a.name]={index:r,type:a.type,size:a.size}}return n}function un(e,t){const n=e.getProgramParameter(t,35718),a=[],r=[];for(let i=0;i<n;++i){r.push(i),a.push({});const n=e.getActiveUniform(t,i);a[i].name=n.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach((function(n){const i=n[0],o=n[1];e.getActiveUniforms(t,r,e[i]).forEach((function(e,t){a[t][o]=e}))}));const i={},o=e.getProgramParameter(t,35382);for(let n=0;n<o;++n){const a=e.getActiveUniformBlockName(t,n),r={index:e.getUniformBlockIndex(t,a),usedByVertexShader:e.getActiveUniformBlockParameter(t,n,35396),usedByFragmentShader:e.getActiveUniformBlockParameter(t,n,35398),size:e.getActiveUniformBlockParameter(t,n,35392),uniformIndices:e.getActiveUniformBlockParameter(t,n,35395)};r.used=r.usedByVertexShader||r.usedByFragmentShader,i[a]=r}return{blockSpecs:i,uniformData:a}}function ln(e,t){for(const n in t){const a=e[n];"function"==typeof a?a(t[n]):ln(e[n],t[n])}}function En(e,...t){const n=e.uniformSetters||e,a=t.length;for(let e=0;e<a;++e){const a=t[e];if(Array.isArray(a)){const e=a.length;for(let t=0;t<e;++t)En(n,a[t])}else for(const e in a){const t=n[e];t&&t(a[e])}}}function mn(e,t){const n={},a=e.getProgramParameter(t,35721);for(let r=0;r<a;++r){const a=e.getActiveAttrib(t,r);if(an(a))continue;const i=e.getAttribLocation(t,a.name),o=Ht[a.type],s=o.setter(e,i,o);s.location=i,n[a.name]=s}return n}function _n(e,t){for(const n in t){const a=e[n];a&&a(t[n])}}function dn(e,t,n){n.vertexArrayObject?e.bindVertexArray(n.vertexArrayObject):(_n(t.attribSetters||t,n.attribs),n.indices&&e.bindBuffer(34963,n.indices))}function Tn(e,t){const n={program:t,uniformSetters:sn(e,t),attribSetters:mn(e,t)};return Ke(e)&&(n.uniformBlockSpec=un(e,t),n.transformFeedbackInfo=cn(e,t)),n}const An=/\s|{|}|;/;function Rn(e,t,n,a,r){const i=Zt(n,a,r),o=[];if(t=t.map((function(e){if(!An.test(e)){const t=Mt(e);if(t)e=t.text;else{const t=`no element with id: ${e}`;i.errorCallback(t),o.push(t)}}return e})),o.length)return zt(i,"");const s=i.callback;s&&(i.callback=(t,n)=>{let a;t||(a=Tn(e,n)),s(t,a)});const c=nn(e,t,i);return c?Tn(e,c):null}function pn(e,t,n,a,r,i){n=void 0===n?4:n;const o=t.indices,s=t.elementType,c=void 0===a?t.numElements:a;r=void 0===r?0:r,s||o?void 0!==i?e.drawElementsInstanced(n,c,void 0===s?5123:t.elementType,r,i):e.drawElements(n,c,void 0===s?5123:t.elementType,r):void 0!==i?e.drawArraysInstanced(n,r,c,i):e.drawArrays(n,r,c)}const hn=[{format:6408,type:5121,min:9729,wrap:33071},{format:34041}],fn={};fn[34041]=33306,fn[6401]=36128,fn[36168]=36128,fn[6402]=36096,fn[33189]=36096,fn[33190]=36096,fn[36012]=36096,fn[35056]=33306,fn[36013]=33306;const Cn={};function Fn(e,t,n,a){const r=36160,i=e.createFramebuffer();e.bindFramebuffer(r,i),n=n||e.drawingBufferWidth,a=a||e.drawingBufferHeight;let o=0;const s={framebuffer:i,attachments:[],width:n,height:a};return(t=t||hn).forEach((function(t){let i=t.attachment;const c=t.samples,u=t.format;let l=t.attachmentPoint||function(e,t){return fn[e]||fn[t]}(u,t.internalFormat);if(l||(l=36064+o++),!i)if(void 0!==c||function(e){return Cn[e]}(u))i=e.createRenderbuffer(),e.bindRenderbuffer(36161,i),c>1?e.renderbufferStorageMultisample(36161,c,u,n,a):e.renderbufferStorage(36161,u,n,a);else{const r=Object.assign({},t);r.width=n,r.height=a,void 0===r.auto&&(r.auto=!1,r.min=r.min||r.minMag||9729,r.mag=r.mag||r.minMag||9729,r.wrapS=r.wrapS||r.wrap||33071,r.wrapT=r.wrapT||r.wrap||33071),i=It(e,r)}if(O(0,i))e.framebufferRenderbuffer(r,l,36161,i);else{if(!U(0,i))throw new Error("unknown attachment type");void 0!==t.layer?e.framebufferTextureLayer(r,l,i,t.level||0,t.layer):e.framebufferTexture2D(r,l,t.target||3553,i,t.level||0)}s.attachments.push(i)})),s}function vn(e,t,n){n=n||36160,t?(e.bindFramebuffer(n,t.framebuffer),e.viewport(0,0,t.width,t.height)):(e.bindFramebuffer(n,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))}Cn[32854]=!0,Cn[32855]=!0,Cn[36194]=!0,Cn[34041]=!0,Cn[33189]=!0,Cn[6401]=!0,Cn[36168]=!0;function Sn(e,t,n){const a=e.createVertexArray();return e.bindVertexArray(a),t.length||(t=[t]),t.forEach((function(t){dn(e,t,n)})),e.bindVertexArray(null),{numElements:n.numElements,elementType:n.elementType,vertexArrayObject:a}}const Nn={addExtensionsToContext:!0};const In=/^(.*?)_/;function gn(e,t){ze(e,0);const n=e.getExtension(t);if(n){const a={},r=In.exec(t)[1],i="_"+r;for(const t in n){const o=n[t],s="function"==typeof o,c=s?r:i;let u=t;t.endsWith(c)&&(u=t.substring(0,t.length-c.length)),void 0!==e[u]?s||e[u]===o||L(u,e[u],o,t):s?e[u]=function(e){return function(){return e.apply(n,arguments)}}(o):(e[u]=o,a[u]=o)}a.constructor={name:n.constructor.name},ze(a,0)}return n}const Bn=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function Mn(e){for(let t=0;t<Bn.length;++t)gn(e,Bn[t])}function Ln(e,t){const n=function(e,t){const n=["webgl2","webgl","experimental-webgl"];let a=null;for(let r=0;r<n.length;++r)if(a=e.getContext(n[r],t),a){Nn.addExtensionsToContext&&Mn(a);break}return a}(e,t);return n}function On(e,t){t=t||1,t=Math.max(0,t);const n=e.clientWidth*t|0,a=e.clientHeight*t|0;return(e.width!==n||e.height!==a)&&(e.width=n,e.height=a,!0)}const Un=e=>e*Math.PI/180;const xn=v,Pn=_,bn=Pn.normalize(Pn.create(5,5,5));let Dn=Pn.create(5*bn[0],5*bn[1],5*bn[2]);function yn(e,t,n){t.useProgram(e.program),dn(t,e,n);En(e,function(){const e=xn.identity(),t=xn.perspective(30,1,.1,1e3),n=Pn.create(0,0,0),a=Pn.create(0,1,0),r=xn.lookAt(Dn,n,a),i=xn.inverse(r),o=xn.multiply(i,e);return{u_MvpMatrix:xn.multiply(t,o)}}()),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.depthMask(!1),pn(t,n),t.depthMask(!0)}var Gn=function(){const t=document.getElementById("webgl");var r=Ln(t);const i=Rn(r,[e(a),e(n)]);console.log(" pInfo --- ",i),r.clearColor(0,0,0,1),r.enable(r.DEPTH_TEST),r.enable(r.BLEND),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA);const o=function(e){return k(e,{a_Color:{data:[.5,.5,1,.4,.5,.5,1,.4,.5,.5,1,.4,.5,.5,1,.4,.5,1,.5,.4,.5,1,.5,.4,.5,1,.5,.4,.5,1,.5,.4,1,.5,.5,.4,1,.5,.5,.4,1,.5,.5,.4,1,.5,.5,.4,1,1,.5,.4,1,1,.5,.4,1,1,.5,.4,1,1,.5,.4,1,1,1,.4,1,1,1,.4,1,1,1,.4,1,1,1,.4,.5,1,1,.4,.5,1,1,.4,.5,1,1,.4,.5,1,1,.4]},a_Position:{data:[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,-1,1,-1,-1,1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,-1]},indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]})}(r);yn(i,r,o),function(e,t,n=(e=>{})){console.log(" enable came");let a,r,i=!1,o=-90,s=-45;const c=e=>{if(i){const t=.5,{offsetX:i,offsetY:c}=e,u=i-a,l=c-r;a=i,r=c;o+=u*t,s+=l*t,s>89&&(s=89),s<-89&&(s=-89);const E=Math.cos(Un(o))*Math.cos(Un(s))*5,m=5*Math.sin(Un(s)),_=Math.sin(Un(o))*Math.cos(Un(s))*5,d=Pn.create(E,m,_);Dn=d,n(Dn)}},u=e=>{i=!1,document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u)},l=e=>{i=!0;const{offsetX:t,offsetY:n}=e;a=t,r=n,document.addEventListener("mousemove",c),document.addEventListener("mouseup",u)};document.addEventListener("mousedown",l)}(0,0,(e=>{yn(i,r,o)}))};const wn=v,Xn=_,Wn=Xn.normalize(Xn.create(1,1,1));let Vn=Xn.create(5*Wn[0],5*Wn[1],5*Wn[2]);function Hn(e,t,n){t.useProgram(e.program),dn(t,e,n);En(e,function(){const e=wn.identity(),t=wn.perspective(20,1,.1,1e3),n=Xn.create(0,0,0),a=Xn.create(0,1,0),r=wn.lookAt(Vn,n,a),i=wn.inverse(r),o=wn.multiply(i,e);return{u_MvpMatrix:wn.multiply(t,o)}}()),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),Fn(t),t.depthMask(!1),pn(t,n),t.depthMask(!0),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,400,400),pn(t,n)}console.log(Vn);var Yn=function(){const t=document.getElementById("webgl");var r=Ln(t,{alpha:!1});const i=Rn(r,[e(a),e(n)]);console.log(" pInfo --- ---- ",i),r.clearColor(0,0,0,1),r.enable(r.DEPTH_TEST),r.enable(r.BLEND),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA),window.spector.startCapture(t,100);const o=ke.createPlaneBufferInfo(r,10,10);console.log("; bufInfo ",o),Hn(i,r,o),function(e,t,n=(e=>{})){console.log(" enable came");let a,r,i=!1,o=-90,s=-45;const c=e=>{if(i){const t=.5,{offsetX:i,offsetY:c}=e,u=i-a,l=c-r;a=i,r=c;o+=u*t,s+=l*t,s>89&&(s=89),s<-89&&(s=-89);const E=Math.cos(Un(o))*Math.cos(Un(s))*5,m=5*Math.sin(Un(s)),_=Math.sin(Un(o))*Math.cos(Un(s))*5,d=Xn.create(E,m,_);Vn=d,n(Vn)}},u=e=>{i=!1,document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u)},l=e=>{i=!0;const{offsetX:t,offsetY:n}=e;a=t,r=n,document.addEventListener("mousemove",c),document.addEventListener("mouseup",u)};document.addEventListener("mousedown",l)}(0,0,(e=>{Hn(i,r,o)}))};function kn(e,t,n,a){var r=e.createBuffer();return r?(e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),r.num=n,r.type=a,r):(console.log("Failed to create the buffer object"),null)}function Kn(e,t,n){var a=e.createBuffer();return a?(e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,a),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW),a.type=n,a):(console.log("Failed to create the buffer object"),null)}var zn=new window.Matrix4,jn=new window.Matrix4;function Zn(e,t,n,a){qn(e,t.a_Position,n.vertexBuffer),qn(e,t.a_TexCoord,n.texCoordBuffer),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,a),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.indexBuffer),e.drawElements(e.TRIANGLES,n.numIndices,n.indexBuffer.type,0)}function qn(e,t,n){e.bindBuffer(e.ARRAY_BUFFER,n),e.vertexAttribPointer(t,n.num,n.type,!1,0,0),e.enableVertexAttribArray(t)}var Qn=Date.now();var $n=function(){var t=document.getElementById("webgl"),n=window.getWebGLContext(t);if(n)if(window.initShaders(n,e("#define GLSLIFY 1\n\n  attribute vec4 a_Position;\n  attribute vec2 a_TexCoord;\n  uniform mat4 u_MvpMatrix;\n  varying vec2 v_TexCoord;\n  void main() {\n    gl_Position = u_MvpMatrix * a_Position;\n    v_TexCoord = a_TexCoord;\n  }\n"),e("\n  #ifdef GL_ES\n  precision mediump float;\n#define GLSLIFY 1\n\n  #endif\n  uniform sampler2D u_Sampler;\n  varying vec2 v_TexCoord;\n  void main() {\n    gl_FragColor = texture2D(u_Sampler, v_TexCoord);\n  }\n"))){var a=n.program;if(a.a_Position=n.getAttribLocation(a,"a_Position"),a.a_TexCoord=n.getAttribLocation(a,"a_TexCoord"),a.u_MvpMatrix=n.getUniformLocation(a,"u_MvpMatrix"),a.a_Position<0||a.a_TexCoord<0||!a.u_MvpMatrix)console.log("Failed to get the storage location of a_Position, a_TexCoord, u_MvpMatrix");else{var r=function(e){var t=new Float32Array([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,-1,1,-1,-1,1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,-1]),n=new Float32Array([1,1,0,1,0,0,1,0,0,1,0,0,1,0,1,1,1,0,1,1,0,1,0,0,1,1,0,1,0,0,1,0,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1]),a=new Uint8Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),r=new Object;return r.vertexBuffer=kn(e,t,3,e.FLOAT),r.texCoordBuffer=kn(e,n,2,e.FLOAT),r.indexBuffer=Kn(e,a,e.UNSIGNED_BYTE),r.vertexBuffer&&r.texCoordBuffer&&r.indexBuffer?(r.numIndices=a.length,e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),r):null}(n),i=function(e){var t=new Float32Array([1,1,0,-1,1,0,-1,-1,0,1,-1,0]),n=new Float32Array([1,1,0,1,0,0,1,0]),a=new Uint8Array([0,1,2,0,2,3]),r=new Object;return r.vertexBuffer=kn(e,t,3,e.FLOAT),r.texCoordBuffer=kn(e,n,2,e.FLOAT),r.indexBuffer=Kn(e,a,e.UNSIGNED_BYTE),r.vertexBuffer&&r.texCoordBuffer&&r.indexBuffer?(r.numIndices=a.length,e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),r):null}(n);if(r&&i){var o=function(e){var t=e.createTexture();if(!t)return console.log("Failed to create the Texture object"),null;var n=e.getUniformLocation(e.program,"u_Sampler");if(!n)return console.log("Failed to get the storage location of u_Sampler"),null;var a=new Image;if(!a)return console.log("Failed to create the Image object"),null;return a.onload=function(){e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,a),e.uniform1i(n,0),e.bindTexture(e.TEXTURE_2D,null)},a.src="./resources/sky_cloud.jpg",t}(n);if(o){var s=function(e){var t,n,a,r=function(){return t&&e.deleteFramebuffer(t),n&&e.deleteTexture(n),a&&e.deleteRenderbuffer(a),null};if(!(t=e.createFramebuffer()))return console.log("Failed to create frame buffer object"),r();if(!(n=e.createTexture()))return console.log("Failed to create texture object"),r();if(e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,256,256,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),t.texture=n,!(a=e.createRenderbuffer()))return console.log("Failed to create renderbuffer object"),r();e.bindRenderbuffer(e.RENDERBUFFER,a),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,256,256),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,a);var i=e.checkFramebufferStatus(e.FRAMEBUFFER);if(e.FRAMEBUFFER_COMPLETE!==i)return console.log("Frame buffer object is incomplete: "+i.toString()),r();return e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindTexture(e.TEXTURE_2D,null),e.bindRenderbuffer(e.RENDERBUFFER,null),t}(n);if(s){n.enable(n.DEPTH_TEST);var c=new window.Matrix4;c.setPerspective(30,t.width/t.height,1,100),c.lookAt(0,0,7,0,0,0,0,1,0);var u=new window.Matrix4;u.setPerspective(30,1,1,100),u.lookAt(0,2,7,0,0,0,0,1,0),window.spector.startCapture(t,1e3);var l=0,E=function(){var e,a,m;e=l,a=Date.now(),m=a-Qn,Qn=a,function(e,t,n,a,r,i,o,s,c){e.bindFramebuffer(e.FRAMEBUFFER,n),e.viewport(0,0,256,256),e.clearColor(.2,.2,.4,1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),function(e,t,n,a,r,i){zn.setRotate(20,1,0,0),zn.rotate(a,0,1,0),jn.set(i),jn.multiply(zn),e.uniformMatrix4fv(t.u_MvpMatrix,!1,jn.elements),Zn(e,t,n,r)}(e,e.program,r,i,o,c),e.bindFramebuffer(e.FRAMEBUFFER,null),e.viewport(0,0,t.width,t.height),e.clearColor(0,0,0,.5),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),function(e,t,n,a,r,i){zn.setTranslate(0,0,1),zn.rotate(20,1,0,0),zn.rotate(a,0,1,0),jn.set(i),jn.multiply(zn),e.uniformMatrix4fv(t.u_MvpMatrix,!1,jn.elements),Zn(e,t,n,r)}(e,e.program,a,i,n.texture,s)}(n,t,s,i,r,l=(e+30*m/1e3)%360,o,c,u),window.requestAnimationFrame(E)};E()}else console.log("Failed to intialize the framebuffer object (FBO)")}else console.log("Failed to intialize the texture.")}else console.log("Failed to set the vertex information")}}else console.log("Failed to intialize shaders.");else console.log("Failed to get the rendering context for WebGL")};new Matrix4;Date.now();new Matrix4,new Matrix4,new Matrix4;Date.now();var Jn=function(e){this.fileName=e,this.mtls=new Array(0),this.objects=new Array(0),this.vertices=new Array(0),this.normals=new Array(0)};function ea(e,t){var n=e.split("\n");n.push(null);for(var a,r=0,i="",o=new ua;null!=(a=n[r++]);){o.init(a);var s=o.getWord();if(null!=s)switch(s){case"#":continue;case"newmtl":i=t.parseNewmtl(o);continue;case"Kd":if(""==i)continue;var c=t.parseRGB(o,i);t.materials.push(c),i="";continue}}t.complete=!0}Jn.prototype.parse=function(e,t,n){var a=e.split("\n");a.push(null);for(var r,i=0,o=null,s="",c=new ua;null!=(r=a[i++]);){c.init(r);var u=c.getWord();if(null!=u)switch(u){case"#":continue;case"mtllib":var l=this.parseMtllib(c,this.fileName),E=new ta;this.mtls.push(E);var m=new XMLHttpRequest;m.onreadystatechange=function(){4==m.readyState&&(404!=m.status?ea(m.responseText,E):E.complete=!0)},m.open("GET",l,!0),m.send();continue;case"o":case"g":var _=this.parseObjectName(c);this.objects.push(_),o=_;continue;case"v":var d=this.parseVertex(c,t);this.vertices.push(d);continue;case"vn":var T=this.parseNormal(c);this.normals.push(T);continue;case"usemtl":s=this.parseUsemtl(c);continue;case"f":var A=this.parseFace(c,s,this.vertices,n);o.addFace(A);continue}}return!0},Jn.prototype.parseMtllib=function(e,t){var n=t.lastIndexOf("/"),a="";return n>0&&(a=t.substr(0,n+1)),a+e.getWord()},Jn.prototype.parseObjectName=function(e){var t=e.getWord();return new oa(t)},Jn.prototype.parseVertex=function(e,t){var n=e.getFloat()*t,a=e.getFloat()*t,r=e.getFloat()*t;return new aa(n,a,r)},Jn.prototype.parseNormal=function(e){var t=e.getFloat(),n=e.getFloat(),a=e.getFloat();return new ra(t,n,a)},Jn.prototype.parseUsemtl=function(e){return e.getWord()},Jn.prototype.parseFace=function(e,t,n,a){for(var r=new sa(t);;){var i=e.getWord();if(null==i)break;var o=i.split("/");if(o.length>=1){var s=parseInt(o[0])-1;r.vIndices.push(s)}if(o.length>=3){var c=parseInt(o[2])-1;r.nIndices.push(c)}else r.nIndices.push(-1)}var u=[n[r.vIndices[0]].x,n[r.vIndices[0]].y,n[r.vIndices[0]].z],l=[n[r.vIndices[1]].x,n[r.vIndices[1]].y,n[r.vIndices[1]].z],E=[n[r.vIndices[2]].x,n[r.vIndices[2]].y,n[r.vIndices[2]].z],m=Ea(u,l,E);if(null==m){if(r.vIndices.length>=4)m=Ea(l,E,[n[r.vIndices[3]].x,n[r.vIndices[3]].y,n[r.vIndices[3]].z]);null==m&&(m=[0,1,0])}if(a&&(m[0]=-m[0],m[1]=-m[1],m[2]=-m[2]),r.normal=new ra(m[0],m[1],m[2]),r.vIndices.length>3){for(var _=r.vIndices.length-2,d=new Array(3*_),T=new Array(3*_),A=0;A<_;A++)d[3*A+0]=r.vIndices[0],d[3*A+1]=r.vIndices[A+1],d[3*A+2]=r.vIndices[A+2],T[3*A+0]=r.nIndices[0],T[3*A+1]=r.nIndices[A+1],T[3*A+2]=r.nIndices[A+2];r.vIndices=d,r.nIndices=T}return r.numIndices=r.vIndices.length,r},Jn.prototype.isMTLComplete=function(){if(0==this.mtls.length)return!0;for(var e=0;e<this.mtls.length;e++)if(!this.mtls[e].complete)return!1;return!0},Jn.prototype.findColor=function(e){for(var t=0;t<this.mtls.length;t++)for(var n=0;n<this.mtls[t].materials.length;n++)if(this.mtls[t].materials[n].name==e)return this.mtls[t].materials[n].color;return new ia(.8,.8,.8,1)},Jn.prototype.getDrawingInfo=function(){for(var e=0,t=0;t<this.objects.length;t++)e+=this.objects[t].numIndices;var n=e,a=new Float32Array(3*n),r=new Float32Array(3*n),i=new Float32Array(4*n),o=new Uint16Array(e),s=0;for(t=0;t<this.objects.length;t++)for(var c=this.objects[t],u=0;u<c.faces.length;u++)for(var l=c.faces[u],E=this.findColor(l.materialName),m=l.normal,_=0;_<l.vIndices.length;_++){o[s]=s;var d=l.vIndices[_],T=this.vertices[d];a[3*s+0]=T.x,a[3*s+1]=T.y,a[3*s+2]=T.z,i[4*s+0]=E.r,i[4*s+1]=E.g,i[4*s+2]=E.b,i[4*s+3]=E.a;var A=l.nIndices[_];if(A>=0){var R=this.normals[A];r[3*s+0]=R.x,r[3*s+1]=R.y,r[3*s+2]=R.z}else r[3*s+0]=m.x,r[3*s+1]=m.y,r[3*s+2]=m.z;s++}return new ca(a,r,i,o)};var ta=function(){this.complete=!1,this.materials=new Array(0)};ta.prototype.parseNewmtl=function(e){return e.getWord()},ta.prototype.parseRGB=function(e,t){var n=e.getFloat(),a=e.getFloat(),r=e.getFloat();return new na(t,n,a,r,1)};var na=function(e,t,n,a,r){this.name=e,this.color=new ia(t,n,a,r)},aa=function(e,t,n){this.x=e,this.y=t,this.z=n},ra=function(e,t,n){this.x=e,this.y=t,this.z=n},ia=function(e,t,n,a){this.r=e,this.g=t,this.b=n,this.a=a},oa=function(e){this.name=e,this.faces=new Array(0),this.numIndices=0};oa.prototype.addFace=function(e){this.faces.push(e),this.numIndices+=e.numIndices};var sa=function(e){this.materialName=e,null==e&&(this.materialName=""),this.vIndices=new Array(0),this.nIndices=new Array(0)},ca=function(e,t,n,a){this.vertices=e,this.normals=t,this.colors=n,this.indices=a},ua=function(e){this.str,this.index,this.init(e)};function la(e,t){for(var n=t,a=e.length;n<a;n++){var r=e.charAt(n);if("\t"==r||" "==r||"("==r||")"==r||'"'==r)break}return n-t}function Ea(e,t,n){for(var a=new Float32Array(3),r=new Float32Array(3),i=0;i<3;i++)a[i]=e[i]-t[i],r[i]=n[i]-t[i];var o=new Float32Array(3);o[0]=a[1]*r[2]-a[2]*r[1],o[1]=a[2]*r[0]-a[0]*r[2],o[2]=a[0]*r[1]-a[1]*r[0];var s=new Vector3(o);return s.normalize(),s.elements}ua.prototype.init=function(e){this.str=e,this.index=0},ua.prototype.skipDelimiters=function(){for(var e=this.index,t=this.str.length;e<t;e++){var n=this.str.charAt(e);if("\t"!=n&&" "!=n&&"("!=n&&")"!=n&&'"'!=n)break}this.index=e},ua.prototype.skipToNextWord=function(){this.skipDelimiters();var e=la(this.str,this.index);this.index+=e+1},ua.prototype.getWord=function(){this.skipDelimiters();var e=la(this.str,this.index);if(0==e)return null;var t=this.str.substr(this.index,e);return this.index+=e+1,t},ua.prototype.getInt=function(){return parseInt(this.getWord())},ua.prototype.getFloat=function(){return parseFloat(this.getWord())};new Matrix4;Date.now();new window.Matrix4;Date.now();new Matrix4;Date.now();new window.Matrix4,new window.Matrix4,new window.Matrix4;Date.now();new Matrix4;Date.now();new Matrix4,new Matrix4;Date.now();new Matrix4,new Matrix4;Date.now();new Matrix4,new Matrix4;Date.now();const ma=v;ma.identity();const _a=v;_a.identity();const da=v;da.identity(),da.identity();const Ta=_;Ta.create(0,0,-1);let Aa;var Ra;(Ra=Aa||(Aa={}))[Ra.X=0]="X",Ra[Ra.Y=1]="Y",Ra[Ra.Z=2]="Z";const pa=[0,1,0],ha=[-1.5,-2.2,-20];Aa.X,Aa.X;let fa;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(fa||(fa={}));const Ca=[1,1,1];console.log("lightColor",Ca);const Fa=[.5*Ca[0],.5*Ca[1],.5*Ca[2]],va=[-1.2,-1,-20];fa.X,fa.X;let Sa;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(Sa||(Sa={}));const Na=[1,1,1];console.log("lightColor",Na);const Ia=[.5*Na[0],.5*Na[1],.5*Na[2]],ga=[-1.2,-1,-20];Sa.X,Sa.X;let Ba;!function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"}(Ba||(Ba={}));const Ma=[1,1,1];Ba.X,Ba.X;let La;!function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"}(La||(La={}));const Oa=[1,1,1],Ua=[8,-3,-20];La.X,La.X;let xa;!function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"}(xa||(xa={}));const Pa=[1,1,1],ba=[8,-3,-20];xa.X,xa.X;const Da=_;Da.create(0,0,-1);const ya=[1,1,1],Ga=[.5*ya[0],.5*ya[1],.5*ya[2]],wa=[.2*Ga[0],.2*Ga[1],.2*Ga[2]],Xa=[0,0,-5];Da.create(...Xa),Da.create(...wa),Da.create(...Ga),Da.create(1,1,1);const Wa=_;Wa.create(0,0,-1);const Va=[1,1,1],Ha=[.5*Va[0],.5*Va[1],.5*Va[2]],Ya=[.2*Ha[0],.2*Ha[1],.2*Ha[2]];Wa.create(-1,-1,-1),Wa.create(...Ya),Wa.create(...Ha),Wa.create(1,1,1);const ka=_;ka.create(0,0,-1);const Ka=_,za={x:0,y:0,z:5};Ka.create(0,0,-1);za.x,za.y,za.z;const ja=_,Za={x:0,y:0,z:0};ja.create(0,0,-1);Za.x,Za.y,Za.z;const qa=_,Qa={x:0,y:0,z:3};qa.create(0,0,-1);Qa.x,Qa.y,Qa.z;const $a=v;$a.identity();const Ja=v;Ja.identity();const er=v,tr=_;tr.create(0,0,5),er.identity();const nr=v;nr.identity();var ar;ar="\n  #ifdef GL_ES \n  precision mediump float;\n#define GLSLIFY 1\n \n  #endif \n  varying vec4 v_Color; \n  void main() { \n    gl_FragColor = v_Color; \n  }";var rr;rr="#define GLSLIFY 1\n\n  attribute vec4 a_Position;\n  attribute float a_Face;    // Surface number (Cannot use int for attribute variable)\n  attribute vec4 a_color;\n  uniform mat4 u_MvpMatrix;\n  uniform int u_PickedFace;  // Surface number of selected face\n\n  varying vec4 v_Point;\n  varying vec4 v_Color;\n\n  void main() {\n    v_Point = a_Position;\n    vec4 point = u_MvpMatrix * a_Position;\n    gl_Position = point;\n    int face = int(a_Face);  // Convert to int\n    vec3 color = a_color.rgb;\n    if(\n      face == u_PickedFace\n    ){\n      color = vec3(0.17, 0.48, 0.97);\n    }\n    if(u_PickedFace == 0) {  // In case of 0, insert the face number into alpha\n      v_Color = vec4(color, a_Face/255.0);\n    }else {\n      v_Color = vec4(color, 0.3);\n    }\n  }\n";const ir=v,or=_;or.create(0,0,5),ir.identity();const sr=v;sr.identity();const cr=v,ur=_;cr.identity(),ur.create(5,6,5);const lr=v,Er=_;lr.identity(),Er.create(5,6,5);const mr=v,_r=_;mr.identity(),_r.create(5,6,5);var dr;dr="precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D u_texture;\n\nvarying vec2 v_texCoord;\nvarying float v_Select;\nvarying vec4 v_Color;\n\nvoid main() {\n  vec4 color = texture2D(u_texture, v_texCoord);\n  color = vec4(color.x / 2.0, color.y / 2.0, color.z / 2.0, color.a);\n  if(v_Select == 0.0){\n    gl_FragColor = v_Color;\n  }else{\n    gl_FragColor = color + v_Color;\n  }\n}\n";var Tr;Tr="#define GLSLIFY 1\nattribute vec4 position;\nattribute vec2 texcoord;\nattribute float a_Face;\n\nuniform int u_PickedFace;\nuniform int u_HighlightFace;\nuniform mat4 u_MvpMatrix;\n\nvarying vec2 v_texCoord;\nvarying vec4 v_Color;\nvarying float v_Select;\n\nvoid main() {\n  gl_Position = u_MvpMatrix * position;\n  v_texCoord = texcoord;\n  vec3 color = vec3(0.0);\n  int face = int(a_Face);\n  if(face == u_PickedFace || face == u_HighlightFace){\n    // highlight\n    color = vec3(0.39, 0.54, 1);\n  }\n  v_Select = float(u_PickedFace);\n  if(u_PickedFace == 0){ // 开启选择 face 把 a_Face 传递给像素\n    v_Color = vec4(color, a_Face / 255.0);\n  }else{\n    v_Color = vec4(color, 0.0);\n  }\n}\n";const Ar=_,Rr=v;class pr{constructor(e,t,n,a,r){this.gl=e,this.programInfo=Rn(e,[n,a]),this.program=this.programInfo.program,this.bufferInfo=k(this.gl,t),this.modelMatrix=r&&r.modelMatrix||v.identity(),this.viewMatrix=r&&r.viewMatrix||v.identity(),this.projectMatrix=r&&r.projectMatrix||v.identity(),this.dftUniform=r&&r.uniformData||{},this.textureAry=r&&r.textureAry||void 0,this.init()}setUniform(e){this.gl.useProgram(this.program),this.dftUniform=e,En(this.programInfo,e)}updateUniform(e){this.gl.useProgram(this.program),En(this.programInfo,e)}reApplyUniform(){this.gl.useProgram(this.program),En(this.programInfo,this.dftUniform)}updateTexture(){this.textureAry&&En(this.programInfo,{u_texture:this.textureAry[0]})}draw(e=(()=>{})){this.gl.useProgram(this.program),e(),this.updateTexture(),dn(this.gl,this.programInfo,this.bufferInfo),pn(this.gl,this.bufferInfo)}updateCamera(e){const t=Ar.create(0,1,0),n=Rr.lookAt(e,Ar.create(0,0,0),t),a=Rr.inverse(n);this.updateMVP(void 0,a,void 0)}updateMVP(e,t,n){const a=v.identity(),r=n||this.projectMatrix,i=e||this.modelMatrix,o=t||this.viewMatrix;t&&(this.viewMatrix=t),e&&(this.viewMatrix=e),n&&(this.projectMatrix=n),v.multiply(o,i,a),v.multiply(r,a,a),this.setUniform({model:i,view:o,project:r,u_MvpMatrix:a})}init(){}}class hr{constructor(e,t=.1,n=100,a=1,r="perspective"){this.fov=e,this.near=t,this.far=n,this.aspect=a}radianToDegree(e){return 180/Math.PI*e}degreeToRadian(e){return Math.PI/180*e}getVal(){const e=this.degreeToRadian(this.fov);return Rr.perspective(e,this.aspect,this.near,this.far)}updateVal(e){const{fov:t,near:n,far:a,aspect:r}=e;return void 0!==t&&(this.fov=t),void 0!==n&&(this.near=n),void 0!==a&&(this.far=a),void 0!==r&&(this.aspect=r),this.getVal()}}class fr{constructor(e,t){const{eye:n,target:a,cameraUp:r}=e;this.eye=n,this.target=a,this.cameraUp=r,this.camera=Rr.identity(),this.canvas=t}getCamera(){this.camera=Rr.lookAt(this.eye,this.target,this.cameraUp)}getView(){this.getCamera();return Rr.inverse(this.camera)}setFrustum(e){this.frustum=e}updateView(e){const{eye:t,target:n,cameraUp:a}=e;return void 0!==t&&(this.eye=t),void 0!==n&&(this.target=n),void 0!==a&&(this.cameraUp=a),this.getView()}calcPV(e){const t=this.getView();if(void 0!==this.frustum){const n=Rr.multiply(this.frustum,t);if(void 0!==e){return Rr.multiply(n,e)}return n}throw new Error("frustum can not be undefined")}enableMove(e=(()=>{})){let t,n,a=!1,r=-90,i=-45;const o=this.canvas||document,s=o=>{if(a){const a=.5,{offsetX:s,offsetY:c}=o,u=s-t,l=c-n;t=s,n=c;r+=u*a,i+=l*a,i>89&&(i=89),i<-89&&(i=-89);const E=Math.cos(Un(r))*Math.cos(Un(i))*5,m=5*Math.sin(Un(i)),_=Math.sin(Un(r))*Math.cos(Un(i))*5;this.updateView({eye:[E,m,_]}),e()}},c=e=>{a=!1,o.removeEventListener("mousemove",s),o.removeEventListener("mouseup",c)};o.addEventListener("mousedown",(e=>{a=!0;const{offsetX:r,offsetY:i}=e;t=r,n=i,o.addEventListener("mousemove",s),o.addEventListener("mouseup",c)}))}destroy(){}}const Cr=(e,t,n,a)=>{t=t||[0,0,0],n=n||[0,0,0],a=a||[1,1,1];const r=Rr.translation(t),i=Rr.rotationX(n[0]),o=Rr.rotationX(n[1]),s=Rr.rotationX(n[2]),c=Rr.scale(Rr.identity(),a);Rr.multiply(i,c,e),Rr.multiply(o,e,e),Rr.multiply(s,e,e),Rr.multiply(r,e,e)},Fr=e=>{var t,n,a,r,i,o,s,c,u,l,E,m,_,d,T,A,R,p,h,f,C=(e=e||{}).long_bands||32,F=e.lat_bands||32,v=e.radius||1,S=Math.PI/F,N=2*Math.PI/C,I=C*F*4,g=C*F*6,B=new Float32Array(3*I),M=new Float32Array(3*I),L=new Float32Array(2*I),O=new Uint16Array(g),U=0,x=0;for(R=0;R<F;R++)for(t=R*S,s=Math.cos(t),c=Math.cos(t+S),p=0;p<C;p++)n=p*N,a=Math.sin(t)*Math.cos(n),r=Math.sin(t)*Math.cos(n+N),i=Math.sin(t+S)*Math.cos(n),o=Math.sin(t+S)*Math.cos(n+N),u=Math.sin(t)*Math.sin(n),l=Math.sin(t)*Math.sin(n+N),E=Math.sin(t+S)*Math.sin(n),m=Math.sin(t+S)*Math.sin(n+N),_=1-p/C,d=1-(p+1)/C,T=1-R/F,A=1-(R+1)/F,f=2*U,B[h=3*U]=a*v,B[h+1]=s*v,B[h+2]=u*v,B[h+3]=r*v,B[h+4]=s*v,B[h+5]=l*v,B[h+6]=i*v,B[h+7]=c*v,B[h+8]=E*v,B[h+9]=o*v,B[h+10]=c*v,B[h+11]=m*v,M[h]=a,M[h+1]=s,M[h+2]=u,M[h+3]=r,M[h+4]=s,M[h+5]=l,M[h+6]=i,M[h+7]=c,M[h+8]=E,M[h+9]=o,M[h+10]=c,M[h+11]=m,L[f]=_,L[f+1]=T,L[f+2]=d,L[f+3]=T,L[f+4]=_,L[f+5]=A,L[f+6]=d,L[f+7]=A,O[x]=U,O[x+1]=U+1,O[x+2]=U+2,O[x+3]=U+2,O[x+4]=U+1,O[x+5]=U+3,U+=4,x+=6;return{position:B,normal:M,texcoord:L,indices:O}};class vr{constructor(e,t){e&&t?(this.canvas=e,this.gl=t):(this.canvas=document.createElement("canvas"),this.canvas.width=800,this.canvas.height=800,document.body.appendChild(this.canvas),this.gl=this.canvas.getContext("webgl")),this.programInfo=Rn(this.gl,["\nattribute vec4 position;\nattribute vec2 uv;\n\nvarying vec2 v_UV;\nvoid main() {\n  gl_Position = position;\n  v_UV = uv;\n}\n    ","\nprecision mediump float;\nuniform sampler2D tex0;\nvarying vec2 v_UV;\nvoid main() {\n  vec2 v_Texcoord = v_UV;\n  vec4 color = texture2D(tex0, v_Texcoord);\n  gl_FragColor = color;\n  // gl_FragColor = vec4(v_UV, 0.0, 1.0);\n}\n    "]),this.bufferInfo=k(this.gl,{position:{data:[.5,1,.5,.5,1,.5,.5,1,1,.5,1,1],size:2},uv:{data:[0,1,0,0,1,0,0,1,1,0,1,1],size:2}}),this.uniforms={}}drawFramebuffer(e){const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null),this.gl.clearColor(0,0,0,0),this.gl.useProgram(this.programInfo.program),dn(this.gl,this.programInfo,this.bufferInfo),En(this.programInfo,{tex0:e}),pn(this.gl,this.bufferInfo)}readFromFramebuffer(e,t){const n=this.gl;n.bindFramebuffer(n.FRAMEBUFFER,e);const a=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,a),t&&n.bindFramebuffer(n.FRAMEBUFFER,t),console.log(a)}}const Sr=v,Nr=_;let Ir,gr,Br,Mr,Lr,Or,Ur;const xr=Nr.normalize(Nr.create(5,5,5));let Pr=Nr.create(5*xr[0],5*xr[1],5*xr[2]);const br=async()=>{const e=[];return await Promise.all([{faceColor:"#F00",textColor:"#FFF",text:"右"},{faceColor:"#FF0",textColor:"#FFF",text:"左"},{faceColor:"#0F0",textColor:"#FFF",text:"上"},{faceColor:"#0FF",textColor:"#FFF",text:"下"},{faceColor:"#00F",textColor:"#FFF",text:"前"},{faceColor:"#F0F",textColor:"#FFF",text:"后"},{faceColor:"#F00",textColor:"#FFF",text:"东"},{faceColor:"#FF0",textColor:"#FFF",text:"南"},{faceColor:"#0F0",textColor:"#FFF",text:"西"},{faceColor:"#0FF",textColor:"#FFF",text:"北"}].map((async t=>{const n=document.createElement("canvas").getContext("2d");if(null===n)return[];n.canvas.width=128,n.canvas.height=128;const{faceColor:a,textColor:r,text:i}=t;await((e,t,n,a,r)=>new Promise(((t,i)=>{const{width:o,height:s}=e.canvas;if(r){const i=document.createElement("img");i.src=r,i.addEventListener("load",(r=>{e.drawImage(i,0,0,o,s),e.font=.5*o+"px sans-serif",e.globalAlpha=.7,e.textAlign="center",e.textBaseline="middle",e.fillStyle=n,e.fillText(a,o/2,s/2),t(e)}))}else e.clearRect(0,0,128,128),e.fillStyle="rgba(100, 100, 100, 0.0)",e.globalAlpha=.5,e.fillRect(0,0,128,128),e.font=.5*o+"px sans-serif",e.textAlign="center",e.textBaseline="middle",e.fillStyle=n,e.fillText(a,o/2,s/2),t(e)})))(n,0,r,i);const o=await(async e=>new Promise(((t,n)=>{const a=e.canvas.toDataURL();e.canvas.toBlob((e=>{if(e){const n=new Image;n.src=URL.createObjectURL(e),n.onload=()=>{t({imgElement:n,imgUrl:a})}}}))})))(n);o.imgElement.alt=i,e.push(o)}))),e};function Dr(e,t){let n="";return e.map((e=>{e.imgElement.alt===t&&(n=e.imgUrl)})),n}function yr(e){return{position:{data:[-.5,0,-.5,-.5,0,.5,.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0,-.5],size:3},texcoord:{data:[0,0,0,1,1,1,0,0,1,1,1,0],size:2},a_Face:{data:new Array(18).fill(40+e)}}}function Gr(){let e=-1;const t=function(e,t){let n;return t.map((t=>{const a=Xr(e,e,t.pointOnPlane,t.normal);if(a){const[r,i,o]=e,[s,c,u]=a;if(r*s>=0&&i*c>=0&&o*u>=0){const e=t.area;e.x[0]<=s&&s<=e.x[1]&&e.y[0]<=c&&c<=e.y[1]&&e.z[0]<=u&&u<=e.z[1]&&(n=t)}}})),n}([Pr[0],Pr[1],Pr[2]],[gr,Br,Mr,Lr,Or,Ur]);if(t){const n=Xr([Pr[0],Pr[1],Pr[2]],[Pr[0],Pr[1],Pr[2]],t.pointOnPlane,t.normal);if(n){const a=function(e,t){let n=-1;const[a,r,i]=e;return t.faceArea.map(((e,t)=>{e.x[0]<=a&&a<=e.x[1]&&e.y[0]<=r&&r<=e.y[1]&&e.z[0]<=i&&i<=e.z[1]&&(n=t)})),n}(n,t);e=t.faceIdAry[a]}}return e}function wr(e){let t=1/0,n=-1/0,a=1/0,r=-1/0,i=1/0,o=-1/0;return e.map((e=>{const[s,c,u]=e;t=Math.min(s,t),n=Math.max(s,n),a=Math.min(c,a),r=Math.max(c,r),i=Math.min(u,i),o=Math.max(u,o)})),{x:[t,n],y:[a,r],z:[i,o]}}function Xr(e,t,n,a){const r=Nr.create(...n),i=Nr.create(...e),o=Nr.create(...t),s=Nr.create(...a),c=o,u=s;if(1===Nr.dot(o,s))return!1;const l=((r[0]-i[0])*u[0]+(r[1]-i[1])*u[1]+(r[2]-i[2])*u[2])/(u[0]*c[0]+u[1]*c[1]+u[2]*c[2]);return[i[0]+c[0]*l,i[1]+c[1]*l,i[2]+c[2]*l]}var Wr=async function(){var t=document.getElementById("webgl"),n=t.getContext("webgl",{alpha:!0});if(!n)return void console.log("Failed to get the rendering context for WebGL");Ir=await br(),console.log(" imgAry ",Ir);const a=[Dr(Ir,"右"),Dr(Ir,"左"),Dr(Ir,"上"),Dr(Ir,"下"),Dr(Ir,"前"),Dr(Ir,"后")],r=[Dr(Ir,"南"),Dr(Ir,"东"),Dr(Ir,"北"),Dr(Ir,"西")],i=Nr.create(0,1,0),o=Sr.lookAt(Pr,Nr.create(0,0,0),i),s=Sr.inverse(o),c=Sr.ortho(-1,1,-1,1,1,100),u=await async function(e,t,n){return new Promise(((a,r)=>{gt(e,{cube:{target:e.TEXTURE_CUBE_MAP,src:t},East:{src:n[0]},South:{src:n[1]},West:{src:n[2]},North:{src:n[3]}},((e,t)=>{e?(console.error(e),r(" initTextureImg fail")):a(t)}))}))}(n,a,r);console.log(" texs ---- ",u);const l=function(){function e(e,t,n){let a=[];const[r,i,o]=e,s=.18;let c=[];if("top"===n||"bottom"===n){if("top"===n){a=[[r,i,o],[r,i,o+s],[r+s,i,o+s],[r+s,i,o],[r+t-s,i,o],[r+t-s,i,o+s],[r+t,i,o+s],[r+t,i,o],[r,i,o+t-s],[r,i,o+t],[r+s,i,o+t],[r+s,i,o+t-s],[r+t-s,i,o+t-s],[r+t-s,i,o+t],[r+t,i,o+t],[r+t,i,o+t-s]]}if("bottom"===n){a=[[r,i,o],[r,i,o-s],[r+s,i,o-s],[r+s,i,o],[r+t-s,i,o],[r+t-s,i,o-s],[r+t,i,o-s],[r+t,i,o],[r,i,o-t+s],[r,i,o-t],[r+s,i,o-t],[r+s,i,o-t+s],[r+t-s,i,o-t+s],[r+t-s,i,o-t],[r+t,i,o-t],[r+t,i,o-t+s]]}}if("front"===n||"back"===n){if("front"===n){a=[[r,i,o],[r,i-s,o],[r+s,i-s,o],[r+s,i,o],[r+t-s,i,o],[r+t-s,i-s,o],[r+t,i-s,o],[r+t,i,o],[r,i-t+s,o],[r,i-t,o],[r+s,i-t,o],[r+s,i-t+s,o],[r+t-s,i-t+s,o],[r+t-s,i-t,o],[r+t,i-t,o],[r+t,i-t+s,o]]}if("back"===n){a=[[r,i,o],[r,i-s,o],[r-s,i-s,o],[r-s,i,o],[r-t+s,i,o],[r-t+s,i-s,o],[r-t,i-s,o],[r-t,i,o],[r,i-t+s,o],[r,i-t,o],[r-s,i-t,o],[r-s,i-t+s,o],[r-t+s,i-t+s,o],[r-t+s,i-t,o],[r-t,i-t,o],[r-t,i-t+s,o]]}}if("left"===n||"right"===n){if("right"===n){a=[[r,i,o],[r,i-s,o],[r,i-s,o-s],[r,i,o-s],[r,i,o-t+s],[r,i-s,o-t+s],[r,i-s,o-t],[r,i,o-t],[r,i-t+s,o],[r,i-t,o],[r,i-t,o-s],[r,i-t+s,o-s],[r,i-t+s,o-t+s],[r,i-t,o-t+s],[r,i-t,o-t],[r,i-t+s,o-t]]}if("left"===n){a=[[r,i,o],[r,i-s,o],[r,i-s,o+s],[r,i,o+s],[r,i,o+t-s],[r,i-s,o+t-s],[r,i-s,o+t],[r,i,o+t],[r,i-t+s,o],[r,i-t,o],[r,i-t,o+s],[r,i-t+s,o+s],[r,i-t+s,o+t-s],[r,i-t,o+t-s],[r,i-t,o+t],[r,i-t+s,o+t]]}}return c.push(wr([a[0],a[1],a[2],a[3]]),wr([a[3],a[2],a[5],a[4]]),wr([a[4],a[5],a[6],a[7]]),wr([a[1],a[2],a[8],a[11]]),wr([a[2],a[11],a[12],a[5]]),wr([a[5],a[12],a[15],a[6]]),wr([a[8],a[9],a[10],a[11]]),wr([a[11],a[10],a[13],a[12]]),wr([a[12],a[13],a[14],a[15]])),{result:a,faceArea:c}}const t=e([-.5,.5,-.5],1,"left"),n=e([.5,.5,.5],1,"right"),a=e([.5,.5,-.5],1,"back"),r=e([-.5,.5,.5],1,"front"),i=e([-.5,.5,-.5],1,"top"),o=e([-.5,-.5,.5],1,"bottom"),[s,c,u,l,E,m,_,d,T,A,R,p,h,f,C,F]=t.result,[v,S,N,I,g,B,M,L,O,U,x,P,b,D,y,G]=n.result,[w,X,W,V,H,Y,k,K,z,j,Z,q,Q,$,J,ee]=a.result,[te,ne,ae,re,ie,oe,se,ce,ue,le,Ee,me,_e,de,Te,Ae]=r.result,[Re,pe,he,fe,Ce,Fe,ve,Se,Ne,Ie,ge,Be,Me,Le,Oe,Ue]=i.result,[xe,Pe,be,De,ye,Ge,we,Xe,We,Ve,He,Ye,ke,Ke,ze,je]=o.result,Ze=[s,c,u,l,E,m,_,d,T,A,R,p,h,f,C,F],qe=[v,S,N,I,g,B,M,L,O,U,x,P,b,D,y,G],Qe=[w,X,W,V,H,Y,k,K,z,j,Z,q,Q,$,J,ee],$e=[te,ne,ae,re,ie,oe,se,ce,ue,le,Ee,me,_e,de,Te,Ae],Je=[Re,pe,he,fe,Ce,Fe,ve,Se,Ne,Ie,ge,Be,Me,Le,Oe,Ue],et=[xe,Pe,be,De,ye,Ge,we,Xe,We,Ve,He,Ye,ke,Ke,ze,je],tt=[...s,...c,...u,...l,...l,...u,...m,...E,...E,...m,..._,...d,...c,...T,...p,...u,...u,...p,...h,...m,...m,...h,...F,..._,...T,...A,...R,...p,...p,...R,...f,...h,...h,...f,...C,...F,...v,...S,...N,...I,...I,...N,...B,...g,...g,...B,...M,...L,...S,...O,...P,...N,...N,...P,...b,...B,...B,...b,...G,...M,...O,...U,...x,...P,...P,...x,...D,...b,...b,...D,...y,...G,...te,...ne,...ae,...re,...re,...ae,...oe,...ie,...ie,...oe,...se,...ce,...ne,...ue,...me,...ae,...ae,...me,..._e,...oe,...oe,..._e,...Ae,...se,...ue,...le,...Ee,...me,...me,...Ee,...de,..._e,..._e,...de,...Te,...Ae,...w,...X,...W,...V,...V,...W,...Y,...H,...H,...Y,...k,...K,...X,...z,...q,...W,...W,...q,...Q,...Y,...Y,...Q,...ee,...k,...z,...j,...Z,...q,...q,...Z,...$,...Q,...Q,...$,...J,...ee,...Re,...pe,...he,...fe,...fe,...he,...Fe,...Ce,...Ce,...Fe,...ve,...Se,...pe,...Ne,...Be,...he,...he,...Be,...Me,...Fe,...Fe,...Me,...Ue,...ve,...Ne,...Ie,...ge,...Be,...Be,...ge,...Le,...Me,...Me,...Le,...Oe,...Ue,...xe,...Pe,...be,...De,...De,...be,...Ge,...ye,...ye,...Ge,...we,...Xe,...Pe,...We,...Ye,...be,...be,...Ye,...ke,...Ge,...Ge,...ke,...je,...we,...We,...Ve,...He,...Ye,...Ye,...He,...Ke,...ke,...ke,...Ke,...ze,...je],nt=32,at=33,rt=34,it=35,ot=36,st=21,ct=22,ut=23,lt=24,Et=25,mt=26,_t=27,dt=28,Tt=1,At=2,Rt=3,pt=4,ht=5,ft=6,Ct=7,Ft=8,vt=9,St=10,Nt=11,It=12;gr={vertex:Ze,faceIdAry:[st,Tt,ut,It,31,vt,_t,ft,Et],normal:[-1,0,0],pointOnPlane:[-.5,0,0],name:"left",area:wr(Ze),faceArea:t.faceArea},Br={vertex:qe,faceIdAry:[lt,pt,ct,St,nt,Nt,mt,Ct,dt],normal:[1,0,0],pointOnPlane:[.5,0,0],name:"right",area:wr(qe),faceArea:n.faceArea},Mr={vertex:Je,faceIdAry:[st,Rt,ct,Tt,it,pt,ut,At,lt],normal:[0,1,0],pointOnPlane:[0,.5,0],name:"top",area:wr(Je),faceArea:i.faceArea},Ur={vertex:et,faceIdAry:[Et,ht,mt,ft,ot,Ct,_t,Ft,dt],normal:[0,-1,0],pointOnPlane:[0,-.5,0],name:"bottom",area:wr(et),faceArea:o.faceArea},Or={vertex:$e,faceIdAry:[ut,At,lt,vt,at,St,Et,ht,mt],normal:[0,0,1],pointOnPlane:[0,0,.5],name:"front",area:wr($e),faceArea:r.faceArea},Lr={vertex:Qe,faceIdAry:[ct,Rt,st,Nt,rt,It,dt,Ft,_t],normal:[0,0,-1],pointOnPlane:[0,0,-.5],name:"back",area:wr(Qe),faceArea:a.faceArea};const gt=[21,21,21,21,1,1,1,1,23,23,23,23,12,12,12,12,31,31,31,31,9,9,9,9,27,27,27,27,6,6,6,6,25,25,25,25,24,24,24,24,4,4,4,4,22,22,22,22,10,10,10,10,32,32,32,32,11,11,11,11,26,26,26,26,7,7,7,7,28,28,28,28,23,23,23,23,2,2,2,2,24,24,24,24,9,9,9,9,33,33,33,33,10,10,10,10,25,25,25,25,5,5,5,5,26,26,26,26,22,22,22,22,3,3,3,3,21,21,21,21,11,11,11,11,34,34,34,34,12,12,12,12,28,28,28,28,8,8,8,8,27,27,27,27,21,21,21,21,3,3,3,3,22,22,22,22,1,1,1,1,35,35,35,35,4,4,4,4,23,23,23,23,2,2,2,2,24,24,24,24,25,25,25,25,5,5,5,5,26,26,26,26,6,6,6,6,36,36,36,36,7,7,7,7,27,27,27,27,8,8,8,8,28,28,28,28],Bt=new Array(648).fill(.2);let Mt=(e=>{const t=[],n=216/4;for(let e=0;e<n;e++){const n=4*e;t.push(n,n+1,n+2,n,n+2,n+3)}return t})();return{a_Position:{data:tt,size:3},a_Face:{data:gt,size:1},a_Color:{data:Bt,size:3},indices:Mt}}(),E=new pr(n,l,e("#define GLSLIFY 1\nattribute vec4 a_Position;\n// attribute vec4 a_Color;\nattribute float a_Face;    // Surface number (Cannot use int for attribute variable)\nuniform mat4 u_MvpMatrix;\nuniform int u_PickedFace;  // Surface number of selected face\nuniform int u_HighlightFace;  // Surface number of highlight face\n\nvarying vec4 v_Point;\nvarying vec4 v_Color;\nvarying float v_Select;\nvarying vec3 v_Normal;\n\nvoid main() {\n  v_Point = a_Position;\n  vec4 point = u_MvpMatrix * a_Position;\n  gl_Position = point;\n  v_Normal = normalize(a_Position.xyz);\n  int face = int(a_Face);  // Convert to int\n  // vec3 color = a_Color.rgb;\n  vec3 color = vec3(0.0);\n  if(\n    face == u_PickedFace\n    ||\n    face == u_HighlightFace\n  ){\n    color = vec3(0, 0.18, 0.67);\n  }\n  v_Select = float(u_PickedFace);\n  if(u_PickedFace == 0) {  // In case of 0, insert the face number into alpha\n    v_Color = vec4(color, a_Face/255.0);\n  }else {\n    v_Color = vec4(color, 0.5);\n  }\n}\n"),e("\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nuniform samplerCube u_texture;\n\nvarying vec4 v_Color;\nvarying float v_Select;\nvarying vec3 v_Normal;\n\nvoid main() {\n  vec4 color = textureCube(u_texture, v_Normal);\n  if(v_Select == 0.0){\n    gl_FragColor = v_Color;\n  }else{\n    gl_FragColor = v_Color + color;\n  }\n  // gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\n}\n")),m=Gr();E.updateMVP(void 0,s,c),E.setUniform({u_texture:u.cube,u_PickedFace:-1,u_HighlightFace:m}),console.log(" cubeEngine ",E);const _=function(){const e=function(){const e=.8,t=.85,n=100,a=Un(360/n),r=[];for(let i=0;i<n;i++){const n=i*a,o=(i+1)*a,s=[e*Math.sin(n),0,e*Math.cos(n)],c=[e*Math.sin(o),0,e*Math.cos(o)],u=[t*Math.sin(n),0,t*Math.cos(n)],l=[t*Math.sin(o),0,t*Math.cos(o)];r.push(...s,...u,...l),r.push(...s,...l,...c)}return r}(),t=new Array(1800).fill(.3),n=new Array(1800).fill(100);return{a_Position:{data:e,size:3},a_color:{data:t,size:3},a_Face:{data:n,size:1}}}(),d=new pr(n,_,e(rr),e(ar),{modelMatrix:Sr.translate(Sr.identity(),Nr.create(0,-.7,0))});d.updateMVP(void 0,s,c),d.setUniform({u_PickedFace:-1});const T=yr(1),A=new pr(n,T,e(Tr),e(dr),{modelMatrix:Sr.scale(Sr.translate(Sr.rotateY(Sr.identity(),Un(0)),Nr.create(0,-.7,1)),Nr.create(.3,.3,.3)),textureAry:[u.East]});A.updateMVP(void 0,s,c),A.setUniform({u_texture:u.East,u_PickedFace:-1,u_HighlightFace:-1});const R=yr(2),p=new pr(n,R,e(Tr),e(dr),{modelMatrix:Sr.scale(Sr.translate(Sr.rotateY(Sr.identity(),Un(180)),Nr.create(0,-.7,1)),Nr.create(.3,.3,.3)),textureAry:[u.West]});p.updateMVP(void 0,s,c),p.setUniform({u_texture:u.West,u_PickedFace:-1,u_HighlightFace:-1});const h=yr(3),f=new pr(n,h,e(Tr),e(dr),{modelMatrix:Sr.scale(Sr.translate(Sr.rotateY(Sr.identity(),Un(90)),Nr.create(0,-.7,1)),Nr.create(.3,.3,.3)),textureAry:[u.South]});f.updateMVP(void 0,s,c),f.setUniform({u_PickedFace:-1,u_HighlightFace:-1});const C=yr(4),F=new pr(n,C,e(Tr),e(dr),{modelMatrix:Sr.scale(Sr.translate(Sr.rotateY(Sr.identity(),Un(-90)),Nr.create(0,-.7,1)),Nr.create(.3,.3,.3)),textureAry:[u.North]});F.updateMVP(void 0,s,c),F.setUniform({u_texture:u.North,u_PickedFace:-1,u_HighlightFace:-1}),n.clearColor(1,0,1,1),n.enable(n.DEPTH_TEST),n.enable(n.BLEND),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT);const v=e=>{E.updateUniform({u_PickedFace:e}),E.draw(),d.updateUniform({u_PickedFace:e}),d.draw(),A.updateUniform({u_PickedFace:e}),A.draw(),p.updateUniform({u_PickedFace:e}),p.draw(),f.updateUniform({u_PickedFace:e}),f.draw(),F.updateUniform({u_PickedFace:e}),F.draw()};!function(e,t,n=((e,t)=>{})){console.log(" enable came");let a,r,i=!1,o=-90,s=-45;const c=e=>{if(i){const t=.5,{offsetX:i,offsetY:c}=e,u=i-a,l=c-r;a=i,r=c;o+=u*t,s+=l*t,s>89&&(s=89),s<-89&&(s=-89),console.log(" newPitch ",s);const E=Math.cos(Un(o))*Math.cos(Un(s))*5,m=5*Math.sin(Un(s)),_=Math.sin(Un(o))*Math.cos(Un(s))*5,d=Nr.create(E,m,_);Pr=d;const T=Gr();n(Pr,T)}},u=e=>{i=!1,document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u)},l=e=>{i=!0;const{offsetX:t,offsetY:n}=e;a=t,r=n,document.addEventListener("mousemove",c),document.addEventListener("mouseup",u)};document.addEventListener("mousedown",l)}(0,0,((e,t)=>{E.updateCamera(e),E.setUniform({u_PickedFace:-1,u_HighlightFace:t}),d.updateCamera(e),A.updateCamera(e),p.updateCamera(e),f.updateCamera(e),F.updateCamera(e),n&&n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),E.draw(),d.draw(),A.draw(),p.draw(),f.draw(),F.draw()}));const S=e=>{const{clientX:a,clientY:r}=e,i=t.getBoundingClientRect(),o=a-i.left,s=i.bottom-r;if(n){n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.disable(n.BLEND),v(0);const e=new Uint8Array(4);n.readPixels(o,s,1,1,n.RGBA,n.UNSIGNED_BYTE,e);const t=e[3];return n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.enable(n.BLEND),v(t),t}};t.addEventListener("mousemove",(e=>{S(e)})),t.addEventListener("click",(e=>{const t=S(e);console.log(" picked face is: ",t)}))};const Vr=v,Hr=_;let Yr,kr,Kr,zr={E:{},N:{},S:{},W:{}},jr=Hr.create(0,3,5),Zr=Vr.identity(),qr=Vr.identity();const Qr=async()=>{const e=[];return await Promise.all([{faceColor:"rgba(0,0,0,0)",textColor:"#FFF",text:"东"},{faceColor:"rgba(0,0,0,0)",textColor:"#FFF",text:"南"},{faceColor:"rgba(0,0,0,0)",textColor:"#FFF",text:"西"},{faceColor:"rgba(0,0,0,0)",textColor:"#FFF",text:"北"}].map((async t=>{const n=document.createElement("canvas").getContext("2d");if(null===n)return[];n.canvas.width=128,n.canvas.height=128;const{faceColor:a,textColor:r,text:i}=t;await((e,t,n,a,r)=>new Promise(((i,o)=>{const{width:s,height:c}=e.canvas;if(r){const t=document.createElement("img");t.src=r,t.addEventListener("load",(r=>{e.drawImage(t,0,0,s,c),e.font=.7*s+"px sans-serif",e.textAlign="center",e.textBaseline="middle",e.fillStyle=n,e.fillText(a,s/2,c/2),i(e)}))}else e.fillStyle=t,e.globalAlpha=1,e.fillRect(0,0,128,128),e.font=.7*s+"px sans-serif",e.textAlign="center",e.textBaseline="middle",e.fillStyle="#EEE",e.fillText(a,s/2,c/2),i(e)})))(n,a,r,i);const o=await(async e=>new Promise(((t,n)=>{const a=e.canvas.toDataURL();e.canvas.toBlob((e=>{if(e){const n=new Image;n.src=URL.createObjectURL(e),document.body.appendChild(n),n.onload=()=>{t({imgElement:n,imgUrl:a})}}}))})))(n);o.imgElement.alt=i,e.push(o)}))),e};function $r(e,t){"E"===t&&(t="东"),"W"===t&&(t="西"),"N"===t&&(t="北"),"S"===t&&(t="南");let n="";return e.map((e=>{e.imgElement.alt===t&&(n=e.imgUrl)})),n}function Jr(e,t){["E","N","S","W"].map((n=>{ni(n);const a=zr[n];En(t,{u_matrix:Zr}),a.texture&&En(t,{u_texture:a.texture}),a.bufferInfo&&(dn(e,t,a.bufferInfo),pn(e,a.bufferInfo))}))}function ei(e){dn(e,kr,Yr),pn(e,Yr)}function ti(){let e=Vr.identity();const t=jr,n=Hr.create(0,0,0),a=Hr.create(0,1,0),r=Vr.lookAt(t,n,a),i=Vr.inverse(r),o=Vr.perspective(Un(30),1,1,100),s=Vr.multiply(o,i);qr=Vr.multiply(s,e)}function ni(e){let t=Vr.identity();switch(e){case"E":Vr.translate(t,Hr.create(0,0,1),t);break;case"W":Vr.translate(t,Hr.create(0,0,-1),t),Vr.rotateY(t,Math.PI,t);break;case"S":Vr.translate(t,Hr.create(1,0,0),t),Vr.rotateY(t,Math.PI/2,t);break;case"N":Vr.translate(t,Hr.create(-1,0,0),t),Vr.rotateY(t,-Math.PI/2,t)}Vr.scale(t,Hr.create(.2,.2,.2),t);const n=jr,a=Hr.create(0,0,0),r=Hr.create(0,1,0),i=Vr.lookAt(n,a,r),o=Vr.inverse(i),s=Vr.perspective(Un(30),1,1,100),c=Vr.multiply(s,o);Zr=Vr.multiply(c,t)}var ai,ri=async function(){Kr=await Qr(),console.log(" img ",Kr);var t=document.getElementById("webgl"),n=t.getContext("webgl",{antialias:!1,preserveDrawingBuffer:!0});if(null===n)return void console.log("Failed to get the rendering context for WebGL");const a=Rn(n,[e("#define GLSLIFY 1\nattribute vec4 position;\nattribute vec2 texcoord;\nattribute float a_Face;\n\nuniform int u_SelectFace;\nuniform int u_highLightFace;\nuniform mat4 u_matrix;\nvarying vec2 v_texCoord;\nvarying vec4 v_Color;\nvarying float v_Select;\n\nvoid main() {\n  gl_Position = u_matrix * position;\n  v_texCoord = texcoord;\n\n  vec3 color = vec3(0.0);\n  int face = int(a_Face);\n  if(face == u_SelectFace || face == u_highLightFace){\n    // highlight\n    color = vec3(1);\n  }\n  v_Select = float(u_SelectFace);\n  if(u_SelectFace == 0){ // 开启选择 face 把 a_Face 传递给像素\n    v_Color = vec4(color, a_Face / 255.0);\n  }else{\n    v_Color = vec4(color, 0.0);\n  }\n}\n"),e("precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D u_texture;\n\nvarying vec2 v_texCoord;\nvarying float v_Select;\nvarying vec4 v_Color;\n\nvoid main() {\n  vec4 color = texture2D(u_texture, v_texCoord);\n  color = vec4(color.x / 2.0, color.y / 2.0, color.z / 2.0, color.a);\n  if(v_Select == 0.0){\n    gl_FragColor = v_Color;\n  }else{\n    gl_FragColor = color + v_Color;\n  }\n}\n")]);kr=Rn(n,[e("#define GLSLIFY 1\nattribute vec4 position;\nattribute float a_Face;\n\nuniform mat4 u_matrix;\nuniform int u_SelectFace;\n\nvarying vec4 v_Color;\nvarying float v_Select;\n\nvoid main() {\n  gl_Position = u_matrix * position;\n\n  vec3 color = vec3(0.0);\n  int face = int(a_Face);\n  if(face == u_SelectFace){\n    // highlight\n    color = vec3(1);\n  }\n  v_Select = float(u_SelectFace);\n  if(u_SelectFace == 0){ // 开启选择 face 把 a_Face 传递给像素\n    v_Color = vec4(color.xyz, a_Face / 255.0);\n  }else{\n    v_Color = vec4(color, 0.5);\n  }\n}\n"),e("precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 v_Color;\nvoid main() {\n  gl_FragColor = v_Color;\n}\n")]),console.log(" tex programInfo ==== ",a),console.log(" ring program info ",kr),n.clearColor(0,0,0,1),n.enable(n.DEPTH_TEST),n.enable(n.BLEND),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),function(e,t){e.useProgram(t.program);const n=function(){const e=.85,t=.9,n=100,a=Un(360/n),r=[];for(let i=0;i<n;i++){const n=i*a,o=(i+1)*a,s=[e*Math.sin(n),-0,e*Math.cos(n)],c=[e*Math.sin(o),-0,e*Math.cos(o)],u=[t*Math.sin(n),-0,t*Math.cos(n)],l=[t*Math.sin(o),-0,t*Math.cos(o)];r.push(...s,...u,...l),r.push(...s,...l,...c)}return r}(),a={position:{data:n,size:3},a_Face:{data:new Array(n.length).fill(100),size:1}};Yr=k(e,a),dn(e,t,Yr),ti();En(t,{u_matrix:qr,u_SelectFace:-1}),pn(e,Yr)}(n,kr),function(e,t){e.useProgram(t.program);const n=[$r(Kr,"S"),$r(Kr,"N"),$r(Kr,"E"),$r(Kr,"W")];gt(e,{S:{src:n[0]},N:{src:n[1]},E:{src:n[2]},W:{src:n[3]}},((n,a)=>{if(n)throw new Error("twgl.createTextures error ");["S","N","E","W"].map(((n,r)=>{const i={position:{data:[-.5,0,-.5,-.5,0,.5,.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0,-.5],size:3},texcoord:{data:[0,0,0,1,1,1,0,0,1,1,1,0],size:2},a_Face:{data:new Array(18).fill(40+r)}},o=k(e,i);dn(e,t,o),ni(n);const s={u_matrix:Zr,u_texture:a[n],u_SelectFace:-1};zr[n].texture=a[n],zr[n].bufferInfo=o,En(t,s),pn(e,o)}))}))}(n,a),function(e,t,n){let a,r,i=!1,o=-90,s=0;const c=e=>{if(i){const i=.5,{offsetX:c,offsetY:u}=e,l=c-a,E=-(u-r);a=c,r=u;o+=l*i,s+=E*i,s>89&&(s=89),s<-89&&(s=-89);const m=Math.cos(Un(o))*Math.cos(Un(s))*5,_=5*Math.sin(Un(s)),d=Math.sin(Un(o))*Math.cos(Un(s))*5,T=(Math.cos(Un(s)),Math.sin(Un(o)),Math.sin(Un(s)),Math.cos(Un(s)),Math.cos(Un(o)),Hr.create(m,_,d));jr=T,t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),function(e,t){e.useProgram(t.program);["E","N","S","W"].map((n=>{ni(n);const a=zr[n];En(t,{u_matrix:Zr}),a.texture&&En(t,{u_texture:a.texture}),a.bufferInfo&&(dn(e,t,a.bufferInfo),pn(e,a.bufferInfo))})),e.useProgram(kr.program),dn(e,kr,Yr),ti(),En(kr,{u_matrix:qr}),pn(e,Yr)}(t,n)}},u=e=>{i=!1,document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u)},l=e=>{i=!0;const{offsetX:t,offsetY:n}=e;a=t,r=n,document.addEventListener("mousemove",c),document.addEventListener("mouseup",u)};document.addEventListener("mousedown",l)}(0,n,a),t.addEventListener("click",(e=>{const{offsetX:r,offsetY:i,clientX:o,clientY:s}=e,c=t.getBoundingClientRect(),u=o-c.left,l=c.bottom-s;n&&function(e,t,n,a){e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.useProgram(t.program),e.disable(e.BLEND),En(t,{u_SelectFace:0}),Jr(e,t),e.useProgram(kr.program),En(kr,{u_SelectFace:0}),ei(e);const r=new Uint8Array(4);e.readPixels(n,a,1,1,e.RGBA,e.UNSIGNED_BYTE,r);const i=r[3];e.enable(e.BLEND),e.useProgram(t.program),En(t,{u_SelectFace:i}),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),Jr(e,t),e.useProgram(kr.program),En(kr,{u_SelectFace:i}),ei(e),console.log(i)}(n,a,u,l)}))};ai="precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 v_color;\n\nvoid main() {\n  gl_FragColor = v_color;\n}\n";var ii;ii="#define GLSLIFY 1\n// attribute vec4 position;\n// attribute vec4 color;\n\n// uniform mat4 u_MvpMatrix;\n\n// varying vec4 v_Color;\n\n// void main() {\n//   gl_Position = u_MvpMatrix * position;\n//   v_Color = color;\n// }\nuniform mat4 u_viewProjection;\nuniform vec3 u_lightWorldPos;\nuniform mat4 u_viewInverse;\n\nattribute vec4 instanceColor;\nattribute mat4 instanceWorld;\nattribute vec4 position;\nattribute vec3 normal;\n\nvarying vec4 v_position;\nvarying vec2 v_texCoord;\nvarying vec3 v_normal;\nvarying vec3 v_surfaceToLight;\nvarying vec3 v_surfaceToView;\nvarying vec4 v_color;\n\nvoid main() {\n  v_color = instanceColor;\n  vec4 worldPosition = instanceWorld * position;\n  v_position = u_viewProjection * worldPosition;\n  v_normal = (instanceWorld * vec4(normal, 0)).xyz;\n  v_surfaceToLight = u_lightWorldPos - worldPosition.xyz;\n  v_surfaceToView = u_viewInverse[3].xyz - worldPosition.xyz;\n  gl_Position = v_position;\n}\n";const oi=_,si=oi.normalize(oi.create(1,1,1));let ci=oi.create(5*si[0],5*si[1],5*si[2]);console.log(ci);var ui=function(){const t=document.getElementById("webgl"),n=Ln(t,{alpha:!1}),a=n.getExtension("ANGLE_instanced_arrays"),r=v;if(Mn(n),null!==a&&(n.drawArraysInstanced=a?.drawArraysInstancedANGLE),!n.drawArraysInstanced||!n.createVertexArray)return void alert("need drawArraysInstanced and createVertexArray");const i=Rn(n,[e(ii),e(ai)]);function o(e,t){return void 0===t&&(t=e,e=0),e+Math.random()*(t-e)}const s=new Float32Array(48),c=.5;for(let e=0;e<3;++e){const t=new Float32Array(s.buffer,64*e,16);r.translation([o(-c,c),o(-c,c),o(-c,c)],t)}const u=ke.createPlaneVertices();Object.assign(u,{instanceWorld:{numComponents:16,data:s,divisor:1},instanceColor:{numComponents:4,data:[1,0,0,.5,0,1,0,.5,0,0,1,.5],divisor:1}});const l=k(n,u),E=Sn(n,i,l);console.log(" arrary s ",u);const m=new Float32Array(48);for(let e=0;e<1;++e){const t=new Float32Array(m.buffer,64*e,16);r.translation([o(-c,c),o(-c,c),o(-c,c)],t)}const _=ke.createPlaneVertices();Object.assign(_,{instanceWorld:{numComponents:16,data:m,divisor:1},instanceColor:{numComponents:4,data:[1,0,0,1],divisor:1}});const d=k(n,_);Sn(n,i,d),console.log(" arrary s ",_);const T={u_lightWorldPos:[1,8,-30],u_lightColor:[1,1,1,1],u_ambient:[0,0,0,1],u_specular:[1,1,1,1],u_shininess:50,u_specularFactor:1},A=(Fn(n),Fn(n));function R(e){console.log(" fboOpa ",A),vn(n,null),On(n.canvas),n.viewport(0,0,n.canvas.width,n.canvas.height),n.enable(n.DEPTH_TEST),n.enable(n.BLEND),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA);const t=30*Math.PI/180,a=n.canvas.clientWidth/n.canvas.clientHeight,o=r.perspective(t,a,.1,100),s=ci,c=r.lookAt(s,[0,0,0],[0,1,0]),u=r.inverse(c);T.u_viewProjection=r.multiply(o,u),console.log(" uniforms ",T),T.u_viewInverse=c,n.useProgram(i.program),dn(n,i,E),En(i,T),n.depthMask(!1),pn(n,E,n.TRIANGLES,E.numElements,0,3),n.depthMask(!0)}window.spector.startCapture(t,1e3),R(),R()};const li=_,Ei=li.normalize(li.create(1,1,1));let mi=li.create(5*Ei[0],5*Ei[1],5*Ei[2]);console.log(mi);var _i=function(){const t=Ln(document.getElementById("webgl"),{alpha:!1}),n=t.getExtension("ANGLE_instanced_arrays"),a=v;if(Mn(t),null!==n&&(t.drawArraysInstanced=n?.drawArraysInstancedANGLE),!t.drawArraysInstanced||!t.createVertexArray)return void alert("need drawArraysInstanced and createVertexArray");const r=Rn(t,[e(ii),e(ai)]);function i(e,t){return void 0===t&&(t=e,e=0),e+Math.random()*(t-e)}const o=new Float32Array(48);for(let e=0;e<3;++e){const t=new Float32Array(o.buffer,64*e,16);a.translation([i(-1,1),i(-1,1),i(-1,1)],t)}const s=ke.createPlaneVertices();Object.assign(s,{instanceWorld:{numComponents:16,data:o,divisor:1},instanceColor:{numComponents:4,data:[1,0,0,.5,0,1,0,.5,0,0,1,.5],divisor:1}}),console.log(" ---- vert ",s);const c={u_lightWorldPos:[1,8,-30],u_lightColor:[1,1,1,1],u_ambient:[0,0,0,1],u_specular:[1,1,1,1],u_shininess:50,u_specularFactor:1};!function(e){On(t.canvas),t.viewport(0,0,t.canvas.width,t.canvas.height),t.enable(t.DEPTH_TEST),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT);const n=30*Math.PI/180,i=t.canvas.clientWidth/t.canvas.clientHeight,o=a.perspective(n,i,.1,100),s=mi,u=a.lookAt(s,[0,0,0],[0,1,0]),l=a.inverse(u);c.u_viewProjection=a.multiply(o,l),c.u_viewInverse=u,t.useProgram(r.program),dn(t,r,vertexArrayInfo),En(r,c),pn(t,vertexArrayInfo,t.TRIANGLES,vertexArrayInfo.numelements,0,3)}()};const di=_,Ti=di.normalize(di.create(1,1,1));let Ai=di.create(5*Ti[0],5*Ti[1],5*Ti[2]);console.log(Ai);var Ri=function(){const t=document.getElementById("webgl"),n=Ln(t,{alpha:!1}),a=n.getExtension("ANGLE_instanced_arrays"),r=v;if(Mn(n),null!==a&&(n.drawArraysInstanced=a?.drawArraysInstancedANGLE),!n.drawArraysInstanced||!n.createVertexArray)return void alert("need drawArraysInstanced and createVertexArray");const i=Rn(n,[e(ii),e(ai)]);function o(e,t){return void 0===t&&(t=e,e=0),e+Math.random()*(t-e)}const s=new Float32Array(48);for(let e=0;e<3;++e){const t=new Float32Array(s.buffer,64*e,16);r.translation([o(-1,1),o(-1,1),o(-1,1)],t)}const c=ke.createCubeVertices();Object.assign(c,{instanceWorld:{numComponents:16,data:s,divisor:1},instanceColor:{numComponents:4,data:[1,0,0,.3,0,1,0,.3,0,0,1,.3],divisor:1}}),console.log(" ---- vert ",c);const u=k(n,c),l={u_lightWorldPos:[1,8,-30],u_lightColor:[1,1,1,1],u_ambient:[0,0,0,1],u_specular:[1,1,1,1],u_shininess:50,u_specularFactor:1};function E(e){On(n.canvas),n.viewport(0,0,n.canvas.width,n.canvas.height),n.enable(n.BLEND),n.depthMask(!1),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA),n.clear(n.COLOR_BUFFER_BIT);const t=30*Math.PI/180,a=n.canvas.clientWidth/n.canvas.clientHeight,o=r.perspective(t,a,.1,100),s=Ai,c=r.lookAt(s,[0,0,0],[0,1,0]),E=r.inverse(c);l.u_viewProjection=r.multiply(o,E),l.u_viewInverse=c,n.useProgram(i.program),dn(n,i,u),En(i,l),pn(n,u,n.TRIANGLES,u.numelements,0,3)}E(),function(e,t,n=(e=>{})){let a,r,i=!1,o=-90,s=-45;const c=e=>{if(i){const t=.5,{offsetX:i,offsetY:c}=e,u=i-a,l=c-r;a=i,r=c;o+=u*t,s+=l*t,s>89&&(s=89),s<-89&&(s=-89);const E=Math.cos(Un(o))*Math.cos(Un(s))*5,m=5*Math.sin(Un(s)),_=Math.sin(Un(o))*Math.cos(Un(s))*5,d=di.create(E,m,_);Ai=d,n(Ai)}},u=e=>{i=!1,document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u)},l=e=>{i=!0;const{offsetX:t,offsetY:n}=e;a=t,r=n,document.addEventListener("mousemove",c),document.addEventListener("mouseup",u)};document.addEventListener("mousedown",l)}(0,0,(()=>{E()}))};const pi=v,hi=_,fi=hi.normalize(hi.create(1,1,1));let Ci=hi.create(5*fi[0],5*fi[1],5*fi[2]);console.log(Ci);var Fi=function(){const t=document.getElementById("webgl"),n=t.getContext("webgl"),a=n.getExtension("ANGLE_instanced_arrays");Mn(n),null!==a&&(n.drawArraysInstanced=a?.drawArraysInstancedANGLE);const r=n.getExtension("WEBGL_draw_buffers");if(console.log(" --- drawBuffers",r),null!==r&&(n.drawBuffers=r.drawBuffersWEBGL),!n.drawArraysInstanced||!n.createVertexArray)return void alert("need drawArraysInstanced and createVertexArray");const i=Rn(n,[e("#define GLSLIFY 1\nattribute vec4 position;\nattribute vec2 texcoord;\n\nuniform mat4 u_MvpMatrix;\n\nvarying vec2 v_Texcoord;\n\nvoid main() {\n  gl_Position = u_MvpMatrix * position;\n  v_Texcoord = texcoord;\n}\n"),e("#extension GL_EXT_draw_buffers : enable\nprecision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture0;\nvarying vec2 v_Texcoord;\n\nvoid main() {\n  vec4 color = texture2D(texture0, v_Texcoord);\n  gl_FragData[0] = color;\n  gl_FragData[1] = vec4(color.x, 0.0, 0.0, color.a);\n  gl_FragData[2] = vec4(0.0, color.y, 0.0, color.a);\n  gl_FragData[3] = vec4(0.0, 0.0, color.z, color.a);\n}\n")]),o=Rn(n,[e("#define GLSLIFY 1\nattribute vec4 position;\nattribute vec2 uv;\n\nvarying vec2 v_UV;\nvoid main() {\n  gl_Position = position;\n  v_UV = uv;\n}\n"),e("precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D tex0;\nuniform sampler2D tex1;\nuniform sampler2D tex2;\nuniform sampler2D tex3;\n\nvarying vec2 v_UV;\nvoid main() {\n  // gl_FragColor = v_Color;\n\n  // vec3 cc = normalize(gl_FragCoord);\n  vec2 v_Texcoord = v_UV;\n  vec4 color = texture2D(tex0, v_Texcoord);\n  if(v_Texcoord.x<0.5 && v_Texcoord.y<0.5){\n    color = texture2D(tex1, v_Texcoord);\n  }\n  if(v_Texcoord.x>0.5 && v_Texcoord.y>0.5){\n    color = texture2D(tex2, v_Texcoord);\n  }\n  if(v_Texcoord.x>0.5 && v_Texcoord.y<0.5){\n    color = texture2D(tex3, v_Texcoord);\n  }\n  // gl_FragColor = gl_FragCoord;\n  gl_FragColor = color;\n  // gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\n}\n")]);console.log(" MRT ",i),console.log(" draw ",o);const s=ke.createPlaneVertices();console.log("plane vertics ",s);const c=new hr(30,.01,100,1).getVal(),u=new fr({eye:[1,1,0],target:[0,0,0],cameraUp:[0,1,0]},t);u.enableMove((()=>{})),u.setFrustum(c);const l=u.calcPV(),E=pi.identity(),m={u_MvpMatrix:pi.multiply(l,E)};Object.assign(s,{color:{data:[1,0,0],numComponents:3,divisor:1}});const _=k(n,s),d=k(n,{position:{data:[.25,1,.25,.25,1,.25,.25,1,1,.25,1,1],size:2},uv:{data:[0,1,0,0,1,0,0,1,1,0,1,1],size:2}}),{RGBA:T,UNSIGNED_BYTE:A,LINEAR:R,NEAREST:p,DEPTH_STENCIL:h,CLAMP_TO_EDGE:f}=n,C=[{format:n.RGBA,type:A,min:p,wrap:n.CLAMP_TO_EDGE},{format:T,type:A,min:p,wrap:f},{format:T,type:A,min:p,wrap:f},{format:T,type:A,min:p,wrap:f},{format:h}],F=Fn(n,C);n.drawBuffers([n.COLOR_ATTACHMENT0,n.COLOR_ATTACHMENT1,n.COLOR_ATTACHMENT2,n.COLOR_ATTACHMENT3]),n.clearColor(0,0,0,1),n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,F.attachments[0]),n.activeTexture(n.TEXTURE2),n.bindTexture(n.TEXTURE_2D,F.attachments[1]),n.activeTexture(n.TEXTURE3),n.bindTexture(n.TEXTURE_2D,F.attachments[2]),n.activeTexture(n.TEXTURE4),n.bindTexture(n.TEXTURE_2D,F.attachments[3]),m.tex0=F.attachments[0],m.tex1=F.attachments[1],m.tex2=F.attachments[2],m.tex3=F.attachments[3];const v=()=>{vn(n,F),On(t),console.log(" fbi ",F),n.useProgram(i.program),dn(n,i,_),En(i,m),n.clear(n.COLOR_BUFFER_BIT),pn(n,_,n.TRIANGLES,_.numElements,void 0,1),vn(n,null),On(t),n.useProgram(o.program),dn(n,o,d),En(o,m),n.clear(n.COLOR_BUFFER_BIT),pn(n,d,n.TRIANGLES,d.numElements,void 0,1)};window.spector.startCapture(t,1e3),gt(n,{face:{src:"https://th.bing.com/th/id/OIP.Russj_ScHRzeGEodKscxEgHaEo?pid=ImgDet&rs=1",flipY:1,min:n.NEAREST,mag:n.NEAREST,wrapS:n.CLAMP_TO_EDGE,wrapT:n.CLAMP_TO_EDGE}},((e,t)=>{console.log(" data ",t);const n=t.face;m.texture0=n,v(),u.enableMove((()=>{const e=u.calcPV(pi.identity());m.u_MvpMatrix=e,v()}))}))};const vi=v,Si=_;var Ni,Ii=function(){const t=document.getElementById("webgl"),n=t.getContext("webgl2");n.clearColor(0,0,0,1),n.enable(n.BLEND),n.depthMask(!1),n.getExtension("EXT_color_buffer_float")||(console.error("FLOAT color buffer not available"),document.body.innerHTML="This example requires EXT_color_buffer_float which is unavailable on this system.");const a=e=>{const t=e%3;return 0===t?[1,0,0]:1===t?[0,1,0]:2===t?[0,0,1]:[1,0,0]};for(var r=new Array(1),i=new Float32Array(4),o=new Float32Array(16),s=0;s<1;++s){var c=2*Math.PI*(s%1)/1,u=.6*Math.sin(c),l=Math.floor(s/1)/(1/4)-.75,E=.6*Math.cos(c);r[s]={scale:[.8,.8,.8],rotate:[0,0,0],translate:[u,l,E],modelMatrix:vi.identity()};const e=a(s);i.set([...e,.5],4*s)}console.log(" spheres ",r);var m=Rn(n,[e("#version 300 es\n#define GLSLIFY 1\n\nlayout(std140, column_major) uniform;\n\nlayout(location = 0) in vec4 position;\nlayout(location = 1) in vec2 uv;\nlayout(location = 2) in vec3 normal;\nlayout(location = 3) in vec4 color;\nlayout(location = 4) in mat4 modelMatrix;\n\nuniform SceneUniforms {\n  mat4 uViewProj;\n  vec4 uEyePosition;\n  vec4 uLightPosition;\n};\n\nout vec3 vPosition;\nout vec2 vUV;\nout vec3 vNormal;\nflat out vec4 vColor;\n\nvoid main() {\n  vec4 worldPosition = modelMatrix * position;\n  vPosition = worldPosition.xyz;\n  vUV = uv;\n  vNormal = mat3(modelMatrix) * normal;\n  vColor = color;\n  gl_Position = uViewProj * worldPosition;\n}\n"),e("#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\nlayout(std140, column_major) uniform;\n\nuniform SceneUniforms {\n  mat4 uViewProj;\n  vec4 uEyePosition;\n  vec4 uLightPosition;\n};\n\nuniform sampler2D uTexture;\n\nin vec3 vPosition;\nin vec2 vUV;\nin vec3 vNormal;\nflat in vec4 vColor;\n\nlayout(location = 0) out vec4 accumColor;\nlayout(location = 1) out float accumAlpha;\n\nfloat weight(float z, float a) {\n  // 权重函数 frag 的深度和 frag 的透明度 计算出一个中间值  可能是深度越深 透明度作用越小 深度越前 透明的作用越大\n  // 返回一个 0.01~3000 直接的值\n  return clamp(pow(min(1.0, a * 10.0) + 0.01, 3.0) * 1e8 * pow(1.0 - z * 0.9, 3.0), 1e-2, 3e3);\n}\n\nvoid main() {\n  vec3 position = vPosition.xyz;\n  vec3 normal = normalize(vNormal.xyz);\n  vec2 uv = vUV;\n\n  vec4 baseColor = vColor * texture(uTexture, uv);\n  vec3 eyeDirection = normalize(uEyePosition.xyz - position);\n  vec3 lightVec = uLightPosition.xyz - position;\n  vec3 lightDirection = normalize(lightVec);\n  vec3 reflectionDirection = reflect(-lightDirection, normal);\n  float nDotL = max(dot(lightDirection, normal), 0.0);\n  float diffuse = nDotL;\n  float ambient = 0.2;\n  float specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 20.0);\n\n  vec4 color = vec4((ambient + diffuse + specular) * baseColor.rgb, vColor.a);\n  color.rgb *= color.a;\n  float w = weight(gl_FragCoord.z, color.a); // 权重函数 根据场景不同做适当调整\n  // gl.blendFuncSeparate(gl.ONE, gl.ONE, gl.ZERO, gl.ONE_MINUS_SRC_ALPHA)\n  // blendFuncSeparate(srcRGB, dstRGB, srcAlpha, dstAlpha)\n  // color(RGB) = (sourceColor * srcRGB) + (destinationColor * dstRGB)\n  // color(A) = (sourceAlpha * srcAlpha) + (destinationAlpha * dstAlpha)\n  accumColor = vec4(color.rgb * w, color.a); // 颜色累加\n  accumAlpha = color.a * w;  // 透明度累加  blend\n}\n")]).program,_=Rn(n,[e("#version 300 es\n#define GLSLIFY 1\n\nlayout(location = 0) in vec4 aPosition;\n\nvoid main() {\n  gl_Position = aPosition;\n}\n"),e("#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D uAccumulate;\nuniform sampler2D uAccumulateAlpha;\nout vec4 fragColor;\nvoid main() {\n  ivec2 fragCoord = ivec2(gl_FragCoord.xy);\n  vec4 accum = texelFetch(uAccumulate, fragCoord, 0);\n  float a = 1.0 - accum.a;\n  accum.a = texelFetch(uAccumulateAlpha, fragCoord, 0).r;\n  fragColor = vec4(a * accum.rgb / clamp(accum.a, 0.001, 50000.0), a);\n}\n")]).program,d=n.getUniformBlockIndex(m,"SceneUniforms");n.uniformBlockBinding(m,d,0),n.getUniformLocation(m,"uModel");var T=n.getUniformLocation(m,"uTexture"),A=n.getUniformLocation(_,"uAccumulate"),R=n.getUniformLocation(_,"uAccumulateAlpha");window.spector.startCapture(t,1e3);var p=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,p);var h=n.createTexture();n.bindTexture(n.TEXTURE_2D,h),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texStorage2D(n.TEXTURE_2D,1,n.RGBA16F,n.drawingBufferWidth,n.drawingBufferHeight),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,h,0);var f=n.createTexture();n.bindTexture(n.TEXTURE_2D,f),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texStorage2D(n.TEXTURE_2D,1,n.R16F,n.drawingBufferWidth,n.drawingBufferHeight),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT1,n.TEXTURE_2D,f,0);var C=n.createTexture();n.bindTexture(n.TEXTURE_2D,C),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texStorage2D(n.TEXTURE_2D,1,n.DEPTH_COMPONENT16,n.drawingBufferWidth,n.drawingBufferHeight),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,C,0),n.drawBuffers([n.COLOR_ATTACHMENT0,n.COLOR_ATTACHMENT1]),n.bindFramebuffer(n.FRAMEBUFFER,null);var F=Fr({radius:.5});console.log(" geometry ",F),F.position.length;var v=n.createVertexArray();n.bindVertexArray(v);var S=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,S),n.bufferData(n.ARRAY_BUFFER,F.position,n.STATIC_DRAW),n.vertexAttribPointer(0,3,n.FLOAT,!1,0,0),n.enableVertexAttribArray(0);var N=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,N),n.bufferData(n.ARRAY_BUFFER,F.texcoord,n.STATIC_DRAW),n.vertexAttribPointer(1,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(1);var I=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,I),n.bufferData(n.ARRAY_BUFFER,F.normal,n.STATIC_DRAW),n.vertexAttribPointer(2,3,n.FLOAT,!1,0,0),n.enableVertexAttribArray(2);var g=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,g),n.bufferData(n.ARRAY_BUFFER,i,n.STATIC_DRAW),n.vertexAttribPointer(3,4,n.FLOAT,!1,0,0),n.vertexAttribDivisor(3,1),n.enableVertexAttribArray(3);var B=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,B),n.bufferData(n.ARRAY_BUFFER,o,n.DYNAMIC_DRAW),n.vertexAttribPointer(4,4,n.FLOAT,!1,64,0),n.vertexAttribPointer(5,4,n.FLOAT,!1,64,16),n.vertexAttribPointer(6,4,n.FLOAT,!1,64,32),n.vertexAttribPointer(7,4,n.FLOAT,!1,64,48),n.vertexAttribDivisor(4,1),n.vertexAttribDivisor(5,1),n.vertexAttribDivisor(6,1),n.vertexAttribDivisor(7,1),n.enableVertexAttribArray(4),n.enableVertexAttribArray(5),n.enableVertexAttribArray(6),n.enableVertexAttribArray(7);var M=n.createBuffer();n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,M),n.bufferData(n.ELEMENT_ARRAY_BUFFER,F.indices,n.STATIC_DRAW);var L=n.createVertexArray();n.bindVertexArray(L);var O=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,O),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,1,-1,-1,1,-1,-1,1,1,-1,1,1]),n.STATIC_DRAW),n.vertexAttribPointer(0,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(0);const U=vi.perspective(Math.PI/2,t.width/t.height,.1,10);var x=Si.create(0,.8,2);const P=vi.lookAt(x,Si.create(0,0,0),Si.create(0,1,0)),b=vi.inverse(P),D=vi.multiply(U,b);var y=Si.create(1,1,2),G=new Float32Array(24);G.set(D),G.set(x,16),G.set(y,20);var w=n.createBuffer();n.bindBufferBase(n.UNIFORM_BUFFER,0,w),n.bufferData(n.UNIFORM_BUFFER,G,n.STATIC_DRAW);var X=new Image;X.onload=function(){var e=n.createTexture();n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,e),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.REPEAT);var t=t=Math.floor(Math.log2(Math.max(this.width,this.height)))+1;n.texStorage2D(n.TEXTURE_2D,t,n.RGBA8,X.width,X.height),n.texSubImage2D(n.TEXTURE_2D,0,0,0,X.width,X.height,n.RGBA,n.UNSIGNED_BYTE,X),n.generateMipmap(n.TEXTURE_2D),n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,h),n.activeTexture(n.TEXTURE2),n.bindTexture(n.TEXTURE_2D,f),n.useProgram(m),n.uniform1i(T,0),n.useProgram(_),n.uniform1i(A,1),n.uniform1i(R,2);var a=vi.identity();!function(){n.bindFramebuffer(n.FRAMEBUFFER,p),n.useProgram(m),n.bindVertexArray(v);for(var e=0,t=r.length;e<t;++e)r[e].rotate[1]+=.002,Cr(r[e].modelMatrix,r[e].translate,void 0,r[e].scale),vi.rotateY(a,r[e].rotate[1],a),vi.multiply(a,r[e].modelMatrix,r[e].modelMatrix),o.set(r[e].modelMatrix,16*e);n.bindBuffer(n.ARRAY_BUFFER,B),n.bufferSubData(n.ARRAY_BUFFER,0,o),n.blendFuncSeparate(n.ONE,n.ONE,n.ZERO,n.ONE_MINUS_SRC_ALPHA),n.clear(n.COLOR_BUFFER_BIT),n.drawElementsInstanced(n.TRIANGLES,F.indices.length,n.UNSIGNED_SHORT,0,r.length),n.bindFramebuffer(n.FRAMEBUFFER,null),n.useProgram(_),n.bindVertexArray(L),n.clear(n.COLOR_BUFFER_BIT),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),n.drawArrays(n.TRIANGLES,0,6)}()},X.src="./resources/khronos_webgl.png"};Ni="\n        #version 300 es\nprecision highp float;\nprecision highp sampler2D;\n#define GLSLIFY 1\n\n\n        #define MAX_DEPTH 99999.0\n\nlayout(std140, column_major) uniform;\n\nuniform SceneUniforms {\n  mat4 uViewProj;\n  vec4 uEyePosition;\n  vec4 uLightPosition;\n};\n\nuniform sampler2D uTexture;\nuniform sampler2D uDepth;\nuniform sampler2D uFrontColor;\n\nin vec3 vPosition;\nin vec2 vUV;\nin vec3 vNormal;\nflat in vec4 vColor;\n\n// 2组\n// allFBO   COLOR_ATTACHMENT0 COLOR_ATTACHMENT1 COLOR_ATTACHMENT2\n// colorFBO                   COLOR_ATTACHMENT0 COLOR_ATTACHMENT1\n\nlayout(location = 0) out vec4 depth; // (-9999.0, -9999.0)   allFBO.COLOR_ATTACHMENT0 RG32F, R - negative front depth, G - back depth\nlayout(location = 1) out vec4 frontColor; // (0,0,0,0)       allFBO.COLOR_ATTACHMENT1 colorFBO.COLOR_ATTACHMENT0\nlayout(location = 2) out vec4 backColor; //   (0,0,0,0)      allFBO.COLOR_ATTACHMENT2 colorFBO.COLOR_ATTACHMENT1\n\nvoid main() {\n\n            // -------------------------\n            // dual depth peeling\n            // -------------------------\n  // z 从 NDC坐标（-1,1）转换成窗口坐标范围  (0,1)\n  // current frag depth\n  float fragDepth = gl_FragCoord.z;   // 0 - 1\n  ivec2 fragCoord = ivec2(gl_FragCoord.xy);\n\n  // fetch from current background     first uDepth (-0,1)  first uFrontColor (0,0,0,0)\n  vec2 lastDepth = texelFetch(uDepth, fragCoord, 0).rg;\n  vec4 lastFrontColor = texelFetch(uFrontColor, fragCoord, 0);\n\n            // depth value always increases\n            // so we can use MAX blender equation\n  depth.rg = vec2(-MAX_DEPTH);\n\n            // front color always increases\n            // so we can use MAX blender equation\n  frontColor = lastFrontColor;\n\n            // back color is separatly blend afterwards each pass\n  backColor = vec4(0.0);\n\n  float nearestDepth = -lastDepth.x;\n  float furthestDepth = lastDepth.y;\n  float alphaMultiplier = 1.0 - lastFrontColor.a; // alpha 乘数    resColor = Csrc * Ca + Cdes * (1-Ca)\n\n  if(fragDepth < nearestDepth || fragDepth > furthestDepth) {\n                // Skip this depth since it's been peeled.\n    return;\n  }\n\n  if(fragDepth > nearestDepth && fragDepth < furthestDepth) {\n                // This needs to be peeled.\n                // the one remains after MAX blended for all need-to-peel will be peeled next pass\n                // 获取剥离的层信息 比如 4个重合的点  depth 分别是 0 0.2 0.4 0.9 根据 MAX blend 最后使用的是 -0.9~0.9\n    depth.rg = vec2(-fragDepth, fragDepth); // 实际上打印出来就是  (-0.1,0.1) 的效果 绿色 -0.1 = 0\n    return;\n  }\n\n// 进入这个里面 说明 当前的 fragDepth 符合要求\n// fragDepth == nearestDepth fragDepth == furthestDepth   最近的或者最远的\n// return;\n  // 相交\n            // If it reaches here, it is the layer we need to render for this pass\n\n            // -------------------------\n\n  vec3 position = vPosition.xyz;\n  vec3 normal = normalize(vNormal.xyz);\n  vec2 uv = vUV;\n\n  // vec4 baseColor = vColor * texture(uTexture, uv);\n  vec4 baseColor = vColor;\n  vec3 eyeDirection = normalize(uEyePosition.xyz - position);\n  vec3 lightVec = uLightPosition.xyz - position;\n  vec3 lightDirection = normalize(lightVec);\n  vec3 reflectionDirection = reflect(-lightDirection, normal);\n  float nDotL = max(dot(lightDirection, normal), 0.0);\n  float diffuse = nDotL;\n  float ambient = 0.2;\n  float specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 20.0);\n\n  // 球原本颜色 + 球纹理 + 旁氏光照\n  vec4 color = vec4((ambient + diffuse + specular) * baseColor.rgb, vColor.a);\n\n            // dual depth peeling\n            // write to back and front color buffer\n\n  if(fragDepth == nearestDepth) {\n    frontColor.rgb += color.rgb * color.a * alphaMultiplier;\n    frontColor.a = 1.0 - alphaMultiplier * (1.0 - color.a);\n  } else {\n    backColor += color;\n  }\n}\n";var gi;gi="\n        #version 300 es\n#define GLSLIFY 1\n\nlayout(std140, column_major) uniform;\n\nlayout(location = 0) in vec4 position;\nlayout(location = 1) in vec2 uv;\nlayout(location = 2) in vec3 normal;\nlayout(location = 3) in vec4 color;\nlayout(location = 4) in mat4 modelMatrix;\n\nuniform SceneUniforms {\n  mat4 uViewProj;\n  vec4 uEyePosition;\n  vec4 uLightPosition;\n};\n\nout vec3 vPosition;\nout vec2 vUV;\nout vec3 vNormal;\nflat out vec4 vColor;\n\nvoid main() {\n  vec4 worldPosition = modelMatrix * position;\n  vPosition = worldPosition.xyz;\n  vUV = uv;\n  vNormal = mat3(modelMatrix) * normal;\n  vColor = color;\n  gl_Position = uViewProj * worldPosition;\n}\n";var Bi;Bi="\n        #version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D uFrontColor;\nuniform sampler2D uBackColor;\n\nout vec4 fragColor;\nvoid main() {\n  ivec2 fragCoord = ivec2(gl_FragCoord.xy);\n  vec4 frontColor = texelFetch(uFrontColor, fragCoord, 0);\n  vec4 backColor = texelFetch(uBackColor, fragCoord, 0);\n  float alphaMultiplier = 1.0 - frontColor.a;\n\n  fragColor = vec4(\n    frontColor.rgb + alphaMultiplier * backColor.rgb, \n    frontColor.a + backColor.a);\n}\n";var Mi;Mi="\n        #version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D uBackColor;\n\nout vec4 fragColor; // COLOR_ATTACHMENT0  frameBuffer id=4\nvoid main() {\n  fragColor = texelFetch(uBackColor, ivec2(gl_FragCoord.xy), 0);\n  if(fragColor.a == 0.0) {\n    discard;\n  }\n}\n";var Li;Li="\n        #version 300 es\n#define GLSLIFY 1\n\nlayout(location = 0) in vec4 aPosition;\n\nvoid main() {\n  gl_Position = aPosition;\n}\n";class Oi{static isWebGlConstant(e){return null!==xi[e]&&void 0!==xi[e]}static stringifyWebGlConstant(e,t){if(0===e){const e=this.zeroMeaningByCommand[t];return e||"0"}if(1===e){const e=this.oneMeaningByCommand[t];return e||"1"}const n=xi[e];return n?n.name:e+""}}Oi.DEPTH_BUFFER_BIT={name:"DEPTH_BUFFER_BIT",value:256,description:"Passed to clear to clear the current depth buffer."},Oi.STENCIL_BUFFER_BIT={name:"STENCIL_BUFFER_BIT",value:1024,description:"Passed to clear to clear the current stencil buffer."},Oi.COLOR_BUFFER_BIT={name:"COLOR_BUFFER_BIT",value:16384,description:"Passed to clear to clear the current color buffer."},Oi.POINTS={name:"POINTS",value:0,description:"Passed to drawElements or drawArrays to draw single points."},Oi.LINES={name:"LINES",value:1,description:"Passed to drawElements or drawArrays to draw lines. Each vertex connects to the one after it."},Oi.LINE_LOOP={name:"LINE_LOOP",value:2,description:"Passed to drawElements or drawArrays to draw lines. Each set of two vertices is treated as a separate line segment."},Oi.LINE_STRIP={name:"LINE_STRIP",value:3,description:"Passed to drawElements or drawArrays to draw a connected group of line segments from the first vertex to the last."},Oi.TRIANGLES={name:"TRIANGLES",value:4,description:"Passed to drawElements or drawArrays to draw triangles. Each set of three vertices creates a separate triangle."},Oi.TRIANGLE_STRIP={name:"TRIANGLE_STRIP",value:5,description:"Passed to drawElements or drawArrays to draw a connected group of triangles."},Oi.TRIANGLE_FAN={name:"TRIANGLE_FAN",value:6,description:"Passed to drawElements or drawArrays to draw a connected group of triangles. Each vertex connects to the previous and the first vertex in the fan."},Oi.ZERO={name:"ZERO",value:0,description:"Passed to blendFunc or blendFuncSeparate to turn off a component."},Oi.ONE={name:"ONE",value:1,description:"Passed to blendFunc or blendFuncSeparate to turn on a component."},Oi.SRC_COLOR={name:"SRC_COLOR",value:768,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by the source elements color."},Oi.ONE_MINUS_SRC_COLOR={name:"ONE_MINUS_SRC_COLOR",value:769,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the source elements color."},Oi.SRC_ALPHA={name:"SRC_ALPHA",value:770,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by the source's alpha."},Oi.ONE_MINUS_SRC_ALPHA={name:"ONE_MINUS_SRC_ALPHA",value:771,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the source's alpha."},Oi.DST_ALPHA={name:"DST_ALPHA",value:772,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by the destination's alpha."},Oi.ONE_MINUS_DST_ALPHA={name:"ONE_MINUS_DST_ALPHA",value:773,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the destination's alpha."},Oi.DST_COLOR={name:"DST_COLOR",value:774,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by the destination's color."},Oi.ONE_MINUS_DST_COLOR={name:"ONE_MINUS_DST_COLOR",value:775,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the destination's color."},Oi.SRC_ALPHA_SATURATE={name:"SRC_ALPHA_SATURATE",value:776,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by the minimum of source's alpha or one minus the destination's alpha."},Oi.CONSTANT_COLOR={name:"CONSTANT_COLOR",value:32769,description:"Passed to blendFunc or blendFuncSeparate to specify a constant color blend function."},Oi.ONE_MINUS_CONSTANT_COLOR={name:"ONE_MINUS_CONSTANT_COLOR",value:32770,description:"Passed to blendFunc or blendFuncSeparate to specify one minus a constant color blend function."},Oi.CONSTANT_ALPHA={name:"CONSTANT_ALPHA",value:32771,description:"Passed to blendFunc or blendFuncSeparate to specify a constant alpha blend function."},Oi.ONE_MINUS_CONSTANT_ALPHA={name:"ONE_MINUS_CONSTANT_ALPHA",value:32772,description:"Passed to blendFunc or blendFuncSeparate to specify one minus a constant alpha blend function."},Oi.FUNC_ADD={name:"FUNC_ADD",value:32774,description:"Passed to blendEquation or blendEquationSeparate to set an addition blend function."},Oi.FUNC_SUBSTRACT={name:"FUNC_SUBSTRACT",value:32778,description:"Passed to blendEquation or blendEquationSeparate to specify a subtraction blend function (source - destination)."},Oi.FUNC_REVERSE_SUBTRACT={name:"FUNC_REVERSE_SUBTRACT",value:32779,description:"Passed to blendEquation or blendEquationSeparate to specify a reverse subtraction blend function (destination - source)."},Oi.BLEND_EQUATION={name:"BLEND_EQUATION",value:32777,description:"Passed to getParameter to get the current RGB blend function."},Oi.BLEND_EQUATION_RGB={name:"BLEND_EQUATION_RGB",value:32777,description:"Passed to getParameter to get the current RGB blend function. Same as BLEND_EQUATION"},Oi.BLEND_EQUATION_ALPHA={name:"BLEND_EQUATION_ALPHA",value:34877,description:"Passed to getParameter to get the current alpha blend function. Same as BLEND_EQUATION"},Oi.BLEND_DST_RGB={name:"BLEND_DST_RGB",value:32968,description:"Passed to getParameter to get the current destination RGB blend function."},Oi.BLEND_SRC_RGB={name:"BLEND_SRC_RGB",value:32969,description:"Passed to getParameter to get the current destination RGB blend function."},Oi.BLEND_DST_ALPHA={name:"BLEND_DST_ALPHA",value:32970,description:"Passed to getParameter to get the current destination alpha blend function."},Oi.BLEND_SRC_ALPHA={name:"BLEND_SRC_ALPHA",value:32971,description:"Passed to getParameter to get the current source alpha blend function."},Oi.BLEND_COLOR={name:"BLEND_COLOR",value:32773,description:"Passed to getParameter to return a the current blend color."},Oi.ARRAY_BUFFER_BINDING={name:"ARRAY_BUFFER_BINDING",value:34964,description:"Passed to getParameter to get the array buffer binding."},Oi.ELEMENT_ARRAY_BUFFER_BINDING={name:"ELEMENT_ARRAY_BUFFER_BINDING",value:34965,description:"Passed to getParameter to get the current element array buffer."},Oi.LINE_WIDTH={name:"LINE_WIDTH",value:2849,description:"Passed to getParameter to get the current lineWidth (set by the lineWidth method)."},Oi.ALIASED_POINT_SIZE_RANGE={name:"ALIASED_POINT_SIZE_RANGE",value:33901,description:"Passed to getParameter to get the current size of a point drawn with gl.POINTS"},Oi.ALIASED_LINE_WIDTH_RANGE={name:"ALIASED_LINE_WIDTH_RANGE",value:33902,description:"Passed to getParameter to get the range of available widths for a line. Returns a length-2 array with the lo value at 0, and hight at 1."},Oi.CULL_FACE_MODE={name:"CULL_FACE_MODE",value:2885,description:"Passed to getParameter to get the current value of cullFace. Should return FRONT, BACK, or FRONT_AND_BACK"},Oi.FRONT_FACE={name:"FRONT_FACE",value:2886,description:"Passed to getParameter to determine the current value of frontFace. Should return CW or CCW."},Oi.DEPTH_RANGE={name:"DEPTH_RANGE",value:2928,description:"Passed to getParameter to return a length-2 array of floats giving the current depth range."},Oi.DEPTH_WRITEMASK={name:"DEPTH_WRITEMASK",value:2930,description:"Passed to getParameter to determine if the depth write mask is enabled."},Oi.DEPTH_CLEAR_VALUE={name:"DEPTH_CLEAR_VALUE",value:2931,description:"Passed to getParameter to determine the current depth clear value."},Oi.DEPTH_FUNC={name:"DEPTH_FUNC",value:2932,description:"Passed to getParameter to get the current depth function. Returns NEVER, ALWAYS, LESS, EQUAL, LEQUAL, GREATER, GEQUAL, or NOTEQUAL."},Oi.STENCIL_CLEAR_VALUE={name:"STENCIL_CLEAR_VALUE",value:2961,description:"Passed to getParameter to get the value the stencil will be cleared to."},Oi.STENCIL_FUNC={name:"STENCIL_FUNC",value:2962,description:"Passed to getParameter to get the current stencil function. Returns NEVER, ALWAYS, LESS, EQUAL, LEQUAL, GREATER, GEQUAL, or NOTEQUAL."},Oi.STENCIL_FAIL={name:"STENCIL_FAIL",value:2964,description:"Passed to getParameter to get the current stencil fail function. Should return KEEP, REPLACE, INCR, DECR, INVERT, INCR_WRAP, or DECR_WRAP."},Oi.STENCIL_PASS_DEPTH_FAIL={name:"STENCIL_PASS_DEPTH_FAIL",value:2965,description:"Passed to getParameter to get the current stencil fail function should the depth buffer test fail. Should return KEEP, REPLACE, INCR, DECR, INVERT, INCR_WRAP, or DECR_WRAP."},Oi.STENCIL_PASS_DEPTH_PASS={name:"STENCIL_PASS_DEPTH_PASS",value:2966,description:"Passed to getParameter to get the current stencil fail function should the depth buffer test pass. Should return KEEP, REPLACE, INCR, DECR, INVERT, INCR_WRAP, or DECR_WRAP."},Oi.STENCIL_REF={name:"STENCIL_REF",value:2967,description:"Passed to getParameter to get the reference value used for stencil tests."},Oi.STENCIL_VALUE_MASK={name:"STENCIL_VALUE_MASK",value:2963,description:" "},Oi.STENCIL_WRITEMASK={name:"STENCIL_WRITEMASK",value:2968,description:" "},Oi.STENCIL_BACK_FUNC={name:"STENCIL_BACK_FUNC",value:34816,description:" "},Oi.STENCIL_BACK_FAIL={name:"STENCIL_BACK_FAIL",value:34817,description:" "},Oi.STENCIL_BACK_PASS_DEPTH_FAIL={name:"STENCIL_BACK_PASS_DEPTH_FAIL",value:34818,description:" "},Oi.STENCIL_BACK_PASS_DEPTH_PASS={name:"STENCIL_BACK_PASS_DEPTH_PASS",value:34819,description:" "},Oi.STENCIL_BACK_REF={name:"STENCIL_BACK_REF",value:36003,description:" "},Oi.STENCIL_BACK_VALUE_MASK={name:"STENCIL_BACK_VALUE_MASK",value:36004,description:" "},Oi.STENCIL_BACK_WRITEMASK={name:"STENCIL_BACK_WRITEMASK",value:36005,description:" "},Oi.VIEWPORT={name:"VIEWPORT",value:2978,description:"Returns an Int32Array with four elements for the current viewport dimensions."},Oi.SCISSOR_BOX={name:"SCISSOR_BOX",value:3088,description:"Returns an Int32Array with four elements for the current scissor box dimensions."},Oi.COLOR_CLEAR_VALUE={name:"COLOR_CLEAR_VALUE",value:3106,description:" "},Oi.COLOR_WRITEMASK={name:"COLOR_WRITEMASK",value:3107,description:" "},Oi.UNPACK_ALIGNMENT={name:"UNPACK_ALIGNMENT",value:3317,description:" "},Oi.PACK_ALIGNMENT={name:"PACK_ALIGNMENT",value:3333,description:" "},Oi.MAX_TEXTURE_SIZE={name:"MAX_TEXTURE_SIZE",value:3379,description:" "},Oi.MAX_VIEWPORT_DIMS={name:"MAX_VIEWPORT_DIMS",value:3386,description:" "},Oi.SUBPIXEL_BITS={name:"SUBPIXEL_BITS",value:3408,description:" "},Oi.RED_BITS={name:"RED_BITS",value:3410,description:" "},Oi.GREEN_BITS={name:"GREEN_BITS",value:3411,description:" "},Oi.BLUE_BITS={name:"BLUE_BITS",value:3412,description:" "},Oi.ALPHA_BITS={name:"ALPHA_BITS",value:3413,description:" "},Oi.DEPTH_BITS={name:"DEPTH_BITS",value:3414,description:" "},Oi.STENCIL_BITS={name:"STENCIL_BITS",value:3415,description:" "},Oi.POLYGON_OFFSET_UNITS={name:"POLYGON_OFFSET_UNITS",value:10752,description:" "},Oi.POLYGON_OFFSET_FACTOR={name:"POLYGON_OFFSET_FACTOR",value:32824,description:" "},Oi.TEXTURE_BINDING_2D={name:"TEXTURE_BINDING_2D",value:32873,description:" "},Oi.SAMPLE_BUFFERS={name:"SAMPLE_BUFFERS",value:32936,description:" "},Oi.SAMPLES={name:"SAMPLES",value:32937,description:" "},Oi.SAMPLE_COVERAGE_VALUE={name:"SAMPLE_COVERAGE_VALUE",value:32938,description:" "},Oi.SAMPLE_COVERAGE_INVERT={name:"SAMPLE_COVERAGE_INVERT",value:32939,description:" "},Oi.COMPRESSED_TEXTURE_FORMATS={name:"COMPRESSED_TEXTURE_FORMATS",value:34467,description:" "},Oi.VENDOR={name:"VENDOR",value:7936,description:" "},Oi.RENDERER={name:"RENDERER",value:7937,description:" "},Oi.VERSION={name:"VERSION",value:7938,description:" "},Oi.IMPLEMENTATION_COLOR_READ_TYPE={name:"IMPLEMENTATION_COLOR_READ_TYPE",value:35738,description:" "},Oi.IMPLEMENTATION_COLOR_READ_FORMAT={name:"IMPLEMENTATION_COLOR_READ_FORMAT",value:35739,description:" "},Oi.BROWSER_DEFAULT_WEBGL={name:"BROWSER_DEFAULT_WEBGL",value:37444,description:" "},Oi.STATIC_DRAW={name:"STATIC_DRAW",value:35044,description:"Passed to bufferData as a hint about whether the contents of the buffer are likely to be used often and not change often."},Oi.STREAM_DRAW={name:"STREAM_DRAW",value:35040,description:"Passed to bufferData as a hint about whether the contents of the buffer are likely to not be used often."},Oi.DYNAMIC_DRAW={name:"DYNAMIC_DRAW",value:35048,description:"Passed to bufferData as a hint about whether the contents of the buffer are likely to be used often and change often."},Oi.ARRAY_BUFFER={name:"ARRAY_BUFFER",value:34962,description:"Passed to bindBuffer or bufferData to specify the type of buffer being used."},Oi.ELEMENT_ARRAY_BUFFER={name:"ELEMENT_ARRAY_BUFFER",value:34963,description:"Passed to bindBuffer or bufferData to specify the type of buffer being used."},Oi.BUFFER_SIZE={name:"BUFFER_SIZE",value:34660,description:"Passed to getBufferParameter to get a buffer's size."},Oi.BUFFER_USAGE={name:"BUFFER_USAGE",value:34661,description:"Passed to getBufferParameter to get the hint for the buffer passed in when it was created."},Oi.CURRENT_VERTEX_ATTRIB={name:"CURRENT_VERTEX_ATTRIB",value:34342,description:"Passed to getVertexAttrib to read back the current vertex attribute."},Oi.VERTEX_ATTRIB_ARRAY_ENABLED={name:"VERTEX_ATTRIB_ARRAY_ENABLED",value:34338,description:" "},Oi.VERTEX_ATTRIB_ARRAY_SIZE={name:"VERTEX_ATTRIB_ARRAY_SIZE",value:34339,description:" "},Oi.VERTEX_ATTRIB_ARRAY_STRIDE={name:"VERTEX_ATTRIB_ARRAY_STRIDE",value:34340,description:" "},Oi.VERTEX_ATTRIB_ARRAY_TYPE={name:"VERTEX_ATTRIB_ARRAY_TYPE",value:34341,description:" "},Oi.VERTEX_ATTRIB_ARRAY_NORMALIZED={name:"VERTEX_ATTRIB_ARRAY_NORMALIZED",value:34922,description:" "},Oi.VERTEX_ATTRIB_ARRAY_POINTER={name:"VERTEX_ATTRIB_ARRAY_POINTER",value:34373,description:" "},Oi.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING={name:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",value:34975,description:" "},Oi.CULL_FACE={name:"CULL_FACE",value:2884,description:"Passed to enable/disable to turn on/off culling. Can also be used with getParameter to find the current culling method."},Oi.FRONT={name:"FRONT",value:1028,description:"Passed to cullFace to specify that only front faces should be drawn."},Oi.BACK={name:"BACK",value:1029,description:"Passed to cullFace to specify that only back faces should be drawn."},Oi.FRONT_AND_BACK={name:"FRONT_AND_BACK",value:1032,description:"Passed to cullFace to specify that front and back faces should be drawn."},Oi.BLEND={name:"BLEND",value:3042,description:"Passed to enable/disable to turn on/off blending. Can also be used with getParameter to find the current blending method."},Oi.DEPTH_TEST={name:"DEPTH_TEST",value:2929,description:"Passed to enable/disable to turn on/off the depth test. Can also be used with getParameter to query the depth test."},Oi.DITHER={name:"DITHER",value:3024,description:"Passed to enable/disable to turn on/off dithering. Can also be used with getParameter to find the current dithering method."},Oi.POLYGON_OFFSET_FILL={name:"POLYGON_OFFSET_FILL",value:32823,description:"Passed to enable/disable to turn on/off the polygon offset. Useful for rendering hidden-line images, decals, and or solids with highlighted edges. Can also be used with getParameter to query the scissor test."},Oi.SAMPLE_ALPHA_TO_COVERAGE={name:"SAMPLE_ALPHA_TO_COVERAGE",value:32926,description:"Passed to enable/disable to turn on/off the alpha to coverage. Used in multi-sampling alpha channels."},Oi.SAMPLE_COVERAGE={name:"SAMPLE_COVERAGE",value:32928,description:"Passed to enable/disable to turn on/off the sample coverage. Used in multi-sampling."},Oi.SCISSOR_TEST={name:"SCISSOR_TEST",value:3089,description:"Passed to enable/disable to turn on/off the scissor test. Can also be used with getParameter to query the scissor test."},Oi.STENCIL_TEST={name:"STENCIL_TEST",value:2960,description:"Passed to enable/disable to turn on/off the stencil test. Can also be used with getParameter to query the stencil test."},Oi.NO_ERROR={name:"NO_ERROR",value:0,description:"Returned from getError."},Oi.INVALID_ENUM={name:"INVALID_ENUM",value:1280,description:"Returned from getError."},Oi.INVALID_VALUE={name:"INVALID_VALUE",value:1281,description:"Returned from getError."},Oi.INVALID_OPERATION={name:"INVALID_OPERATION",value:1282,description:"Returned from getError."},Oi.OUT_OF_MEMORY={name:"OUT_OF_MEMORY",value:1285,description:"Returned from getError."},Oi.CONTEXT_LOST_WEBGL={name:"CONTEXT_LOST_WEBGL",value:37442,description:"Returned from getError."},Oi.CW={name:"CW",value:2304,description:"Passed to frontFace to specify the front face of a polygon is drawn in the clockwise direction"},Oi.CCW={name:"CCW",value:2305,description:"Passed to frontFace to specify the front face of a polygon is drawn in the counter clockwise direction"},Oi.DONT_CARE={name:"DONT_CARE",value:4352,description:"There is no preference for this behavior."},Oi.FASTEST={name:"FASTEST",value:4353,description:"The most efficient behavior should be used."},Oi.NICEST={name:"NICEST",value:4354,description:"The most correct or the highest quality option should be used."},Oi.GENERATE_MIPMAP_HINT={name:"GENERATE_MIPMAP_HINT",value:33170,description:"Hint for the quality of filtering when generating mipmap images with WebGLRenderingContext.generateMipmap()."},Oi.BYTE={name:"BYTE",value:5120,description:" "},Oi.UNSIGNED_BYTE={name:"UNSIGNED_BYTE",value:5121,description:" "},Oi.SHORT={name:"SHORT",value:5122,description:" "},Oi.UNSIGNED_SHORT={name:"UNSIGNED_SHORT",value:5123,description:" "},Oi.INT={name:"INT",value:5124,description:" "},Oi.UNSIGNED_INT={name:"UNSIGNED_INT",value:5125,description:" "},Oi.FLOAT={name:"FLOAT",value:5126,description:" "},Oi.DEPTH_COMPONENT={name:"DEPTH_COMPONENT",value:6402,description:" "},Oi.ALPHA={name:"ALPHA",value:6406,description:" "},Oi.RGB={name:"RGB",value:6407,description:" "},Oi.RGBA={name:"RGBA",value:6408,description:" "},Oi.LUMINANCE={name:"LUMINANCE",value:6409,description:" "},Oi.LUMINANCE_ALPHA={name:"LUMINANCE_ALPHA",value:6410,description:" "},Oi.UNSIGNED_SHORT_4_4_4_4={name:"UNSIGNED_SHORT_4_4_4_4",value:32819,description:" "},Oi.UNSIGNED_SHORT_5_5_5_1={name:"UNSIGNED_SHORT_5_5_5_1",value:32820,description:" "},Oi.UNSIGNED_SHORT_5_6_5={name:"UNSIGNED_SHORT_5_6_5",value:33635,description:" "},Oi.FRAGMENT_SHADER={name:"FRAGMENT_SHADER",value:35632,description:"Passed to createShader to define a fragment shader."},Oi.VERTEX_SHADER={name:"VERTEX_SHADER",value:35633,description:"Passed to createShader to define a vertex shader"},Oi.COMPILE_STATUS={name:"COMPILE_STATUS",value:35713,description:"Passed to getShaderParamter to get the status of the compilation. Returns false if the shader was not compiled. You can then query getShaderInfoLog to find the exact error"},Oi.DELETE_STATUS={name:"DELETE_STATUS",value:35712,description:"Passed to getShaderParamter to determine if a shader was deleted via deleteShader. Returns true if it was, false otherwise."},Oi.LINK_STATUS={name:"LINK_STATUS",value:35714,description:"Passed to getProgramParameter after calling linkProgram to determine if a program was linked correctly. Returns false if there were errors. Use getProgramInfoLog to find the exact error."},Oi.VALIDATE_STATUS={name:"VALIDATE_STATUS",value:35715,description:"Passed to getProgramParameter after calling validateProgram to determine if it is valid. Returns false if errors were found."},Oi.ATTACHED_SHADERS={name:"ATTACHED_SHADERS",value:35717,description:"Passed to getProgramParameter after calling attachShader to determine if the shader was attached correctly. Returns false if errors occurred."},Oi.ACTIVE_ATTRIBUTES={name:"ACTIVE_ATTRIBUTES",value:35721,description:"Passed to getProgramParameter to get the number of attributes active in a program."},Oi.ACTIVE_UNIFORMS={name:"ACTIVE_UNIFORMS",value:35718,description:"Passed to getProgramParamter to get the number of uniforms active in a program."},Oi.MAX_VERTEX_ATTRIBS={name:"MAX_VERTEX_ATTRIBS",value:34921,description:" "},Oi.MAX_VERTEX_UNIFORM_VECTORS={name:"MAX_VERTEX_UNIFORM_VECTORS",value:36347,description:" "},Oi.MAX_VARYING_VECTORS={name:"MAX_VARYING_VECTORS",value:36348,description:" "},Oi.MAX_COMBINED_TEXTURE_IMAGE_UNITS={name:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",value:35661,description:" "},Oi.MAX_VERTEX_TEXTURE_IMAGE_UNITS={name:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",value:35660,description:" "},Oi.MAX_TEXTURE_IMAGE_UNITS={name:"MAX_TEXTURE_IMAGE_UNITS",value:34930,description:"Implementation dependent number of maximum texture units. At least 8."},Oi.MAX_FRAGMENT_UNIFORM_VECTORS={name:"MAX_FRAGMENT_UNIFORM_VECTORS",value:36349,description:" "},Oi.SHADER_TYPE={name:"SHADER_TYPE",value:35663,description:" "},Oi.SHADING_LANGUAGE_VERSION={name:"SHADING_LANGUAGE_VERSION",value:35724,description:" "},Oi.CURRENT_PROGRAM={name:"CURRENT_PROGRAM",value:35725,description:" "},Oi.NEVER={name:"NEVER",value:512,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will never pass. i.e. Nothing will be drawn."},Oi.ALWAYS={name:"ALWAYS",value:519,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will always pass. i.e. Pixels will be drawn in the order they are drawn."},Oi.LESS={name:"LESS",value:513,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is less than the stored value."},Oi.EQUAL={name:"EQUAL",value:514,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is equals to the stored value."},Oi.LEQUAL={name:"LEQUAL",value:515,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is less than or equal to the stored value."},Oi.GREATER={name:"GREATER",value:516,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is greater than the stored value."},Oi.GEQUAL={name:"GEQUAL",value:518,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is greater than or equal to the stored value."},Oi.NOTEQUAL={name:"NOTEQUAL",value:517,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is not equal to the stored value."},Oi.KEEP={name:"KEEP",value:7680,description:" "},Oi.REPLACE={name:"REPLACE",value:7681,description:" "},Oi.INCR={name:"INCR",value:7682,description:" "},Oi.DECR={name:"DECR",value:7683,description:" "},Oi.INVERT={name:"INVERT",value:5386,description:" "},Oi.INCR_WRAP={name:"INCR_WRAP",value:34055,description:" "},Oi.DECR_WRAP={name:"DECR_WRAP",value:34056,description:" "},Oi.NEAREST={name:"NEAREST",value:9728,description:" "},Oi.LINEAR={name:"LINEAR",value:9729,description:" "},Oi.NEAREST_MIPMAP_NEAREST={name:"NEAREST_MIPMAP_NEAREST",value:9984,description:" "},Oi.LINEAR_MIPMAP_NEAREST={name:"LINEAR_MIPMAP_NEAREST",value:9985,description:" "},Oi.NEAREST_MIPMAP_LINEAR={name:"NEAREST_MIPMAP_LINEAR",value:9986,description:" "},Oi.LINEAR_MIPMAP_LINEAR={name:"LINEAR_MIPMAP_LINEAR",value:9987,description:" "},Oi.TEXTURE_MAG_FILTER={name:"TEXTURE_MAG_FILTER",value:10240,description:" "},Oi.TEXTURE_MIN_FILTER={name:"TEXTURE_MIN_FILTER",value:10241,description:" "},Oi.TEXTURE_WRAP_S={name:"TEXTURE_WRAP_S",value:10242,description:" "},Oi.TEXTURE_WRAP_T={name:"TEXTURE_WRAP_T",value:10243,description:" "},Oi.TEXTURE_2D={name:"TEXTURE_2D",value:3553,description:" "},Oi.TEXTURE={name:"TEXTURE",value:5890,description:" "},Oi.TEXTURE_CUBE_MAP={name:"TEXTURE_CUBE_MAP",value:34067,description:" "},Oi.TEXTURE_BINDING_CUBE_MAP={name:"TEXTURE_BINDING_CUBE_MAP",value:34068,description:" "},Oi.TEXTURE_CUBE_MAP_POSITIVE_X={name:"TEXTURE_CUBE_MAP_POSITIVE_X",value:34069,description:" "},Oi.TEXTURE_CUBE_MAP_NEGATIVE_X={name:"TEXTURE_CUBE_MAP_NEGATIVE_X",value:34070,description:" "},Oi.TEXTURE_CUBE_MAP_POSITIVE_Y={name:"TEXTURE_CUBE_MAP_POSITIVE_Y",value:34071,description:" "},Oi.TEXTURE_CUBE_MAP_NEGATIVE_Y={name:"TEXTURE_CUBE_MAP_NEGATIVE_Y",value:34072,description:" "},Oi.TEXTURE_CUBE_MAP_POSITIVE_Z={name:"TEXTURE_CUBE_MAP_POSITIVE_Z",value:34073,description:" "},Oi.TEXTURE_CUBE_MAP_NEGATIVE_Z={name:"TEXTURE_CUBE_MAP_NEGATIVE_Z",value:34074,description:" "},Oi.MAX_CUBE_MAP_TEXTURE_SIZE={name:"MAX_CUBE_MAP_TEXTURE_SIZE",value:34076,description:" "},Oi.TEXTURE0={name:"TEXTURE0",value:33984,description:"A texture unit."},Oi.TEXTURE1={name:"TEXTURE1",value:33985,description:"A texture unit."},Oi.TEXTURE2={name:"TEXTURE2",value:33986,description:"A texture unit."},Oi.TEXTURE3={name:"TEXTURE3",value:33987,description:"A texture unit."},Oi.TEXTURE4={name:"TEXTURE4",value:33988,description:"A texture unit."},Oi.TEXTURE5={name:"TEXTURE5",value:33989,description:"A texture unit."},Oi.TEXTURE6={name:"TEXTURE6",value:33990,description:"A texture unit."},Oi.TEXTURE7={name:"TEXTURE7",value:33991,description:"A texture unit."},Oi.TEXTURE8={name:"TEXTURE8",value:33992,description:"A texture unit."},Oi.TEXTURE9={name:"TEXTURE9",value:33993,description:"A texture unit."},Oi.TEXTURE10={name:"TEXTURE10",value:33994,description:"A texture unit."},Oi.TEXTURE11={name:"TEXTURE11",value:33995,description:"A texture unit."},Oi.TEXTURE12={name:"TEXTURE12",value:33996,description:"A texture unit."},Oi.TEXTURE13={name:"TEXTURE13",value:33997,description:"A texture unit."},Oi.TEXTURE14={name:"TEXTURE14",value:33998,description:"A texture unit."},Oi.TEXTURE15={name:"TEXTURE15",value:33999,description:"A texture unit."},Oi.TEXTURE16={name:"TEXTURE16",value:34e3,description:"A texture unit."},Oi.TEXTURE17={name:"TEXTURE17",value:34001,description:"A texture unit."},Oi.TEXTURE18={name:"TEXTURE18",value:34002,description:"A texture unit."},Oi.TEXTURE19={name:"TEXTURE19",value:34003,description:"A texture unit."},Oi.TEXTURE20={name:"TEXTURE20",value:34004,description:"A texture unit."},Oi.TEXTURE21={name:"TEXTURE21",value:34005,description:"A texture unit."},Oi.TEXTURE22={name:"TEXTURE22",value:34006,description:"A texture unit."},Oi.TEXTURE23={name:"TEXTURE23",value:34007,description:"A texture unit."},Oi.TEXTURE24={name:"TEXTURE24",value:34008,description:"A texture unit."},Oi.TEXTURE25={name:"TEXTURE25",value:34009,description:"A texture unit."},Oi.TEXTURE26={name:"TEXTURE26",value:34010,description:"A texture unit."},Oi.TEXTURE27={name:"TEXTURE27",value:34011,description:"A texture unit."},Oi.TEXTURE28={name:"TEXTURE28",value:34012,description:"A texture unit."},Oi.TEXTURE29={name:"TEXTURE29",value:34013,description:"A texture unit."},Oi.TEXTURE30={name:"TEXTURE30",value:34014,description:"A texture unit."},Oi.TEXTURE31={name:"TEXTURE31",value:34015,description:"A texture unit."},Oi.ACTIVE_TEXTURE={name:"ACTIVE_TEXTURE",value:34016,description:"The current active texture unit."},Oi.REPEAT={name:"REPEAT",value:10497,description:" "},Oi.CLAMP_TO_EDGE={name:"CLAMP_TO_EDGE",value:33071,description:" "},Oi.MIRRORED_REPEAT={name:"MIRRORED_REPEAT",value:33648,description:" "},Oi.FLOAT_VEC2={name:"FLOAT_VEC2",value:35664,description:" "},Oi.FLOAT_VEC3={name:"FLOAT_VEC3",value:35665,description:" "},Oi.FLOAT_VEC4={name:"FLOAT_VEC4",value:35666,description:" "},Oi.INT_VEC2={name:"INT_VEC2",value:35667,description:" "},Oi.INT_VEC3={name:"INT_VEC3",value:35668,description:" "},Oi.INT_VEC4={name:"INT_VEC4",value:35669,description:" "},Oi.BOOL={name:"BOOL",value:35670,description:" "},Oi.BOOL_VEC2={name:"BOOL_VEC2",value:35671,description:" "},Oi.BOOL_VEC3={name:"BOOL_VEC3",value:35672,description:" "},Oi.BOOL_VEC4={name:"BOOL_VEC4",value:35673,description:" "},Oi.FLOAT_MAT2={name:"FLOAT_MAT2",value:35674,description:" "},Oi.FLOAT_MAT3={name:"FLOAT_MAT3",value:35675,description:" "},Oi.FLOAT_MAT4={name:"FLOAT_MAT4",value:35676,description:" "},Oi.SAMPLER_2D={name:"SAMPLER_2D",value:35678,description:" "},Oi.SAMPLER_CUBE={name:"SAMPLER_CUBE",value:35680,description:" "},Oi.LOW_FLOAT={name:"LOW_FLOAT",value:36336,description:" "},Oi.MEDIUM_FLOAT={name:"MEDIUM_FLOAT",value:36337,description:" "},Oi.HIGH_FLOAT={name:"HIGH_FLOAT",value:36338,description:" "},Oi.LOW_INT={name:"LOW_INT",value:36339,description:" "},Oi.MEDIUM_INT={name:"MEDIUM_INT",value:36340,description:" "},Oi.HIGH_INT={name:"HIGH_INT",value:36341,description:" "},Oi.FRAMEBUFFER={name:"FRAMEBUFFER",value:36160,description:" "},Oi.RENDERBUFFER={name:"RENDERBUFFER",value:36161,description:" "},Oi.RGBA4={name:"RGBA4",value:32854,description:" "},Oi.RGB5_A1={name:"RGB5_A1",value:32855,description:" "},Oi.RGB565={name:"RGB565",value:36194,description:" "},Oi.DEPTH_COMPONENT16={name:"DEPTH_COMPONENT16",value:33189,description:" "},Oi.STENCIL_INDEX={name:"STENCIL_INDEX",value:6401,description:" "},Oi.STENCIL_INDEX8={name:"STENCIL_INDEX8",value:36168,description:" "},Oi.DEPTH_STENCIL={name:"DEPTH_STENCIL",value:34041,description:" "},Oi.RENDERBUFFER_WIDTH={name:"RENDERBUFFER_WIDTH",value:36162,description:" "},Oi.RENDERBUFFER_HEIGHT={name:"RENDERBUFFER_HEIGHT",value:36163,description:" "},Oi.RENDERBUFFER_INTERNAL_FORMAT={name:"RENDERBUFFER_INTERNAL_FORMAT",value:36164,description:" "},Oi.RENDERBUFFER_RED_SIZE={name:"RENDERBUFFER_RED_SIZE",value:36176,description:" "},Oi.RENDERBUFFER_GREEN_SIZE={name:"RENDERBUFFER_GREEN_SIZE",value:36177,description:" "},Oi.RENDERBUFFER_BLUE_SIZE={name:"RENDERBUFFER_BLUE_SIZE",value:36178,description:" "},Oi.RENDERBUFFER_ALPHA_SIZE={name:"RENDERBUFFER_ALPHA_SIZE",value:36179,description:" "},Oi.RENDERBUFFER_DEPTH_SIZE={name:"RENDERBUFFER_DEPTH_SIZE",value:36180,description:" "},Oi.RENDERBUFFER_STENCIL_SIZE={name:"RENDERBUFFER_STENCIL_SIZE",value:36181,description:" "},Oi.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE={name:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",value:36048,description:" "},Oi.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME={name:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",value:36049,description:" "},Oi.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL={name:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",value:36050,description:" "},Oi.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE={name:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",value:36051,description:" "},Oi.COLOR_ATTACHMENT0={name:"COLOR_ATTACHMENT0",value:36064,description:" "},Oi.DEPTH_ATTACHMENT={name:"DEPTH_ATTACHMENT",value:36096,description:" "},Oi.STENCIL_ATTACHMENT={name:"STENCIL_ATTACHMENT",value:36128,description:" "},Oi.DEPTH_STENCIL_ATTACHMENT={name:"DEPTH_STENCIL_ATTACHMENT",value:33306,description:" "},Oi.NONE={name:"NONE",value:0,description:" "},Oi.FRAMEBUFFER_COMPLETE={name:"FRAMEBUFFER_COMPLETE",value:36053,description:" "},Oi.FRAMEBUFFER_INCOMPLETE_ATTACHMENT={name:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",value:36054,description:" "},Oi.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT={name:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",value:36055,description:" "},Oi.FRAMEBUFFER_INCOMPLETE_DIMENSIONS={name:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",value:36057,description:" "},Oi.FRAMEBUFFER_UNSUPPORTED={name:"FRAMEBUFFER_UNSUPPORTED",value:36061,description:" "},Oi.FRAMEBUFFER_BINDING={name:"FRAMEBUFFER_BINDING",value:36006,description:" "},Oi.RENDERBUFFER_BINDING={name:"RENDERBUFFER_BINDING",value:36007,description:" "},Oi.MAX_RENDERBUFFER_SIZE={name:"MAX_RENDERBUFFER_SIZE",value:34024,description:" "},Oi.INVALID_FRAMEBUFFER_OPERATION={name:"INVALID_FRAMEBUFFER_OPERATION",value:1286,description:" "},Oi.UNPACK_FLIP_Y_WEBGL={name:"UNPACK_FLIP_Y_WEBGL",value:37440,description:" "},Oi.UNPACK_PREMULTIPLY_ALPHA_WEBGL={name:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",value:37441,description:" "},Oi.UNPACK_COLORSPACE_CONVERSION_WEBGL={name:"UNPACK_COLORSPACE_CONVERSION_WEBGL",value:37443,description:" "},Oi.READ_BUFFER={name:"READ_BUFFER",value:3074,description:" "},Oi.UNPACK_ROW_LENGTH={name:"UNPACK_ROW_LENGTH",value:3314,description:" "},Oi.UNPACK_SKIP_ROWS={name:"UNPACK_SKIP_ROWS",value:3315,description:" "},Oi.UNPACK_SKIP_PIXELS={name:"UNPACK_SKIP_PIXELS",value:3316,description:" "},Oi.PACK_ROW_LENGTH={name:"PACK_ROW_LENGTH",value:3330,description:" "},Oi.PACK_SKIP_ROWS={name:"PACK_SKIP_ROWS",value:3331,description:" "},Oi.PACK_SKIP_PIXELS={name:"PACK_SKIP_PIXELS",value:3332,description:" "},Oi.TEXTURE_BINDING_3D={name:"TEXTURE_BINDING_3D",value:32874,description:" "},Oi.UNPACK_SKIP_IMAGES={name:"UNPACK_SKIP_IMAGES",value:32877,description:" "},Oi.UNPACK_IMAGE_HEIGHT={name:"UNPACK_IMAGE_HEIGHT",value:32878,description:" "},Oi.MAX_3D_TEXTURE_SIZE={name:"MAX_3D_TEXTURE_SIZE",value:32883,description:" "},Oi.MAX_ELEMENTS_VERTICES={name:"MAX_ELEMENTS_VERTICES",value:33e3,description:" "},Oi.MAX_ELEMENTS_INDICES={name:"MAX_ELEMENTS_INDICES",value:33001,description:" "},Oi.MAX_TEXTURE_LOD_BIAS={name:"MAX_TEXTURE_LOD_BIAS",value:34045,description:" "},Oi.MAX_FRAGMENT_UNIFORM_COMPONENTS={name:"MAX_FRAGMENT_UNIFORM_COMPONENTS",value:35657,description:" "},Oi.MAX_VERTEX_UNIFORM_COMPONENTS={name:"MAX_VERTEX_UNIFORM_COMPONENTS",value:35658,description:" "},Oi.MAX_ARRAY_TEXTURE_LAYERS={name:"MAX_ARRAY_TEXTURE_LAYERS",value:35071,description:" "},Oi.MIN_PROGRAM_TEXEL_OFFSET={name:"MIN_PROGRAM_TEXEL_OFFSET",value:35076,description:" "},Oi.MAX_PROGRAM_TEXEL_OFFSET={name:"MAX_PROGRAM_TEXEL_OFFSET",value:35077,description:" "},Oi.MAX_VARYING_COMPONENTS={name:"MAX_VARYING_COMPONENTS",value:35659,description:" "},Oi.FRAGMENT_SHADER_DERIVATIVE_HINT={name:"FRAGMENT_SHADER_DERIVATIVE_HINT",value:35723,description:" "},Oi.RASTERIZER_DISCARD={name:"RASTERIZER_DISCARD",value:35977,description:" "},Oi.VERTEX_ARRAY_BINDING={name:"VERTEX_ARRAY_BINDING",value:34229,description:" "},Oi.MAX_VERTEX_OUTPUT_COMPONENTS={name:"MAX_VERTEX_OUTPUT_COMPONENTS",value:37154,description:" "},Oi.MAX_FRAGMENT_INPUT_COMPONENTS={name:"MAX_FRAGMENT_INPUT_COMPONENTS",value:37157,description:" "},Oi.MAX_SERVER_WAIT_TIMEOUT={name:"MAX_SERVER_WAIT_TIMEOUT",value:37137,description:" "},Oi.MAX_ELEMENT_INDEX={name:"MAX_ELEMENT_INDEX",value:36203,description:" "},Oi.RED={name:"RED",value:6403,description:" "},Oi.RGB8={name:"RGB8",value:32849,description:" "},Oi.RGBA8={name:"RGBA8",value:32856,description:" "},Oi.RGB10_A2={name:"RGB10_A2",value:32857,description:" "},Oi.TEXTURE_3D={name:"TEXTURE_3D",value:32879,description:" "},Oi.TEXTURE_WRAP_R={name:"TEXTURE_WRAP_R",value:32882,description:" "},Oi.TEXTURE_MIN_LOD={name:"TEXTURE_MIN_LOD",value:33082,description:" "},Oi.TEXTURE_MAX_LOD={name:"TEXTURE_MAX_LOD",value:33083,description:" "},Oi.TEXTURE_BASE_LEVEL={name:"TEXTURE_BASE_LEVEL",value:33084,description:" "},Oi.TEXTURE_MAX_LEVEL={name:"TEXTURE_MAX_LEVEL",value:33085,description:" "},Oi.TEXTURE_COMPARE_MODE={name:"TEXTURE_COMPARE_MODE",value:34892,description:" "},Oi.TEXTURE_COMPARE_FUNC={name:"TEXTURE_COMPARE_FUNC",value:34893,description:" "},Oi.SRGB={name:"SRGB",value:35904,description:" "},Oi.SRGB8={name:"SRGB8",value:35905,description:" "},Oi.SRGB8_ALPHA8={name:"SRGB8_ALPHA8",value:35907,description:" "},Oi.COMPARE_REF_TO_TEXTURE={name:"COMPARE_REF_TO_TEXTURE",value:34894,description:" "},Oi.RGBA32F={name:"RGBA32F",value:34836,description:" "},Oi.RGB32F={name:"RGB32F",value:34837,description:" "},Oi.RGBA16F={name:"RGBA16F",value:34842,description:" "},Oi.RGB16F={name:"RGB16F",value:34843,description:" "},Oi.TEXTURE_2D_ARRAY={name:"TEXTURE_2D_ARRAY",value:35866,description:" "},Oi.TEXTURE_BINDING_2D_ARRAY={name:"TEXTURE_BINDING_2D_ARRAY",value:35869,description:" "},Oi.R11F_G11F_B10F={name:"R11F_G11F_B10F",value:35898,description:" "},Oi.RGB9_E5={name:"RGB9_E5",value:35901,description:" "},Oi.RGBA32UI={name:"RGBA32UI",value:36208,description:" "},Oi.RGB32UI={name:"RGB32UI",value:36209,description:" "},Oi.RGBA16UI={name:"RGBA16UI",value:36214,description:" "},Oi.RGB16UI={name:"RGB16UI",value:36215,description:" "},Oi.RGBA8UI={name:"RGBA8UI",value:36220,description:" "},Oi.RGB8UI={name:"RGB8UI",value:36221,description:" "},Oi.RGBA32I={name:"RGBA32I",value:36226,description:" "},Oi.RGB32I={name:"RGB32I",value:36227,description:" "},Oi.RGBA16I={name:"RGBA16I",value:36232,description:" "},Oi.RGB16I={name:"RGB16I",value:36233,description:" "},Oi.RGBA8I={name:"RGBA8I",value:36238,description:" "},Oi.RGB8I={name:"RGB8I",value:36239,description:" "},Oi.RED_INTEGER={name:"RED_INTEGER",value:36244,description:" "},Oi.RGB_INTEGER={name:"RGB_INTEGER",value:36248,description:" "},Oi.RGBA_INTEGER={name:"RGBA_INTEGER",value:36249,description:" "},Oi.R8={name:"R8",value:33321,description:" "},Oi.RG8={name:"RG8",value:33323,description:" "},Oi.R16F={name:"R16F",value:33325,description:" "},Oi.R32F={name:"R32F",value:33326,description:" "},Oi.RG16F={name:"RG16F",value:33327,description:" "},Oi.RG32F={name:"RG32F",value:33328,description:" "},Oi.R8I={name:"R8I",value:33329,description:" "},Oi.R8UI={name:"R8UI",value:33330,description:" "},Oi.R16I={name:"R16I",value:33331,description:" "},Oi.R16UI={name:"R16UI",value:33332,description:" "},Oi.R32I={name:"R32I",value:33333,description:" "},Oi.R32UI={name:"R32UI",value:33334,description:" "},Oi.RG8I={name:"RG8I",value:33335,description:" "},Oi.RG8UI={name:"RG8UI",value:33336,description:" "},Oi.RG16I={name:"RG16I",value:33337,description:" "},Oi.RG16UI={name:"RG16UI",value:33338,description:" "},Oi.RG32I={name:"RG32I",value:33339,description:" "},Oi.RG32UI={name:"RG32UI",value:33340,description:" "},Oi.R8_SNORM={name:"R8_SNORM",value:36756,description:" "},Oi.RG8_SNORM={name:"RG8_SNORM",value:36757,description:" "},Oi.RGB8_SNORM={name:"RGB8_SNORM",value:36758,description:" "},Oi.RGBA8_SNORM={name:"RGBA8_SNORM",value:36759,description:" "},Oi.RGB10_A2UI={name:"RGB10_A2UI",value:36975,description:" "},Oi.TEXTURE_IMMUTABLE_FORMAT={name:"TEXTURE_IMMUTABLE_FORMAT",value:37167,description:" "},Oi.TEXTURE_IMMUTABLE_LEVELS={name:"TEXTURE_IMMUTABLE_LEVELS",value:33503,description:" "},Oi.UNSIGNED_INT_2_10_10_10_REV={name:"UNSIGNED_INT_2_10_10_10_REV",value:33640,description:" "},Oi.UNSIGNED_INT_10F_11F_11F_REV={name:"UNSIGNED_INT_10F_11F_11F_REV",value:35899,description:" "},Oi.UNSIGNED_INT_5_9_9_9_REV={name:"UNSIGNED_INT_5_9_9_9_REV",value:35902,description:" "},Oi.FLOAT_32_UNSIGNED_INT_24_8_REV={name:"FLOAT_32_UNSIGNED_INT_24_8_REV",value:36269,description:" "},Oi.UNSIGNED_INT_24_8={name:"UNSIGNED_INT_24_8",value:34042,description:" "},Oi.HALF_FLOAT={name:"HALF_FLOAT",value:5131,description:" "},Oi.RG={name:"RG",value:33319,description:" "},Oi.RG_INTEGER={name:"RG_INTEGER",value:33320,description:" "},Oi.INT_2_10_10_10_REV={name:"INT_2_10_10_10_REV",value:36255,description:" "},Oi.CURRENT_QUERY={name:"CURRENT_QUERY",value:34917,description:" "},Oi.QUERY_RESULT={name:"QUERY_RESULT",value:34918,description:" "},Oi.QUERY_RESULT_AVAILABLE={name:"QUERY_RESULT_AVAILABLE",value:34919,description:" "},Oi.ANY_SAMPLES_PASSED={name:"ANY_SAMPLES_PASSED",value:35887,description:" "},Oi.ANY_SAMPLES_PASSED_CONSERVATIVE={name:"ANY_SAMPLES_PASSED_CONSERVATIVE",value:36202,description:" "},Oi.MAX_DRAW_BUFFERS={name:"MAX_DRAW_BUFFERS",value:34852,description:" "},Oi.DRAW_BUFFER0={name:"DRAW_BUFFER0",value:34853,description:" "},Oi.DRAW_BUFFER1={name:"DRAW_BUFFER1",value:34854,description:" "},Oi.DRAW_BUFFER2={name:"DRAW_BUFFER2",value:34855,description:" "},Oi.DRAW_BUFFER3={name:"DRAW_BUFFER3",value:34856,description:" "},Oi.DRAW_BUFFER4={name:"DRAW_BUFFER4",value:34857,description:" "},Oi.DRAW_BUFFER5={name:"DRAW_BUFFER5",value:34858,description:" "},Oi.DRAW_BUFFER6={name:"DRAW_BUFFER6",value:34859,description:" "},Oi.DRAW_BUFFER7={name:"DRAW_BUFFER7",value:34860,description:" "},Oi.DRAW_BUFFER8={name:"DRAW_BUFFER8",value:34861,description:" "},Oi.DRAW_BUFFER9={name:"DRAW_BUFFER9",value:34862,description:" "},Oi.DRAW_BUFFER10={name:"DRAW_BUFFER10",value:34863,description:" "},Oi.DRAW_BUFFER11={name:"DRAW_BUFFER11",value:34864,description:" "},Oi.DRAW_BUFFER12={name:"DRAW_BUFFER12",value:34865,description:" "},Oi.DRAW_BUFFER13={name:"DRAW_BUFFER13",value:34866,description:" "},Oi.DRAW_BUFFER14={name:"DRAW_BUFFER14",value:34867,description:" "},Oi.DRAW_BUFFER15={name:"DRAW_BUFFER15",value:34868,description:" "},Oi.MAX_COLOR_ATTACHMENTS={name:"MAX_COLOR_ATTACHMENTS",value:36063,description:" "},Oi.COLOR_ATTACHMENT1={name:"COLOR_ATTACHMENT1",value:36065,description:" "},Oi.COLOR_ATTACHMENT2={name:"COLOR_ATTACHMENT2",value:36066,description:" "},Oi.COLOR_ATTACHMENT3={name:"COLOR_ATTACHMENT3",value:36067,description:" "},Oi.COLOR_ATTACHMENT4={name:"COLOR_ATTACHMENT4",value:36068,description:" "},Oi.COLOR_ATTACHMENT5={name:"COLOR_ATTACHMENT5",value:36069,description:" "},Oi.COLOR_ATTACHMENT6={name:"COLOR_ATTACHMENT6",value:36070,description:" "},Oi.COLOR_ATTACHMENT7={name:"COLOR_ATTACHMENT7",value:36071,description:" "},Oi.COLOR_ATTACHMENT8={name:"COLOR_ATTACHMENT8",value:36072,description:" "},Oi.COLOR_ATTACHMENT9={name:"COLOR_ATTACHMENT9",value:36073,description:" "},Oi.COLOR_ATTACHMENT10={name:"COLOR_ATTACHMENT10",value:36074,description:" "},Oi.COLOR_ATTACHMENT11={name:"COLOR_ATTACHMENT11",value:36075,description:" "},Oi.COLOR_ATTACHMENT12={name:"COLOR_ATTACHMENT12",value:36076,description:" "},Oi.COLOR_ATTACHMENT13={name:"COLOR_ATTACHMENT13",value:36077,description:" "},Oi.COLOR_ATTACHMENT14={name:"COLOR_ATTACHMENT14",value:36078,description:" "},Oi.COLOR_ATTACHMENT15={name:"COLOR_ATTACHMENT15",value:36079,description:" "},Oi.SAMPLER_3D={name:"SAMPLER_3D",value:35679,description:" "},Oi.SAMPLER_2D_SHADOW={name:"SAMPLER_2D_SHADOW",value:35682,description:" "},Oi.SAMPLER_2D_ARRAY={name:"SAMPLER_2D_ARRAY",value:36289,description:" "},Oi.SAMPLER_2D_ARRAY_SHADOW={name:"SAMPLER_2D_ARRAY_SHADOW",value:36292,description:" "},Oi.SAMPLER_CUBE_SHADOW={name:"SAMPLER_CUBE_SHADOW",value:36293,description:" "},Oi.INT_SAMPLER_2D={name:"INT_SAMPLER_2D",value:36298,description:" "},Oi.INT_SAMPLER_3D={name:"INT_SAMPLER_3D",value:36299,description:" "},Oi.INT_SAMPLER_CUBE={name:"INT_SAMPLER_CUBE",value:36300,description:" "},Oi.INT_SAMPLER_2D_ARRAY={name:"INT_SAMPLER_2D_ARRAY",value:36303,description:" "},Oi.UNSIGNED_INT_SAMPLER_2D={name:"UNSIGNED_INT_SAMPLER_2D",value:36306,description:" "},Oi.UNSIGNED_INT_SAMPLER_3D={name:"UNSIGNED_INT_SAMPLER_3D",value:36307,description:" "},Oi.UNSIGNED_INT_SAMPLER_CUBE={name:"UNSIGNED_INT_SAMPLER_CUBE",value:36308,description:" "},Oi.UNSIGNED_INT_SAMPLER_2D_ARRAY={name:"UNSIGNED_INT_SAMPLER_2D_ARRAY",value:36311,description:" "},Oi.MAX_SAMPLES={name:"MAX_SAMPLES",value:36183,description:" "},Oi.SAMPLER_BINDING={name:"SAMPLER_BINDING",value:35097,description:" "},Oi.PIXEL_PACK_BUFFER={name:"PIXEL_PACK_BUFFER",value:35051,description:" "},Oi.PIXEL_UNPACK_BUFFER={name:"PIXEL_UNPACK_BUFFER",value:35052,description:" "},Oi.PIXEL_PACK_BUFFER_BINDING={name:"PIXEL_PACK_BUFFER_BINDING",value:35053,description:" "},Oi.PIXEL_UNPACK_BUFFER_BINDING={name:"PIXEL_UNPACK_BUFFER_BINDING",value:35055,description:" "},Oi.COPY_READ_BUFFER={name:"COPY_READ_BUFFER",value:36662,description:" "},Oi.COPY_WRITE_BUFFER={name:"COPY_WRITE_BUFFER",value:36663,description:" "},Oi.COPY_READ_BUFFER_BINDING={name:"COPY_READ_BUFFER_BINDING",value:36662,description:" "},Oi.COPY_WRITE_BUFFER_BINDING={name:"COPY_WRITE_BUFFER_BINDING",value:36663,description:" "},Oi.FLOAT_MAT2x3={name:"FLOAT_MAT2x3",value:35685,description:" "},Oi.FLOAT_MAT2x4={name:"FLOAT_MAT2x4",value:35686,description:" "},Oi.FLOAT_MAT3x2={name:"FLOAT_MAT3x2",value:35687,description:" "},Oi.FLOAT_MAT3x4={name:"FLOAT_MAT3x4",value:35688,description:" "},Oi.FLOAT_MAT4x2={name:"FLOAT_MAT4x2",value:35689,description:" "},Oi.FLOAT_MAT4x3={name:"FLOAT_MAT4x3",value:35690,description:" "},Oi.UNSIGNED_INT_VEC2={name:"UNSIGNED_INT_VEC2",value:36294,description:" "},Oi.UNSIGNED_INT_VEC3={name:"UNSIGNED_INT_VEC3",value:36295,description:" "},Oi.UNSIGNED_INT_VEC4={name:"UNSIGNED_INT_VEC4",value:36296,description:" "},Oi.UNSIGNED_NORMALIZED={name:"UNSIGNED_NORMALIZED",value:35863,description:" "},Oi.SIGNED_NORMALIZED={name:"SIGNED_NORMALIZED",value:36764,description:" "},Oi.VERTEX_ATTRIB_ARRAY_INTEGER={name:"VERTEX_ATTRIB_ARRAY_INTEGER",value:35069,description:" "},Oi.VERTEX_ATTRIB_ARRAY_DIVISOR={name:"VERTEX_ATTRIB_ARRAY_DIVISOR",value:35070,description:" "},Oi.TRANSFORM_FEEDBACK_BUFFER_MODE={name:"TRANSFORM_FEEDBACK_BUFFER_MODE",value:35967,description:" "},Oi.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS={name:"MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",value:35968,description:" "},Oi.TRANSFORM_FEEDBACK_VARYINGS={name:"TRANSFORM_FEEDBACK_VARYINGS",value:35971,description:" "},Oi.TRANSFORM_FEEDBACK_BUFFER_START={name:"TRANSFORM_FEEDBACK_BUFFER_START",value:35972,description:" "},Oi.TRANSFORM_FEEDBACK_BUFFER_SIZE={name:"TRANSFORM_FEEDBACK_BUFFER_SIZE",value:35973,description:" "},Oi.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN={name:"TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",value:35976,description:" "},Oi.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS={name:"MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",value:35978,description:" "},Oi.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS={name:"MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",value:35979,description:" "},Oi.INTERLEAVED_ATTRIBS={name:"INTERLEAVED_ATTRIBS",value:35980,description:" "},Oi.SEPARATE_ATTRIBS={name:"SEPARATE_ATTRIBS",value:35981,description:" "},Oi.TRANSFORM_FEEDBACK_BUFFER={name:"TRANSFORM_FEEDBACK_BUFFER",value:35982,description:" "},Oi.TRANSFORM_FEEDBACK_BUFFER_BINDING={name:"TRANSFORM_FEEDBACK_BUFFER_BINDING",value:35983,description:" "},Oi.TRANSFORM_FEEDBACK={name:"TRANSFORM_FEEDBACK",value:36386,description:" "},Oi.TRANSFORM_FEEDBACK_PAUSED={name:"TRANSFORM_FEEDBACK_PAUSED",value:36387,description:" "},Oi.TRANSFORM_FEEDBACK_ACTIVE={name:"TRANSFORM_FEEDBACK_ACTIVE",value:36388,description:" "},Oi.TRANSFORM_FEEDBACK_BINDING={name:"TRANSFORM_FEEDBACK_BINDING",value:36389,description:" "},Oi.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING={name:"FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",value:33296,description:" "},Oi.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE={name:"FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",value:33297,description:" "},Oi.FRAMEBUFFER_ATTACHMENT_RED_SIZE={name:"FRAMEBUFFER_ATTACHMENT_RED_SIZE",value:33298,description:" "},Oi.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE={name:"FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",value:33299,description:" "},Oi.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE={name:"FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",value:33300,description:" "},Oi.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE={name:"FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",value:33301,description:" "},Oi.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE={name:"FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",value:33302,description:" "},Oi.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE={name:"FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",value:33303,description:" "},Oi.FRAMEBUFFER_DEFAULT={name:"FRAMEBUFFER_DEFAULT",value:33304,description:" "},Oi.DEPTH24_STENCIL8={name:"DEPTH24_STENCIL8",value:35056,description:" "},Oi.DRAW_FRAMEBUFFER_BINDING={name:"DRAW_FRAMEBUFFER_BINDING",value:36006,description:" "},Oi.READ_FRAMEBUFFER={name:"READ_FRAMEBUFFER",value:36008,description:" "},Oi.DRAW_FRAMEBUFFER={name:"DRAW_FRAMEBUFFER",value:36009,description:" "},Oi.READ_FRAMEBUFFER_BINDING={name:"READ_FRAMEBUFFER_BINDING",value:36010,description:" "},Oi.RENDERBUFFER_SAMPLES={name:"RENDERBUFFER_SAMPLES",value:36011,description:" "},Oi.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER={name:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",value:36052,description:" "},Oi.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE={name:"FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",value:36182,description:" "},Oi.UNIFORM_BUFFER={name:"UNIFORM_BUFFER",value:35345,description:" "},Oi.UNIFORM_BUFFER_BINDING={name:"UNIFORM_BUFFER_BINDING",value:35368,description:" "},Oi.UNIFORM_BUFFER_START={name:"UNIFORM_BUFFER_START",value:35369,description:" "},Oi.UNIFORM_BUFFER_SIZE={name:"UNIFORM_BUFFER_SIZE",value:35370,description:" "},Oi.MAX_VERTEX_UNIFORM_BLOCKS={name:"MAX_VERTEX_UNIFORM_BLOCKS",value:35371,description:" "},Oi.MAX_FRAGMENT_UNIFORM_BLOCKS={name:"MAX_FRAGMENT_UNIFORM_BLOCKS",value:35373,description:" "},Oi.MAX_COMBINED_UNIFORM_BLOCKS={name:"MAX_COMBINED_UNIFORM_BLOCKS",value:35374,description:" "},Oi.MAX_UNIFORM_BUFFER_BINDINGS={name:"MAX_UNIFORM_BUFFER_BINDINGS",value:35375,description:" "},Oi.MAX_UNIFORM_BLOCK_SIZE={name:"MAX_UNIFORM_BLOCK_SIZE",value:35376,description:" "},Oi.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS={name:"MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",value:35377,description:" "},Oi.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS={name:"MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",value:35379,description:" "},Oi.UNIFORM_BUFFER_OFFSET_ALIGNMENT={name:"UNIFORM_BUFFER_OFFSET_ALIGNMENT",value:35380,description:" "},Oi.ACTIVE_UNIFORM_BLOCKS={name:"ACTIVE_UNIFORM_BLOCKS",value:35382,description:" "},Oi.UNIFORM_TYPE={name:"UNIFORM_TYPE",value:35383,description:" "},Oi.UNIFORM_SIZE={name:"UNIFORM_SIZE",value:35384,description:" "},Oi.UNIFORM_BLOCK_INDEX={name:"UNIFORM_BLOCK_INDEX",value:35386,description:" "},Oi.UNIFORM_OFFSET={name:"UNIFORM_OFFSET",value:35387,description:" "},Oi.UNIFORM_ARRAY_STRIDE={name:"UNIFORM_ARRAY_STRIDE",value:35388,description:" "},Oi.UNIFORM_MATRIX_STRIDE={name:"UNIFORM_MATRIX_STRIDE",value:35389,description:" "},Oi.UNIFORM_IS_ROW_MAJOR={name:"UNIFORM_IS_ROW_MAJOR",value:35390,description:" "},Oi.UNIFORM_BLOCK_BINDING={name:"UNIFORM_BLOCK_BINDING",value:35391,description:" "},Oi.UNIFORM_BLOCK_DATA_SIZE={name:"UNIFORM_BLOCK_DATA_SIZE",value:35392,description:" "},Oi.UNIFORM_BLOCK_ACTIVE_UNIFORMS={name:"UNIFORM_BLOCK_ACTIVE_UNIFORMS",value:35394,description:" "},Oi.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES={name:"UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",value:35395,description:" "},Oi.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER={name:"UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",value:35396,description:" "},Oi.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER={name:"UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",value:35398,description:" "},Oi.OBJECT_TYPE={name:"OBJECT_TYPE",value:37138,description:" "},Oi.SYNC_CONDITION={name:"SYNC_CONDITION",value:37139,description:" "},Oi.SYNC_STATUS={name:"SYNC_STATUS",value:37140,description:" "},Oi.SYNC_FLAGS={name:"SYNC_FLAGS",value:37141,description:" "},Oi.SYNC_FENCE={name:"SYNC_FENCE",value:37142,description:" "},Oi.SYNC_GPU_COMMANDS_COMPLETE={name:"SYNC_GPU_COMMANDS_COMPLETE",value:37143,description:" "},Oi.UNSIGNALED={name:"UNSIGNALED",value:37144,description:" "},Oi.SIGNALED={name:"SIGNALED",value:37145,description:" "},Oi.ALREADY_SIGNALED={name:"ALREADY_SIGNALED",value:37146,description:" "},Oi.TIMEOUT_EXPIRED={name:"TIMEOUT_EXPIRED",value:37147,description:" "},Oi.CONDITION_SATISFIED={name:"CONDITION_SATISFIED",value:37148,description:" "},Oi.WAIT_FAILED={name:"WAIT_FAILED",value:37149,description:" "},Oi.SYNC_FLUSH_COMMANDS_BIT={name:"SYNC_FLUSH_COMMANDS_BIT",value:1,description:" "},Oi.COLOR={name:"COLOR",value:6144,description:" "},Oi.DEPTH={name:"DEPTH",value:6145,description:" "},Oi.STENCIL={name:"STENCIL",value:6146,description:" "},Oi.MIN={name:"MIN",value:32775,description:" "},Oi.MAX={name:"MAX",value:32776,description:" "},Oi.DEPTH_COMPONENT24={name:"DEPTH_COMPONENT24",value:33190,description:" "},Oi.STREAM_READ={name:"STREAM_READ",value:35041,description:" "},Oi.STREAM_COPY={name:"STREAM_COPY",value:35042,description:" "},Oi.STATIC_READ={name:"STATIC_READ",value:35045,description:" "},Oi.STATIC_COPY={name:"STATIC_COPY",value:35046,description:" "},Oi.DYNAMIC_READ={name:"DYNAMIC_READ",value:35049,description:" "},Oi.DYNAMIC_COPY={name:"DYNAMIC_COPY",value:35050,description:" "},Oi.DEPTH_COMPONENT32F={name:"DEPTH_COMPONENT32F",value:36012,description:" "},Oi.DEPTH32F_STENCIL8={name:"DEPTH32F_STENCIL8",value:36013,description:" "},Oi.INVALID_INDEX={name:"INVALID_INDEX",value:4294967295,description:" "},Oi.TIMEOUT_IGNORED={name:"TIMEOUT_IGNORED",value:-1,description:" "},Oi.MAX_CLIENT_WAIT_TIMEOUT_WEBGL={name:"MAX_CLIENT_WAIT_TIMEOUT_WEBGL",value:37447,description:" "},Oi.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE={name:"VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE",value:35070,description:"Describes the frequency divisor used for instanced rendering.",extensionName:"ANGLE_instanced_arrays"},Oi.UNMASKED_VENDOR_WEBGL={name:"UNMASKED_VENDOR_WEBGL",value:37445,description:"Passed to getParameter to get the vendor string of the graphics driver.",extensionName:"ANGLE_instanced_arrays"},Oi.UNMASKED_RENDERER_WEBGL={name:"UNMASKED_RENDERER_WEBGL",value:37446,description:"Passed to getParameter to get the renderer string of the graphics driver.",extensionName:"WEBGL_debug_renderer_info"},Oi.MAX_TEXTURE_MAX_ANISOTROPY_EXT={name:"MAX_TEXTURE_MAX_ANISOTROPY_EXT",value:34047,description:"Returns the maximum available anisotropy.",extensionName:"EXT_texture_filter_anisotropic"},Oi.TEXTURE_MAX_ANISOTROPY_EXT={name:"TEXTURE_MAX_ANISOTROPY_EXT",value:34046,description:"Passed to texParameter to set the desired maximum anisotropy for a texture.",extensionName:"EXT_texture_filter_anisotropic"},Oi.COMPRESSED_RGB_S3TC_DXT1_EXT={name:"COMPRESSED_RGB_S3TC_DXT1_EXT",value:33776,description:"A DXT1-compressed image in an RGB image format.",extensionName:"WEBGL_compressed_texture_s3tc"},Oi.COMPRESSED_RGBA_S3TC_DXT1_EXT={name:"COMPRESSED_RGBA_S3TC_DXT1_EXT",value:33777,description:"A DXT1-compressed image in an RGB image format with a simple on/off alpha value.",extensionName:"WEBGL_compressed_texture_s3tc"},Oi.COMPRESSED_RGBA_S3TC_DXT3_EXT={name:"COMPRESSED_RGBA_S3TC_DXT3_EXT",value:33778,description:"A DXT3-compressed image in an RGBA image format. Compared to a 32-bit RGBA texture, it offers 4:1 compression.",extensionName:"WEBGL_compressed_texture_s3tc"},Oi.COMPRESSED_RGBA_S3TC_DXT5_EXT={name:"COMPRESSED_RGBA_S3TC_DXT5_EXT",value:33779,description:"A DXT5-compressed image in an RGBA image format. It also provides a 4:1 compression, but differs to the DXT3 compression in how the alpha compression is done.",extensionName:"WEBGL_compressed_texture_s3tc"},Oi.COMPRESSED_R11_EAC={name:"COMPRESSED_R11_EAC",value:37488,description:"One-channel (red) unsigned format compression.",extensionName:"WEBGL_compressed_texture_etc"},Oi.COMPRESSED_SIGNED_R11_EAC={name:"COMPRESSED_SIGNED_R11_EAC",value:37489,description:"One-channel (red) signed format compression.",extensionName:"WEBGL_compressed_texture_etc"},Oi.COMPRESSED_RG11_EAC={name:"COMPRESSED_RG11_EAC",value:37490,description:"Two-channel (red and green) unsigned format compression.",extensionName:"WEBGL_compressed_texture_etc"},Oi.COMPRESSED_SIGNED_RG11_EAC={name:"COMPRESSED_SIGNED_RG11_EAC",value:37491,description:"Two-channel (red and green) signed format compression.",extensionName:"WEBGL_compressed_texture_etc"},Oi.COMPRESSED_RGB8_ETC2={name:"COMPRESSED_RGB8_ETC2",value:37492,description:"Compresses RBG8 data with no alpha channel.",extensionName:"WEBGL_compressed_texture_etc"},Oi.COMPRESSED_RGBA8_ETC2_EAC={name:"COMPRESSED_RGBA8_ETC2_EAC",value:37493,description:"Compresses RGBA8 data. The RGB part is encoded the same as RGB_ETC2, but the alpha part is encoded separately.",extensionName:"WEBGL_compressed_texture_etc"},Oi.COMPRESSED_SRGB8_ETC2={name:"COMPRESSED_SRGB8_ETC2",value:37494,description:"Compresses sRBG8 data with no alpha channel.",extensionName:"WEBGL_compressed_texture_etc"},Oi.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC={name:"COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",value:37495,description:"Compresses sRGBA8 data. The sRGB part is encoded the same as SRGB_ETC2, but the alpha part is encoded separately.",extensionName:"WEBGL_compressed_texture_etc"},Oi.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2={name:"COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",value:37496,description:"Similar to RGB8_ETC, but with ability to punch through the alpha channel, which means to make it completely opaque or transparent.",extensionName:"WEBGL_compressed_texture_etc"},Oi.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2={name:"COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",value:37497,description:"Similar to SRGB8_ETC, but with ability to punch through the alpha channel, which means to make it completely opaque or transparent.",extensionName:"WEBGL_compressed_texture_etc"},Oi.COMPRESSED_RGB_PVRTC_4BPPV1_IMG={name:"COMPRESSED_RGB_PVRTC_4BPPV1_IMG",value:35840,description:"RGB compression in 4-bit mode. One block for each 4×4 pixels.",extensionName:"WEBGL_compressed_texture_pvrtc"},Oi.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG={name:"COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",value:35842,description:"RGBA compression in 4-bit mode. One block for each 4×4 pixels.",extensionName:"WEBGL_compressed_texture_pvrtc"},Oi.COMPRESSED_RGB_PVRTC_2BPPV1_IMG={name:"COMPRESSED_RGB_PVRTC_2BPPV1_IMG",value:35841,description:"RGB compression in 2-bit mode. One block for each 8×4 pixels.",extensionName:"WEBGL_compressed_texture_pvrtc"},Oi.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG={name:"COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",value:35843,description:"RGBA compression in 2-bit mode. One block for each 8×4 pixe",extensionName:"WEBGL_compressed_texture_pvrtc"},Oi.COMPRESSED_RGB_ETC1_WEBGL={name:"COMPRESSED_RGB_ETC1_WEBGL",value:36196,description:"Compresses 24-bit RGB data with no alpha channel.",extensionName:"WEBGL_compressed_texture_etc1"},Oi.COMPRESSED_RGB_ATC_WEBGL={name:"COMPRESSED_RGB_ATC_WEBGL",value:35986,description:"Compresses RGB textures with no alpha channel.",extensionName:"WEBGL_compressed_texture_atc"},Oi.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL={name:"COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",value:35986,description:"Compresses RGBA textures using explicit alpha encoding (useful when alpha transitions are sharp).",extensionName:"WEBGL_compressed_texture_atc"},Oi.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL={name:"COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",value:34798,description:"Compresses RGBA textures using interpolated alpha encoding (useful when alpha transitions are gradient).",extensionName:"WEBGL_compressed_texture_atc"},Oi.UNSIGNED_INT_24_8_WEBGL={name:"UNSIGNED_INT_24_8_WEBGL",value:34042,description:"Unsigned integer type for 24-bit depth texture data.",extensionName:"WEBGL_depth_texture"},Oi.HALF_FLOAT_OES={name:"HALF_FLOAT_OES",value:36193,description:"Half floating-point type (16-bit).",extensionName:"OES_texture_half_float"},Oi.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT={name:"FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT",value:33297,description:" ",extensionName:"WEBGL_color_buffer_float"},Oi.UNSIGNED_NORMALIZED_EXT={name:"UNSIGNED_NORMALIZED_EXT",value:35863,description:" ",extensionName:"WEBGL_color_buffer_float"},Oi.MIN_EXT={name:"MIN_EXT",value:32775,description:"Produces the minimum color components of the source and destination colors.",extensionName:"EXT_blend_minmax"},Oi.MAX_EXT={name:"MAX_EXT",value:32776,description:"Produces the maximum color components of the source and destination colors.",extensionName:"EXT_blend_minmax"},Oi.SRGB_EXT={name:"SRGB_EXT",value:35904,description:"Unsized sRGB format that leaves the precision up to the driver.",extensionName:"EXT_sRGB"},Oi.SRGB_ALPHA_EXT={name:"SRGB_ALPHA_EXT",value:35906,description:"Unsized sRGB format with unsized alpha component.",extensionName:"EXT_sRGB"},Oi.SRGB8_ALPHA8_EXT={name:"SRGB8_ALPHA8_EXT",value:35907,description:"Sized (8-bit) sRGB and alpha formats.",extensionName:"EXT_sRGB"},Oi.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT={name:"FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT",value:33296,description:"Returns the framebuffer color encoding.",extensionName:"EXT_sRGB"},Oi.FRAGMENT_SHADER_DERIVATIVE_HINT_OES={name:"FRAGMENT_SHADER_DERIVATIVE_HINT_OES",value:35723,description:"Indicates the accuracy of the derivative calculation for the GLSL built-in functions: dFdx, dFdy, and fwidth.",extensionName:"OES_standard_derivatives"},Oi.COLOR_ATTACHMENT0_WEBGL={name:"COLOR_ATTACHMENT0_WEBGL",value:36064,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},Oi.COLOR_ATTACHMENT1_WEBGL={name:"COLOR_ATTACHMENT1_WEBGL",value:36065,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},Oi.COLOR_ATTACHMENT2_WEBGL={name:"COLOR_ATTACHMENT2_WEBGL",value:36066,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},Oi.COLOR_ATTACHMENT3_WEBGL={name:"COLOR_ATTACHMENT3_WEBGL",value:36067,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},Oi.COLOR_ATTACHMENT4_WEBGL={name:"COLOR_ATTACHMENT4_WEBGL",value:36068,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},Oi.COLOR_ATTACHMENT5_WEBGL={name:"COLOR_ATTACHMENT5_WEBGL",value:36069,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},Oi.COLOR_ATTACHMENT6_WEBGL={name:"COLOR_ATTACHMENT6_WEBGL",value:36070,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},Oi.COLOR_ATTACHMENT7_WEBGL={name:"COLOR_ATTACHMENT7_WEBGL",value:36071,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},Oi.COLOR_ATTACHMENT8_WEBGL={name:"COLOR_ATTACHMENT8_WEBGL",value:36072,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},Oi.COLOR_ATTACHMENT9_WEBGL={name:"COLOR_ATTACHMENT9_WEBGL",value:36073,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},Oi.COLOR_ATTACHMENT10_WEBGL={name:"COLOR_ATTACHMENT10_WEBGL",value:36074,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},Oi.COLOR_ATTACHMENT11_WEBGL={name:"COLOR_ATTACHMENT11_WEBGL",value:36075,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},Oi.COLOR_ATTACHMENT12_WEBGL={name:"COLOR_ATTACHMENT12_WEBGL",value:36076,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},Oi.COLOR_ATTACHMENT13_WEBGL={name:"COLOR_ATTACHMENT13_WEBGL",value:36077,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},Oi.COLOR_ATTACHMENT14_WEBGL={name:"COLOR_ATTACHMENT14_WEBGL",value:36078,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},Oi.COLOR_ATTACHMENT15_WEBGL={name:"COLOR_ATTACHMENT15_WEBGL",value:36079,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},Oi.DRAW_BUFFER0_WEBGL={name:"DRAW_BUFFER0_WEBGL",value:34853,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},Oi.DRAW_BUFFER1_WEBGL={name:"DRAW_BUFFER1_WEBGL",value:34854,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},Oi.DRAW_BUFFER2_WEBGL={name:"DRAW_BUFFER2_WEBGL",value:34855,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},Oi.DRAW_BUFFER3_WEBGL={name:"DRAW_BUFFER3_WEBGL",value:34856,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},Oi.DRAW_BUFFER4_WEBGL={name:"DRAW_BUFFER4_WEBGL",value:34857,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},Oi.DRAW_BUFFER5_WEBGL={name:"DRAW_BUFFER5_WEBGL",value:34858,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},Oi.DRAW_BUFFER6_WEBGL={name:"DRAW_BUFFER6_WEBGL",value:34859,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},Oi.DRAW_BUFFER7_WEBGL={name:"DRAW_BUFFER7_WEBGL",value:34860,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},Oi.DRAW_BUFFER8_WEBGL={name:"DRAW_BUFFER8_WEBGL",value:34861,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},Oi.DRAW_BUFFER9_WEBGL={name:"DRAW_BUFFER9_WEBGL",value:34862,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},Oi.DRAW_BUFFER10_WEBGL={name:"DRAW_BUFFER10_WEBGL",value:34863,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},Oi.DRAW_BUFFER11_WEBGL={name:"DRAW_BUFFER11_WEBGL",value:34864,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},Oi.DRAW_BUFFER12_WEBGL={name:"DRAW_BUFFER12_WEBGL",value:34865,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},Oi.DRAW_BUFFER13_WEBGL={name:"DRAW_BUFFER13_WEBGL",value:34866,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},Oi.DRAW_BUFFER14_WEBGL={name:"DRAW_BUFFER14_WEBGL",value:34867,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},Oi.DRAW_BUFFER15_WEBGL={name:"DRAW_BUFFER15_WEBGL",value:34868,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},Oi.MAX_COLOR_ATTACHMENTS_WEBGL={name:"MAX_COLOR_ATTACHMENTS_WEBGL",value:36063,description:"Maximum number of framebuffer color attachment points",extensionName:"WEBGL_draw_buffers"},Oi.MAX_DRAW_BUFFERS_WEBGL={name:"MAX_DRAW_BUFFERS_WEBGL",value:34852,description:"Maximum number of draw buffers",extensionName:"WEBGL_draw_buffers"},Oi.VERTEX_ARRAY_BINDING_OES={name:"VERTEX_ARRAY_BINDING_OES",value:34229,description:"The bound vertex array object (VAO).",extensionName:"VERTEX_ARRAY_BINDING_OES"},Oi.QUERY_COUNTER_BITS_EXT={name:"QUERY_COUNTER_BITS_EXT",value:34916,description:"The number of bits used to hold the query result for the given target.",extensionName:"EXT_disjoint_timer_query"},Oi.CURRENT_QUERY_EXT={name:"CURRENT_QUERY_EXT",value:34917,description:"The currently active query.",extensionName:"EXT_disjoint_timer_query"},Oi.QUERY_RESULT_EXT={name:"QUERY_RESULT_EXT",value:34918,description:"The query result.",extensionName:"EXT_disjoint_timer_query"},Oi.QUERY_RESULT_AVAILABLE_EXT={name:"QUERY_RESULT_AVAILABLE_EXT",value:34919,description:"A Boolean indicating whether or not a query result is available.",extensionName:"EXT_disjoint_timer_query"},Oi.TIME_ELAPSED_EXT={name:"TIME_ELAPSED_EXT",value:35007,description:"Elapsed time (in nanoseconds).",extensionName:"EXT_disjoint_timer_query"},Oi.TIMESTAMP_EXT={name:"TIMESTAMP_EXT",value:36392,description:"The current time.",extensionName:"EXT_disjoint_timer_query"},Oi.GPU_DISJOINT_EXT={name:"GPU_DISJOINT_EXT",value:36795,description:"A Boolean indicating whether or not the GPU performed any disjoint operation.",extensionName:"EXT_disjoint_timer_query"},Oi.zeroMeaningByCommand={getError:"NO_ERROR",blendFunc:"ZERO",blendFuncSeparate:"ZERO",readBuffer:"NONE",getFramebufferAttachmentParameter:"NONE",texParameterf:"NONE",texParameteri:"NONE",drawArrays:"POINTS",drawElements:"POINTS",drawArraysInstanced:"POINTS",drawArraysInstancedAngle:"POINTS",drawBuffers:"POINTS",drawElementsInstanced:"POINTS",drawRangeElements:"POINTS"},Oi.oneMeaningByCommand={blendFunc:"ONE",blendFuncSeparate:"ONE",drawArrays:"LINES",drawElements:"LINES",drawArraysInstanced:"LINES",drawArraysInstancedAngle:"LINES",drawBuffers:"LINES",drawElementsInstanced:"LINES",drawRangeElements:"LINES"};const Ui={},xi={};!function(){for(const e in Oi)if(Oi.hasOwnProperty(e)){const t=Oi[e];Ui[t.name]=t,xi[t.value]=t}}();class Pi{static isSupportedCombination(e,t,n){return e=e||Oi.UNSIGNED_BYTE.value,((t=t||Oi.RGBA.value)===Oi.RGB.value||t===Oi.RGBA.value)&&((n===Oi.RGB.value||n===Oi.RGBA.value||n===Oi.RGBA8.value||n===Oi.RGBA16F.value||n===Oi.RGBA32F.value||n===Oi.RGB16F.value||n===Oi.RGB32F.value||n===Oi.R11F_G11F_B10F.value||n===Oi.SRGB8.value||n===Oi.SRGB8_ALPHA8.value)&&this.isSupportedComponentType(e))}static readPixels(e,t,n,a,r,i){e.getError();const o=a*r*4;let s;if(i===Oi.UNSIGNED_BYTE.value?s=new Uint8Array(o):(i=Oi.FLOAT.value,s=new Float32Array(o)),e.readPixels(t,n,a,r,e.RGBA,i,s),e.getError())return void console.error(" read pixel error: ",e.getError());if(i===Oi.UNSIGNED_BYTE.value)return s;const c=new Uint8Array(a*r*4);for(let e=0;e<r;e++)for(let t=0;t<a;t++)c[e*a*4+4*t+0]=255*Math.min(Math.max(s[e*a*4+4*t+0],0),1),c[e*a*4+4*t+1]=255*Math.min(Math.max(s[e*a*4+4*t+1],0),1),c[e*a*4+4*t+2]=255*Math.min(Math.max(s[e*a*4+4*t+2],0),1),c[e*a*4+4*t+3]=255*Math.min(Math.max(s[e*a*4+4*t+3],0),1);return c}static isSupportedComponentType(e){return e===Oi.UNSIGNED_BYTE.value||e===Oi.UNSIGNED_SHORT_4_4_4_4.value||e===Oi.UNSIGNED_SHORT_5_5_5_1.value||e===Oi.UNSIGNED_SHORT_5_6_5.value||e===Oi.HALF_FLOAT.value||e===Oi.HALF_FLOAT_OES.value||e===Oi.FLOAT.value}}class bi{static getWebGlObjectTag(e){return e[bi.SPECTOROBJECTTAGKEY]}static attachWebGlObjectTag(e,t){t.displayText=bi.stringifyWebGlObjectTag(t),e[bi.SPECTOROBJECTTAGKEY]=t}static stringifyWebGlObjectTag(e){return e?`${e.typeName} - ID: ${e.id}`:"No tag available."}}bi.SPECTOROBJECTTAGKEY="__SPECTOR_Object_TAG";class Di{constructor(e,t,n=30){this.NOTE="必须引入 Spector.js 基于其进行的修改",this.MAXCAPIMGNUM=n,this.position=t,this.idPrefix="pre_"+parseInt(""+314*Math.random()),this.img=document.createElement("img"),this.quickCapture=!1,this.fullCapture=!0,this.options=e,this.context=e.context,this.contextVersion=e.contextVersion,this.currentState={},this.extensions={},this.statusName="",this.programInfo=void 0,void 0!==e.extensions&&(this.extensions=e.extensions),this.contextVersion=e.contextVersion,this.captureFrameBuffer=e.context.createFramebuffer(),this.workingCanvas=document.createElement("canvas"),this.workingContext2D=this.workingCanvas.getContext("2d"),this.captureCanvas=document.createElement("canvas"),this.captureContext2D=this.captureCanvas.getContext("2d"),this.captureContext2D.imageSmoothingEnabled=!0,this.captureContext2D.mozImageSmoothingEnabled=!0,this.captureContext2D.oImageSmoothingEnabled=!0,this.captureContext2D.webkitImageSmoothingEnabled=!0,this.captureContext2D.msImageSmoothingEnabled=!0,this.imgSrcAry=[],this.imgFilterAry=[],this.imgContainer=document.createElement("div"),this.imgContainer.append(this.img),this.statusContainer=document.createElement("div"),this.imgContainer.append(this.statusContainer),this.initImgContainer(),this.sourceContainer=document.createElement("div"),this.initSourceContainer(),document.body.append(this.imgContainer),document.body.append(this.sourceContainer),this.initHTMLEvent()}initSourceContainer(){this.sourceContainer.style.display="none",this.sourceContainer.style.background="white",this.sourceContainer.style.width="80%",this.sourceContainer.style.height="80%",this.sourceContainer.style.overflow="auto",this.sourceContainer.style.top="0px",this.sourceContainer.style.left="0px",this.sourceContainer.style.position="absolute",this.sourceContainer.innerHTML=`\n            <span style="position: absolute; right: 40px; top: 10px;" id="${this.idPrefix}closeBtn">关闭</span>\n            <pre style="white-space: pre-wrap;word-wrap: break-word; overflow: auto; padding: 20px; height: calc(100% - 68px);" id="${this.idPrefix}source_container"></pre>\n        `}initHTMLEvent(){this.imgContainer.addEventListener("click",(e=>{e&&e.target&&"fragBtn"===e.target.className&&this.showShaderSource("frag"),e&&e.target&&"vertBtn"===e.target.className&&this.showShaderSource("vert"),"blendBtn"===e.target.className&&this.showBlendState()})),document.addEventListener("keydown",(e=>{"Escape"!==e.code&&"Escape"!==e.key||this.closeShaderContainer()})),this.sourceContainer.addEventListener("click",(e=>{e&&e.target&&e.target.id===`${this.idPrefix}closeBtn`&&this.closeShaderContainer()}))}showShaderContainer(){this.sourceContainer.style.display="block"}closeShaderContainer(){this.sourceContainer.style.display="none"}showShaderSource(e="frag"){if(void 0!==this.programInfo){if(this.programInfo.__SPECTOR_Object_CustomData){const{shaders:t}=this.programInfo.__SPECTOR_Object_CustomData;let n="";"frag"===e&&("Fragment"===t[0].name&&(n=t[0].source),"Fragment"===t[1].name&&(n=t[1].source)),"vert"===e&&("Vertex"===t[0].name&&(n=t[0].source),"Vertex"===t[1].name&&(n=t[1].source));const a=document.getElementById(`${this.idPrefix}source_container`);this.showShaderContainer(),null!==a&&(a.innerHTML=n)}}else alert(" no source detect")}updateStatusContainer(e="",t=""){let n=0;this.curShowImg&&(n=this.imgSrcAry.indexOf(this.curShowImg));const a=t||this.statusName,r=this.imgSrcAry.length;this.statusContainer.title=`${n+1}/${r} ${a} ${e} `,this.statusContainer.innerHTML=`\n            <span style="position:absolute; top:0px; display: inline-block; background: rgba(0.5, 0.5, 0.5,0.5);">${a}</span>\n            <span style="position:absolute; top:0px; right: 0px; display: inline-block; background: rgba(0.5, 0.5, 0.5,0.5);cursor: pointer;" class="fragBtn">Frag</span>\n            <span style="position:absolute; top:0px; right: 30px; display: inline-block; background: rgba(0.5, 0.5, 0.5,0.5); cursor: pointer;" class="vertBtn">Vert</span>\n            <span style="position:absolute; top:20px; right: 0px; display: inline-block; background: rgba(0.5, 0.5, 0.5,0.5);cursor: pointer;" class="blendBtn">Blend</span>\n            <span style="position:absolute; bottom:0px; display: inline-block; background: rgba(0.5, 0.5, 0.5,0.5);">\n                ${n+1}/${r} ${e}\n            </span>\n        `}initImgContainer(){this.imgContainer.style.minWidth="200px",this.imgContainer.style.minHeight="200px",this.imgContainer.style.position="absolute",this.imgContainer.style.boxSizing="border-box",this.imgContainer.style.border="1px solid #666",this.statusContainer.style.position="absolute",this.statusContainer.style.left="0px",this.statusContainer.style.bottom="0px",this.statusContainer.style.height="100%",this.statusContainer.style.fontSize="12px",this.statusContainer.style.width="100%",this.statusContainer.style.color="white";const e=document.createElement("img"),t=document.createElement("img");e.style.position="absolute",e.style.background="white",e.style.left="0px",e.style.top="40%",e.style.width="20px",e.style.height="20px",e.style.cursor="pointer",e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIQAAACECAMAAABmmnOVAAAAhFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8qm6wAAAAK3RSTlMA+xLJXx7FBaGK7UUmDgra03w6zVZMpata9fHfurCWhVE1K+riv72Db2cY2Bh2eAAAA7NJREFUeNrUmNuyojAQRRuScI0ojHhXRrwdzf//38yDMTQqlQRIzaw3q86JC7K7OxH+Y/yCVotdMNsmnpdsZ8FuUdHCB2dMyphsxEc2JC4nMDZhGhNPdOKROA1hPIpDIrRIDgWMAr9thQHbG4ehOe6FMfsjDEl6FVZc0+EUSFcOk6QrqWQYDbb8XIyLfH7kjwz+kj34cZ5Hnwt3yfrXZL4Wbc4RZV+EaXQWbdZ52HMnpqLF5c6hE36/iBbTFOwJ4/ZqOQMNWN52j0PrNAQ4gssCtCmWOK6BZTLKBClEHIzgEdJISrAgRgoHBsawA9KIzeOwQC+zBitqtKELw2BkO6E4UbCGnoRil4EBPhGKyIce+JFQEIOlWKPC1hR6QteNGmfa8g2HWQ29qWcNC18zD6SxFRkMQNbYEqK1YtjIZAUDUTXSqVMjjdr8gcH4aVSqSY/yVjAgK0+/a5XKoYRBKZVFCZ0wNS9WMDArNUdYZygDkzzY5yIItQJRwQhUOrFIVX+AUVD9Iv26GdNXn8xgFLLZq3N+25D8NS9qMMbXOsHVrzmSw0fY6w+ohcNM7HUs6OtBGXxiqQJh4yCkhWYslp2pPPlWDpoW/qkrm0Rtho2DtNDfENLxIgJzh18Cv+Nugu+v4ipHRm3uYDZvak/e2aHFUTw59HH4DTocxJMjYPZyHTa6AzBPRggQXJXnuA64TDk0ucmFuAMH4PJV3KDJVqbbhYPqi1toUIgnhRMH/H3tvE7Hc8BM32sxTORoc+CABnYSvndLZukwB0MY6proVHcxcSDIwZTL2zlPrnd35gD39hSbyLLlzhyAy/+etC48Z9BlghysOKuLEIpE5MYBt+64FQnq0AFoKxQbWaDmDiuQ2Bbp5hky+dGVA350HzVy4tQBCBof1CSXk2AgB1igJFZycLhywOOjQkpzMwcK/ZijX4928tjpygEfrXfoHsCdOgBH9xx5fXo4dYCH/BkCnS8z6CQb1gEydM5Mnis7cEA8Z3eCPjh0QA//70j8aecOigCGgRgG8mdtFJ7Zh0qhbXKxpRCvg/gwiV+UWKyIZZvYwIitnBhqiPGOGHSJkd84/BDHQOJATEQDREhixEVEcEZEiESYasTKRMBuVA1E6ULUT0YRR1SSRjlL1NRGYU+gCwbEQeAsBthDIE4G7GVgbwQAaKCQBhRq4LEGKEwg0wY8bmD0hlBgqBWGZGLoNoh4ZChYhoxmaHmIoGiomoi0iui7iMiMKN2I3K5o/siFB8zVDz3HZ8W8SKUu1T3kAAAAAElFTkSuQmCC",t.style.background="white",t.style.position="absolute",t.style.right="0px",t.style.top="40%",t.style.width="20px",t.style.height="20px",t.style.cursor="pointer",t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIQAAACECAMAAABmmnOVAAAAhFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8qm6wAAAAK3RSTlMA+xLJXx7FBaGK7UUmDgra03w6zVZMpata9fHfurCWhVE1K+riv72Db2cY2Bh2eAAAA7NJREFUeNrUmNmWojAURQ+EIJMotDgrLU6l+f//6xdJSErphCGrar+5llRtknPvTcQvxs29crn357vIcaLd3N8vSy93YY1pEZIte8uWhMUUYzOJQ+KwVhwSxhOMR36MmBbRMccoJPcdM2B3TzA0pwMz5nDCkMQ31olbPJwCacthFLUllQyjQVfvi3GZLU7JMwWA9JmcFlnwvnBXtH9NZhumcgk8+kHYCy5MZZP1rNh4xhSujwStJI8rU5jFfZYhVP9aRqEBzVT3sPNiUF+O4CqHNvlKjqtP0YkikhSCBEYkgaQRFehAKCkcKYyhR0kjNI/DUlrMCp2opA1dGgYj3TPB2UNnvDMT7FMY4BImCFz0wA2YgLjQhjYqbOOhJ96mUeNUW77hMK/Qm2resHA180AYJ0gxAGnAOCTVqotGJksMRNlIp06NNGrzC4Px1ahUkx7lrDEga0e/axXCocCgFMKiQCtUzIs1BmYt5ghtDaWvk4f+ufAnWoEoMQKlTixi0R8wCqJfxB83Y8b7ZIpRSOe8c37akIzPi0rr7OfCmIrPkQxvofwLno7Dgc07WHj8RSneseKB0HNg3KJTLFatqTy7eg7dLNxzWzYJ3ww9B27RdUNIy0L4+D/iZvjH3ML/vBS3emRUZnPA3KKqH75B4cReHKHD3z4WR/biBJl6kx2K0S1o/ewBEolUniNbiDJN0OReL0QCCxZJ/egdTXaig1iw4NW1Q4OcvchhwUL5f2peZ4Adi9n3WpxEfLRZsRADO5p875YUhiw6WlDRNdVT3RXoYUFMLK78nKfOrgesWTzUKTZ1eO+wZCG6ozNVLjwXoK/FFLpclItQyFu2RYtACQXhpxmLFp4Sii0v0K6sTS1EkW5fpz7x0Z6FeHVXauQEVi2IND48nsuBLHwti6WUxJIPDosWYnyUktIC/fDMLBbSr0d7fuy0aCGO1nvpHpDAqkUi3XPq6/oTVi2e9SVOOl+mGNYiRSupdM6MXvMMsGvx+mYkf7BqIV7+50j8a+cOigCGgRgG8mdtFJ7Zh0qhbXKxpRCvg/gwiV+UWKyIZZvYwIitnBhqiPGOGHSJkd84/BDHQOJATEQDREhixEVEcEZEiESYasTKRMBuVA1E6ULUT0YRR1SSRjlL1NRGYU+gCwbEQeAsBthDIE4G7GVgbwQAaKCQBhRq4LEGKEwg0wY8bmD0hlBgqBWGZGLoNoh4ZChYhoxmaHmIoGiomoi0iui7iMiMKN2I3K5o/siFB8zVDz3HZ3wCSKUyWTmTAAAAAElFTkSuQmCC",e.addEventListener("click",(()=>{this.showPrevImg()})),t.addEventListener("click",(()=>{this.showNextImg()})),this.imgContainer.append(e),this.imgContainer.append(t),"left-bottom"===this.position?(this.imgContainer.style.left="0px",this.imgContainer.style.bottom="0px"):"left-top"===this.position?(this.imgContainer.style.left="0px",this.imgContainer.style.top="0px"):"right-bottom"===this.position?(this.imgContainer.style.right="0px",this.imgContainer.style.bottom="0px"):"left-mid"===this.position?(this.imgContainer.style.left="0px",this.imgContainer.style.top="30%"):"right-mid"===this.position?(this.imgContainer.style.right="0px",this.imgContainer.style.top="30%"):(this.imgContainer.style.right="0px",this.imgContainer.style.top="0px")}getProgramInfo(){if(void 0===this.programInfo){const e=Oi.CURRENT_PROGRAM.value,t=this.context.getParameter(e);this.programInfo=t}}readFromContext(e=""){if(this.getDepthState(),this.getBlendState(),this.getProgramInfo(),this.imgSrcAry.length>=this.MAXCAPIMGNUM)return;this.statusName=e;const t=this.context;this.currentState.Attachments=[];const n=this.context.getParameter(Oi.FRAMEBUFFER_BINDING.value);if(!n)return this.currentState.FrameBuffer=null,void this.getCapture(t,"Canvas COLOR_ATTACHMENT",0,0,t.drawingBufferWidth,t.drawingBufferHeight,0,0,Oi.UNSIGNED_BYTE.value);const a=t.getParameter(t.VIEWPORT),r=a[0],i=a[1],o=a[2],s=a[3];this.currentState.FrameBuffer=this.getSpectorData(n);const c=this.context.checkFramebufferStatus(Oi.FRAMEBUFFER.value);if(this.currentState.FrameBufferStatus=xi[c].name,c!==Oi.FRAMEBUFFER_COMPLETE.value)return;if(this.extensions[Oi.MAX_DRAW_BUFFERS_WEBGL.extensionName]||1===this.contextVersion){const e=8;for(let t=0;t<e;t++)this.readFrameBufferAttachmentFromContext(this.context,n,Ui["COLOR_ATTACHMENT"+t+"_WEBGL"],r,i,o,s)}else if(this.contextVersion>1){const e=this.context.getParameter(Oi.MAX_DRAW_BUFFERS.value);for(let t=0;t<e;t++)this.readFrameBufferAttachmentFromContext(this.context,n,Ui["COLOR_ATTACHMENT"+t],r,i,o,s)}else this.readFrameBufferAttachmentFromContext(this.context,n,Ui.COLOR_ATTACHMENT0,r,i,o,s)}readFrameBufferAttachmentFromContext(e,t,n,a,r,i,o){const s=Oi.FRAMEBUFFER.value,c=this.context.getFramebufferAttachmentParameter(s,n.value,Oi.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE.value);if(c===Oi.NONE.value)return;const u=this.context.getFramebufferAttachmentParameter(s,n.value,Oi.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME.value);if(!u)return;const l=this.contextVersion>1?this.context.getFramebufferAttachmentParameter(s,n.value,Oi.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE.value):Oi.UNSIGNED_BYTE.value;c===Oi.RENDERBUFFER.value?this.readFrameBufferAttachmentFromRenderBuffer(e,t,n,a,r,i,o,s,l,u):c===Oi.TEXTURE.value&&this.readFrameBufferAttachmentFromTexture(e,t,n,a,r,i,o,s,l,u)}readFrameBufferAttachmentFromRenderBuffer(e,t,n,a,r,i,o,s,c,u){let l=0,E=0;if(u.__SPECTOR_Object_CustomData){const e=u.__SPECTOR_Object_CustomData;if(i=e.width,o=e.height,l=e.samples,E=e.internalFormat,!l&&!Pi.isSupportedCombination(c,Oi.RGBA.value,E))return}else i+=a,o+=r;if(a=r=0,l){const s=e,c=e.createRenderbuffer(),u=e.getParameter(e.RENDERBUFFER_BINDING);e.bindRenderbuffer(e.RENDERBUFFER,c),e.renderbufferStorage(e.RENDERBUFFER,E,i,o),e.bindRenderbuffer(e.RENDERBUFFER,u),e.bindFramebuffer(Oi.FRAMEBUFFER.value,this.captureFrameBuffer),e.framebufferRenderbuffer(Oi.FRAMEBUFFER.value,Oi.COLOR_ATTACHMENT0.value,Oi.RENDERBUFFER.value,c);const l=s.getParameter(s.READ_FRAMEBUFFER_BINDING),m=s.getParameter(s.DRAW_FRAMEBUFFER_BINDING);s.bindFramebuffer(s.READ_FRAMEBUFFER,t),s.bindFramebuffer(s.DRAW_FRAMEBUFFER,this.captureFrameBuffer),s.blitFramebuffer(0,0,i,o,0,0,i,o,e.COLOR_BUFFER_BIT,e.NEAREST),s.bindFramebuffer(Oi.FRAMEBUFFER.value,this.captureFrameBuffer),s.bindFramebuffer(s.READ_FRAMEBUFFER,l),s.bindFramebuffer(s.DRAW_FRAMEBUFFER,m);this.context.checkFramebufferStatus(Oi.FRAMEBUFFER.value)===Oi.FRAMEBUFFER_COMPLETE.value&&this.getCapture(e,n.name,a,r,i,o,0,0,Oi.UNSIGNED_BYTE.value),e.bindFramebuffer(Oi.FRAMEBUFFER.value,t),e.deleteRenderbuffer(c)}else{e.bindFramebuffer(Oi.FRAMEBUFFER.value,this.captureFrameBuffer),e.framebufferRenderbuffer(Oi.FRAMEBUFFER.value,Oi.COLOR_ATTACHMENT0.value,Oi.RENDERBUFFER.value,u);this.context.checkFramebufferStatus(Oi.FRAMEBUFFER.value)===Oi.FRAMEBUFFER_COMPLETE.value&&this.getCapture(e,n.name,a,r,i,o,0,0,c),e.bindFramebuffer(Oi.FRAMEBUFFER.value,t)}}readFrameBufferAttachmentFromTexture(e,t,n,a,r,i,o,s,c,u){let l=0;this.contextVersion>1&&(l=this.context.getFramebufferAttachmentParameter(s,n.value,Oi.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER.value));const E=this.context.getFramebufferAttachmentParameter(s,n.value,Oi.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL.value),m=this.context.getFramebufferAttachmentParameter(s,n.value,Oi.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE.value);m>0?xi[m].name:Oi.TEXTURE_2D.name;let _=!1,d=c;if(u.__SPECTOR_Object_CustomData){const e=u.__SPECTOR_Object_CustomData;if(i=e.width,o=e.height,d=e.type,_=e.target===Oi.TEXTURE_2D_ARRAY.name,!Pi.isSupportedCombination(e.type,e.format,e.internalFormat))return}else i+=a,o+=r;a=r=0,e.bindFramebuffer(Oi.FRAMEBUFFER.value,this.captureFrameBuffer),l>0||_?e.framebufferTextureLayer(Oi.FRAMEBUFFER.value,Oi.COLOR_ATTACHMENT0.value,u,E,l):e.framebufferTexture2D(Oi.FRAMEBUFFER.value,Oi.COLOR_ATTACHMENT0.value,m||Oi.TEXTURE_2D.value,u,E);this.context.checkFramebufferStatus(Oi.FRAMEBUFFER.value)===Oi.FRAMEBUFFER_COMPLETE.value&&this.getCapture(e,n.name,a,r,i,o,m,l,d),e.bindFramebuffer(Oi.FRAMEBUFFER.value,t)}getCapture(e,t,n,a,r,i,o,s,c=Oi.UNSIGNED_BYTE.value){if(this.imgSrcAry.length>=this.MAXCAPIMGNUM)return;const u={attachmentName:t,src:"",textureCubeMapFace:o?xi[o].name:null,textureLayer:s};if(!this.quickCapture)try{const o=Pi.readPixels(e,n,a,r,i,c);if(o){this.workingCanvas.width=r,this.workingCanvas.height=i;const e=this.workingContext2D.createImageData(Math.ceil(r),Math.ceil(i));if(e.data.set(o),this.workingContext2D.putImageData(e,0,0),this.fullCapture)this.captureCanvas.width=this.workingCanvas.width,this.captureCanvas.height=this.workingCanvas.height;else{const e=r/i;e<1?(this.captureCanvas.width=Di.captureBaseSize*e,this.captureCanvas.height=Di.captureBaseSize):e>1?(this.captureCanvas.width=Di.captureBaseSize,this.captureCanvas.height=Di.captureBaseSize/e):(this.captureCanvas.width=Di.captureBaseSize,this.captureCanvas.height=Di.captureBaseSize)}this.captureCanvas.width=Math.max(this.captureCanvas.width,1),this.captureCanvas.height=Math.max(this.captureCanvas.height,1),this.captureContext2D.globalCompositeOperation="copy",this.captureContext2D.scale(1,-1),this.captureContext2D.translate(0,-this.captureCanvas.height),this.captureContext2D.drawImage(this.workingCanvas,0,0,r,i,0,0,this.captureCanvas.width,this.captureCanvas.height),this.captureContext2D.setTransform(1,0,0,1,0,0),this.captureContext2D.globalCompositeOperation="source-over";const n=this.captureCanvas.toDataURL();u.src=n,this.imgSrcAry.push({src:n,name:t,uname:this.statusName}),this.showFirstImg()}}catch(e){console.error("Spector can not capture the visual state: "+e)}}showFirstImg(){const e=this.imgSrcAry[0];this.show(e)}show(e){this.curShowImg=e;const{src:t,name:n,uname:a}=e;this.updateStatusContainer(n,a),this.img.src=t,this.img.alt=n,this.img.title=n,this.img.style.width="200px"}showImgByName(e=""){const t=[];this.imgSrcAry.map(((n,a)=>{const{uname:r}=n;r===e&&t.push(a+1)})),console.log(" same name idx ",t),console.log(" use showImgByIndex jump ")}showImgByIndex(e){const t=Math.min(this.imgSrcAry.length-1,e-1),n=Math.max(0,t),a=this.imgSrcAry[n];this.show(a)}showNextImg(){if(this.imgFilterAry.length>0){let e=this.imgFilterAry.indexOf(this.curShowImg),t=-1;const n=this.imgFilterAry[e+1];return t=this.imgSrcAry.indexOf(n),void this.showImgByIndex(t)}let e=-1;e=this.imgSrcAry.indexOf(this.curShowImg);let t=Math.min(this.imgSrcAry.length-1,e+1);e===t&&(t=0);const n=this.imgSrcAry[t];this.show(n)}showPrevImg(){if(this.imgFilterAry.length>0){const e=this.imgFilterAry.indexOf(this.curShowImg)<0?this.imgFilterAry.length:this.imgFilterAry.indexOf(this.curShowImg);let t=-1;const n=this.imgFilterAry[e-1];return t=this.imgSrcAry.indexOf(n),void this.showImgByIndex(t)}let e=-1;e=this.imgSrcAry.indexOf(this.curShowImg);let t=Math.max(0,e-1);e===t&&(t=this.imgSrcAry.length-1);const n=this.imgSrcAry[t];this.show(n)}getSpectorData(e){if(e)return{__SPECTOR_Object_TAG:bi.getWebGlObjectTag(e)||this.options.tagWebGlObject(e),__SPECTOR_Object_CustomData:e.__SPECTOR_Object_CustomData,__SPECTOR_Metadata:e.__SPECTOR_Metadata}}clear(){this.imgSrcAry=[],this.updateStatusContainer()}getThis(){return console.log("ThisObj 右键保存成全局变量 从命令行调用接口",this),this}updateFilter(e=""){this.imgFilterAry=this.imgSrcAry.map((t=>{let n=!1;const a=t.name.toLowerCase(),r=t.uname.toLowerCase();if(a.indexOf(e.toLowerCase())>-1&&(n=!0),r.indexOf(e.toLowerCase())>-1&&(n=!0),n)return t})).filter((e=>void 0!==e)),console.log(`只关注属性值包含" ${e} "的img  filter结果: ${this.imgFilterAry.length}`)}resetFilter(){this.imgFilterAry=[]}saveImg(e=0){const t=this.imgSrcAry[e];if(t){let n=document.createElement("a");n.href=t.src,n.download=`${e}.png`,document.body.appendChild(n),n.click(),document.body.removeChild(n),n=void 0}}getDepthState(){if(void 0!==this.depthState)return;const e={DEPTH_TEST:Oi.DEPTH_TEST,DEPTH_WRITEMASK:Oi.DEPTH_WRITEMASK,DEPTH_RANGE:Oi.DEPTH_RANGE,DEPTH_FUNC:Oi.DEPTH_FUNC},t={};Object.keys(e).map((n=>{const a=e[n],r=this.context.getParameter(a.value);if(1===r)t[a.name]="ONE";else if(0===r)t[a.name]="ZERO";else{const e=xi[r]&&xi[r].name||r;e instanceof Float32Array?t[a.name]=e.toString():t[a.name]=e}})),console.log(" depth result ",t),this.depthState=t}getBlendState(){if(void 0!==this.blendState)return;const e={BLEND:Oi.BLEND,BLEND_COLOR:Oi.BLEND_COLOR,BLEND_DST_ALPHA:Oi.BLEND_DST_ALPHA,BLEND_DST_RGB:Oi.BLEND_DST_RGB,BLEND_EQUATION_ALPHA:Oi.BLEND_EQUATION_ALPHA,BLEND_EQUATION_RGB:Oi.BLEND_EQUATION_RGB,BLEND_SRC_ALPHA:Oi.BLEND_SRC_ALPHA,BLEND_SRC_RGB:Oi.BLEND_SRC_RGB},t={};Object.keys(e).map((n=>{const a=e[n],r=this.context.getParameter(a.value);if(1===r)t[a.name]="ONE";else if(0===r)t[a.name]="ZERO";else{const e=xi[r]&&xi[r].name||r;e instanceof Float32Array?t[a.name]=e.toString():t[a.name]=e}})),this.blendState=t}showBlendState(){const e=this.blendState;if(e){let t="BlendState:\n            ";Object.keys(e).map((n=>{t+=`\n${n}: ${e[n]}`}));const n=document.getElementById(`${this.idPrefix}source_container`);this.depthState&&(t+="\n\nDepthState:\n                ",Object.keys(this.depthState).map((e=>{t+=`\n${e}: ${this.depthState[e]}`}))),this.showShaderContainer(),n.innerHTML=t}}}Di.captureBaseSize=256;const yi=v,Gi=_;var wi=function(){const t=document.getElementById("webgl"),n=t.getContext("webgl2"),a=(new vr(t,n),new Di({context:n,contextVersion:2},"right-bottom")),r=new Di({context:n,contextVersion:2},"right-mid"),i=new Di({context:n,contextVersion:2},"right-top");console.log(a,i),n.enable(n.BLEND),n.depthMask(!1),n.disable(n.CULL_FACE),n.getExtension("EXT_color_buffer_float")||(console.error("FLOAT color buffer not available"),document.body.innerHTML="This example requires EXT_color_buffer_float which is unavailable on this system.");var o=new Array(32),s=new Float32Array(128),c=new Float32Array(512);const u=e=>{const t=e%3;return 0===t?[1,0,0]:1===t?[0,1,0]:2===t?[0,0,1]:[1,0,0]};for(var l=0;l<32;++l){var E=2*Math.PI*(l%8)/8,m=.6*Math.sin(E),_=Math.floor(l/8)/2-.75,d=.6*Math.cos(E);o[l]={scale:[.8,.8,.8],rotate:[0,0,0],translate:[m,_,d],modelMatrix:yi.identity()};const e=u(l);s.set([...e,.5],4*l)}var T=Rn(n,[e(gi),e(Ni)]).program;const A=Rn(n,[e(Li),e(Bi)]).program;var R=Rn(n,[e(Li),e(Mi)]).program,p=n.getUniformBlockIndex(T,"SceneUniforms");n.uniformBlockBinding(T,p,0);var h=n.getUniformLocation(T,"uTexture"),f=(n.getUniformLocation(T,"uModel"),n.getUniformLocation(T,"uDepth")),C=n.getUniformLocation(T,"uFrontColor"),F=n.getUniformLocation(A,"uFrontColor"),v=n.getUniformLocation(A,"uBackColor"),S=n.getUniformLocation(R,"uBackColor");const N=[];var I=[n.createFramebuffer(),n.createFramebuffer()],g=[n.createFramebuffer(),n.createFramebuffer()],B=n.createFramebuffer();B.__SPECTOR_Metadata={name:"blendBackBuffer"};for(let e=0;e<2;e++){I[e].__SPECTOR_Metadata={name:"allBuffer"+e},n.bindFramebuffer(n.FRAMEBUFFER,I[e]);let t=3*e,a=n.createTexture();a&&N.push(a),a.__SPECTOR_Metadata={name:"depthTexture"+(0+t)},n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,a),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texImage2D(n.TEXTURE_2D,0,n.RG32F,n.drawingBufferWidth,n.drawingBufferHeight,0,n.RG,n.FLOAT,null),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,a,0);let r=n.createTexture();r.__SPECTOR_Metadata={name:"frontColorTexture"+(1+t)},r&&N.push(r),n.activeTexture(n.TEXTURE1+t),n.bindTexture(n.TEXTURE_2D,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texImage2D(n.TEXTURE_2D,0,n.RGBA16F,n.drawingBufferWidth,n.drawingBufferHeight,0,n.RGBA,n.HALF_FLOAT,null),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT1,n.TEXTURE_2D,r,0);let i=n.createTexture();i.__SPECTOR_Metadata={name:"backColorTexture"+(2+t)},i&&N.push(i),n.activeTexture(n.TEXTURE2+t),n.bindTexture(n.TEXTURE_2D,i),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texImage2D(n.TEXTURE_2D,0,n.RGBA16F,n.drawingBufferWidth,n.drawingBufferHeight,0,n.RGBA,n.HALF_FLOAT,null),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT2,n.TEXTURE_2D,i,0);g[e].__SPECTOR_Metadata={name:"colorBuffer"+e},n.bindFramebuffer(n.FRAMEBUFFER,g[e]),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,r,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT1,n.TEXTURE_2D,i,0)}n.bindFramebuffer(n.FRAMEBUFFER,B);var M=n.createTexture();M.__SPECTOR_Metadata={name:"blendBackTexture"},M&&N.push(M),n.activeTexture(n.TEXTURE6),n.bindTexture(n.TEXTURE_2D,M),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texImage2D(n.TEXTURE_2D,0,n.RGBA16F,n.drawingBufferWidth,n.drawingBufferHeight,0,n.RGBA,n.HALF_FLOAT,null),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,M,0),n.bindFramebuffer(n.FRAMEBUFFER,null);var L=Fr({radius:.5});L.position.length,console.log(" sphere ---- ",L);var O=n.createVertexArray();n.bindVertexArray(O);var U=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,U),n.bufferData(n.ARRAY_BUFFER,L.position,n.STATIC_DRAW),n.vertexAttribPointer(0,3,n.FLOAT,!1,0,0),n.enableVertexAttribArray(0);var x=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,x),n.bufferData(n.ARRAY_BUFFER,L.texcoord,n.STATIC_DRAW),n.vertexAttribPointer(1,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(1);var P=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,P),n.bufferData(n.ARRAY_BUFFER,L.normal,n.STATIC_DRAW),n.vertexAttribPointer(2,3,n.FLOAT,!1,0,0),n.enableVertexAttribArray(2);var b=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,b),n.bufferData(n.ARRAY_BUFFER,s,n.STATIC_DRAW),n.vertexAttribPointer(3,4,n.FLOAT,!1,0,0),n.vertexAttribDivisor(3,1),n.enableVertexAttribArray(3);var D=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,D),n.bufferData(n.ARRAY_BUFFER,c,n.DYNAMIC_DRAW),n.vertexAttribPointer(4,4,n.FLOAT,!1,64,0),n.vertexAttribPointer(5,4,n.FLOAT,!1,64,16),n.vertexAttribPointer(6,4,n.FLOAT,!1,64,32),n.vertexAttribPointer(7,4,n.FLOAT,!1,64,48),n.vertexAttribDivisor(4,1),n.vertexAttribDivisor(5,1),n.vertexAttribDivisor(6,1),n.vertexAttribDivisor(7,1),n.enableVertexAttribArray(4),n.enableVertexAttribArray(5),n.enableVertexAttribArray(6),n.enableVertexAttribArray(7);var y=n.createBuffer();n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,y),n.bufferData(n.ELEMENT_ARRAY_BUFFER,L.indices,n.STATIC_DRAW);var G=n.createVertexArray();n.bindVertexArray(G);var w=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,w),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,1,-1,-1,1,-1,-1,1,1,-1,1,1]),n.STATIC_DRAW),n.vertexAttribPointer(0,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(0);var X=yi.perspective(Math.PI/2,t.width/t.height,.1,10),W=Gi.create(0,.8,2),V=yi.lookAt(W,Gi.create(0,0,0),Gi.create(0,1,0));const H=yi.inverse(V);var Y=yi.multiply(X,H),k=Gi.create(1,1,2),K=new Float32Array(24);K.set(Y),K.set(W,16),K.set(k,20);var z=n.createBuffer();n.bindBufferBase(n.UNIFORM_BUFFER,0,z),n.bufferData(n.UNIFORM_BUFFER,K,n.STATIC_DRAW);var j=new Image;j.onload=function(){console.log("image load succ ");var e=n.createTexture();e.__SPECTOR_Metadata={name:"imageTexture "},e&&N.push(e),n.activeTexture(n.TEXTURE9),n.bindTexture(n.TEXTURE_2D,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.REPEAT),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,1);var t=t=Math.floor(Math.log2(Math.max(this.width,this.height)))+1;n.texStorage2D(n.TEXTURE_2D,t,n.RGBA8,j.width,j.height),n.texSubImage2D(n.TEXTURE_2D,0,0,0,j.width,j.height,n.RGBA,n.UNSIGNED_BYTE,j),n.generateMipmap(n.TEXTURE_2D),n.useProgram(A),n.uniform1i(v,6),n.useProgram(T),n.uniform1i(h,9);var s=yi.identity(),u=-99999;!function(){n.bindFramebuffer(n.DRAW_FRAMEBUFFER,B),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.bindFramebuffer(n.FRAMEBUFFER,I[0]),n.drawBuffers([n.COLOR_ATTACHMENT0]),n.clearColor(u,u,0,0),n.clear(n.COLOR_BUFFER_BIT),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,I[1]),n.clearColor(-0,1,0,0),n.clear(n.COLOR_BUFFER_BIT),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,g[0]),n.drawBuffers([n.COLOR_ATTACHMENT0,n.COLOR_ATTACHMENT1]),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,g[1]),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,I[0]),n.drawBuffers([n.COLOR_ATTACHMENT0]),n.blendEquation(n.MAX),n.useProgram(T),n.uniform1i(f,3),n.uniform1i(C,4),n.bindVertexArray(O);for(var e=0,t=o.length;e<t;++e)o[e].rotate[1]+=.002,Cr(o[e].modelMatrix,o[e].translate,void 0,o[e].scale),yi.rotationY(o[e].rotate[1],s),yi.multiply(s,o[e].modelMatrix,o[e].modelMatrix),c.set(o[e].modelMatrix,16*e);let l,E,m,_;n.bindBuffer(n.ARRAY_BUFFER,D),n.bufferSubData(n.ARRAY_BUFFER,0,c),n.drawElementsInstanced(n.TRIANGLES,L.indices.length,n.UNSIGNED_SHORT,0,o.length);let d=0;for(let e=0;e<2;e++)l=e%2,E=1-l,d+=1,n.bindFramebuffer(n.FRAMEBUFFER,I[E]),n.drawBuffers([n.COLOR_ATTACHMENT0]),n.clearColor(u,u,0,0),n.clear(n.COLOR_BUFFER_BIT),n.bindFramebuffer(n.FRAMEBUFFER,g[E]),n.drawBuffers([n.COLOR_ATTACHMENT0,n.COLOR_ATTACHMENT1]),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.bindFramebuffer(n.FRAMEBUFFER,I[E]),n.drawBuffers([n.COLOR_ATTACHMENT0,n.COLOR_ATTACHMENT1,n.COLOR_ATTACHMENT2]),n.blendEquation(n.MAX),m=3*l,n.useProgram(T),n.uniform1i(f,m),n.uniform1i(C,m+1),n.bindVertexArray(O),n.drawElementsInstanced(n.TRIANGLES,L.indices.length,n.UNSIGNED_SHORT,0,o.length),r.readFromContext("allBufferFbo_"+E),_=3*E,n.bindFramebuffer(n.FRAMEBUFFER,B),n.blendEquation(n.FUNC_ADD),n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.useProgram(R),n.uniform1i(S,_+2),n.bindVertexArray(G),n.drawArrays(n.TRIANGLES,0,6),console.log(" one time "),i.readFromContext("blendBackFbo");n.bindFramebuffer(n.FRAMEBUFFER,null),n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),n.useProgram(A),n.uniform1i(F,_+1),n.bindVertexArray(G),n.drawArrays(n.TRIANGLES,0,6),a.readFromContext("finalFbo")}()},j.src="./resources/khronos_webgl.png"};const Xi=_,Wi=v,Vi=(e,t,n,a)=>{t=t||[0,0,0],n=n||[0,0,0],a=a||[1,1,1];const r=Wi.translation(t),i=Wi.rotationX(n[0]),o=Wi.rotationX(n[1]),s=Wi.rotationX(n[2]),c=Wi.scale(Wi.identity(),a);Wi.multiply(i,c,e),Wi.multiply(o,e,e),Wi.multiply(s,e,e),Wi.multiply(r,e,e)};var Hi=function(){var t=document.getElementById("webgl"),n=t.getContext("webgl2");n||(console.error("WebGL 2 not available"),document.body.innerHTML="This example requires WebGL 2 which is unavailable on this system."),n.clearColor(0,0,0,1),n.enable(n.DEPTH_TEST),n.depthFunc(n.LEQUAL),n.blendFunc(n.ONE,n.ONE),n.getExtension("EXT_color_buffer_float")||(console.error("FLOAT color buffer not available"),document.body.innerHTML="This example requires EXT_color_buffer_float which is unavailable on this system.");const a=Rn(n,[e("\n#version 300 es\n#define GLSLIFY 1\n\nlayout(std140, column_major) uniform;\n\nlayout(location = 0) in vec4 aPosition;\nlayout(location = 1) in vec3 aNormal;\nlayout(location = 2) in vec4 aUV;\n\nuniform Matrices {\n  mat4 uModelMatrix;\n  mat4 uMVP;\n};\n\nout vec4 vPosition;\nout vec4 vNormal;\nout vec4 vUV;\n\nvoid main() {\n  vPosition = uModelMatrix * aPosition;\n  vNormal = uModelMatrix * vec4(aNormal, 0.0);\n  vUV = aUV;\n  gl_Position = uMVP * aPosition;\n}\n"),e("\n        #version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\nin vec4 vPosition;\nin vec4 vNormal;\nin vec4 vUV;\n\nlayout(location = 0) out vec4 fragPosition;\nlayout(location = 1) out vec4 fragNormal;\nlayout(location = 2) out vec4 fragUV;\n\nvoid main() {\n  fragPosition = vPosition;\n  fragNormal = vec4(normalize(vNormal.xyz), 1.0);\n  fragUV = vUV;\n}\n")]).program;var r=n.getUniformBlockIndex(a,"Matrices");n.uniformBlockBinding(a,r,0);var i=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,i),n.activeTexture(n.TEXTURE0);var o=n.createTexture();n.bindTexture(n.TEXTURE_2D,o),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texStorage2D(n.TEXTURE_2D,1,n.RGBA16F,n.drawingBufferWidth,n.drawingBufferHeight),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,o,0);var s=n.createTexture();n.bindTexture(n.TEXTURE_2D,s),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texStorage2D(n.TEXTURE_2D,1,n.RGBA16F,n.drawingBufferWidth,n.drawingBufferHeight),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT1,n.TEXTURE_2D,s,0);var c=n.createTexture();n.bindTexture(n.TEXTURE_2D,c),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texStorage2D(n.TEXTURE_2D,1,n.RG16F,n.drawingBufferWidth,n.drawingBufferHeight),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT2,n.TEXTURE_2D,c,0);var u=n.createTexture();n.bindTexture(n.TEXTURE_2D,u),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texStorage2D(n.TEXTURE_2D,1,n.DEPTH_COMPONENT16,n.drawingBufferWidth,n.drawingBufferHeight),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,u,0),n.drawBuffers([n.COLOR_ATTACHMENT0,n.COLOR_ATTACHMENT1,n.COLOR_ATTACHMENT2]),n.bindFramebuffer(n.FRAMEBUFFER,null);const l=Rn(n,[e("\n        #version 300 es\n#define GLSLIFY 1\n\nlayout(std140, column_major) uniform;\n\nlayout(location = 0) in vec4 aPosition;\n\nuniform LightUniforms {\n  mat4 mvp;\n  vec4 position;\n  vec4 color;\n} uLight;\n\nvoid main() {\n  gl_Position = uLight.mvp * aPosition;\n}\n"),e("\n        #version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\nuniform LightUniforms {\n  mat4 mvp;\n  vec4 position;\n  vec4 color;\n} uLight;\n\nuniform vec3 uEyePosition;\n\nuniform sampler2D uPositionBuffer;\nuniform sampler2D uNormalBuffer;\nuniform sampler2D uUVBuffer;\nuniform sampler2D uTextureMap;\n\nout vec4 fragColor;\n\nvoid main() {\n  ivec2 fragCoord = ivec2(gl_FragCoord.xy);\n  vec3 position = texelFetch(uPositionBuffer, fragCoord, 0).xyz;\n  vec3 normal = normalize(texelFetch(uNormalBuffer, fragCoord, 0).xyz);\n  vec2 uv = texelFetch(uUVBuffer, fragCoord, 0).xy;\n\n  vec4 baseColor = texture(uTextureMap, uv);\n\n  vec3 eyeDirection = normalize(uEyePosition - position);\n  vec3 lightVec = uLight.position.xyz - position;\n  float attenuation = 1.0 - length(lightVec);\n  vec3 lightDirection = normalize(lightVec);\n  vec3 reflectionDirection = reflect(-lightDirection, normal);\n  float nDotL = max(dot(lightDirection, normal), 0.0);\n  vec3 diffuse = nDotL * uLight.color.rgb;\n  float ambient = 0.1;\n  vec3 specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 20.0) * uLight.color.rgb;\n\n  fragColor = vec4(attenuation * (ambient + diffuse + specular) * baseColor.rgb, baseColor.a);\n}\n")]).program;var E=n.getUniformBlockIndex(l,"LightUniforms");n.uniformBlockBinding(l,E,0);var m=n.getUniformLocation(l,"uEyePosition"),_=n.getUniformLocation(l,"uPositionBuffer"),d=n.getUniformLocation(l,"uNormalBuffer"),T=n.getUniformLocation(l,"uUVBuffer"),A=n.getUniformLocation(l,"uTextureMap"),R=n.createVertexArray();n.bindVertexArray(R);var p=(e=>{var t,n,a,r=(e=e||{}).dimensions||[1,1,1],i=e.position||[-r[0]/2,-r[1]/2,-r[2]/2],o=i[0],s=i[1],c=i[2],u=r[0],l=r[1],E=r[2],m={x:o,y:s,z:c+E},_={x:o+u,y:s,z:c+E},d={x:o,y:s+l,z:c+E},T={x:o+u,y:s+l,z:c+E},A={x:o,y:s,z:c},R={x:o+u,y:s,z:c},p={x:o,y:s+l,z:c},h={x:o+u,y:s+l,z:c},f=new Float32Array([m.x,m.y,m.z,_.x,_.y,_.z,d.x,d.y,d.z,d.x,d.y,d.z,_.x,_.y,_.z,T.x,T.y,T.z,_.x,_.y,_.z,R.x,R.y,R.z,T.x,T.y,T.z,T.x,T.y,T.z,R.x,R.y,R.z,h.x,h.y,h.z,_.x,R.y,R.z,A.x,A.y,A.z,h.x,h.y,h.z,h.x,h.y,h.z,A.x,A.y,A.z,p.x,p.y,p.z,A.x,A.y,A.z,m.x,m.y,m.z,p.x,p.y,p.z,p.x,p.y,p.z,m.x,m.y,m.z,d.x,d.y,d.z,d.x,d.y,d.z,T.x,T.y,T.z,p.x,p.y,p.z,p.x,p.y,p.z,T.x,T.y,T.z,h.x,h.y,h.z,A.x,A.y,A.z,R.x,R.y,R.z,m.x,m.y,m.z,m.x,m.y,m.z,R.x,R.y,R.z,_.x,_.y,_.z]),C=new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1]),F=new Float32Array(f.length);for(t=0,n=f.length/3;t<n;t++)F[a=3*t]=1===parseInt(t/6,10)?1:3===parseInt(t/6,10)?-1:0,F[a+1]=4===parseInt(t/6,10)?1:5===parseInt(t/6,10)?-1:0,F[a+2]=0===parseInt(t/6,10)?1:2===parseInt(t/6,10)?-1:0;return{position:f,normal:F,texcoord:C}})();console.log(" ---- box --- vertex ",p);var h=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,h),n.bufferData(n.ARRAY_BUFFER,p.positions,n.STATIC_DRAW),n.vertexAttribPointer(0,3,n.FLOAT,!1,0,0),n.enableVertexAttribArray(0);var f=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,f),n.bufferData(n.ARRAY_BUFFER,p.normals,n.STATIC_DRAW),n.vertexAttribPointer(1,3,n.FLOAT,!1,0,0),n.enableVertexAttribArray(1);var C=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,C),n.bufferData(n.ARRAY_BUFFER,p.uvs,n.STATIC_DRAW),n.vertexAttribPointer(2,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(2);var F=n.createVertexArray();n.bindVertexArray(F);var v=p.positions.length/3,S=Fr();console.log(" sphere --- vertex",S),h=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,h),n.bufferData(n.ARRAY_BUFFER,S.positions,n.STATIC_DRAW),n.vertexAttribPointer(0,3,n.FLOAT,!1,0,0),n.enableVertexAttribArray(0);var N=n.createBuffer();n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,N),n.bufferData(n.ELEMENT_ARRAY_BUFFER,S.indices,n.STATIC_DRAW);var I=S.indices.length;n.bindVertexArray(null);const g=Wi.perspective(Math.PI/3,1,.1,100);var B=Xi.create(1,1,1);const M=Wi.lookAt(B,Xi.create(0,0,0),Xi.create(0,1,0)),L=Wi.inverse(M),O=Wi.multiply(g,L);var U=[{scale:[1,1,1],rotate:[0,0,0],translate:[0,0,0],modelMatrix:Wi.identity(),mvpMatrix:Wi.identity()},{scale:[.1,.1,.1],rotate:[0,0,Math.PI/3],translate:[.8,.8,.4],modelMatrix:Wi.identity(),mvpMatrix:Wi.identity()}],x=new Float32Array(32),P=n.createBuffer();n.bindBufferBase(n.UNIFORM_BUFFER,0,P),n.bufferData(n.UNIFORM_BUFFER,128,n.DYNAMIC_DRAW);for(var b=[{position:Xi.create(0,1,.5),color:Xi.create(.8,0,0),uniformData:new Float32Array(24),uniformBuffer:n.createBuffer()},{position:Xi.create(1,1,.5),color:Xi.create(0,0,.8),uniformData:new Float32Array(24),uniformBuffer:n.createBuffer()},{position:Xi.create(1,0,.5),color:Xi.create(0,.8,0),uniformData:new Float32Array(24),uniformBuffer:n.createBuffer()},{position:Xi.create(.5,0,1),color:Xi.create(0,.8,.8),uniformData:new Float32Array(24),uniformBuffer:n.createBuffer()}],D=Wi.identity(),y=0,G=b.length;y<G;++y)Vi(D,b[y].position),Wi.multiply(O,D,D),b[y].uniformData.set(D),b[y].uniformData.set(b[y].position,16),b[y].uniformData.set(b[y].color,20),n.bindBufferBase(n.UNIFORM_BUFFER,0,b[y].uniformBuffer),n.bufferData(n.UNIFORM_BUFFER,b[y].uniformData,n.STATIC_DRAW);var w=new Image;window.spector.startCapture(t,1e3),w.onload=function(){var e=n.createTexture();n.bindTexture(n.TEXTURE_2D,e),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.REPEAT);var t=t=Math.floor(Math.log2(Math.max(this.width,this.height)))+1;console.log(" --- levels --- ",t),n.texStorage2D(n.TEXTURE_2D,t,n.RGBA8,w.width,w.height),n.texSubImage2D(n.TEXTURE_2D,0,0,0,w.width,w.height,n.RGBA,n.UNSIGNED_BYTE,w),n.generateMipmap(n.TEXTURE_2D),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,o),n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,s),n.activeTexture(n.TEXTURE2),n.bindTexture(n.TEXTURE_2D,c),n.activeTexture(n.TEXTURE3),n.bindTexture(n.TEXTURE_2D,e),n.useProgram(l),n.uniform3fv(m,B),n.uniform1i(_,0),n.uniform1i(d,1),n.uniform1i(T,2),n.uniform1i(A,3),requestAnimationFrame((function e(){n.bindFramebuffer(n.FRAMEBUFFER,i),n.useProgram(a),n.bindVertexArray(R),n.depthMask(!0),n.disable(n.BLEND),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT);for(var t=0,r=U.length;t<r;++t)U[t].rotate[0]+=.01,U[t].rotate[1]+=.02,Vi(U[t].modelMatrix,U[t].translate,U[t].rotate,U[t].scale),Wi.multiply(O,U[t].modelMatrix,U[t].mvpMatrix),x.set(U[t].modelMatrix),x.set(U[t].mvpMatrix,16),n.bindBufferBase(n.UNIFORM_BUFFER,0,P),n.bufferSubData(n.UNIFORM_BUFFER,0,x),n.drawArrays(n.TRIANGLES,0,v);for(n.bindFramebuffer(n.FRAMEBUFFER,null),n.useProgram(l),n.bindVertexArray(F),n.depthMask(!1),n.enable(n.BLEND),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),t=0,r=b.length;t<r;++t)n.bindBufferBase(n.UNIFORM_BUFFER,0,b[t].uniformBuffer),n.drawElements(n.TRIANGLES,I,n.UNSIGNED_SHORT,0);requestAnimationFrame(e)}))},w.src="./resources/khronos_webgl.png"};var Yi={};t(Yi,"EmbeddedFrontend",(()=>Ac)),t(Yi,"Spector",(()=>Rc));class ki{static isBuildableProgram(e){return!!e&&!!e[this.rebuildProgramFunctionName]}static rebuildProgram(e,t,n,a,r){this.isBuildableProgram(e)&&e[this.rebuildProgramFunctionName](t,n,a,r)}}let Ki;ki.rebuildProgramFunctionName="__SPECTOR_rebuildProgram",function(e){e[e.noLog=0]="noLog",e[e.error=1]="error",e[e.warning=2]="warning",e[e.info=3]="info"}(Ki||(Ki={}));class zi{static error(e,...t){this.level>0&&console.error(e,t)}static warn(e,...t){this.level>1&&console.warn(e,t)}static info(e,...t){this.level>2&&console.log(e,t)}}zi.level=Ki.warning;class ji{add(e,t){return this.counter++,t&&(e=e.bind(t)),this.callbacks[this.counter]=e,this.counter}remove(e){delete this.callbacks[e]}clear(){this.callbacks={}}trigger(e){for(const t in this.callbacks)this.callbacks.hasOwnProperty(t)&&this.callbacks[t](e)}constructor(){this.callbacks=[],this.counter=-1}}class Zi{constructor(){if(window.performance&&window.performance.now)this.nowFunction=this.dateBasedPerformanceNow.bind(this);else{const e=new Date;this.nowFunction=e.getTime.bind(e)}}dateBasedPerformanceNow(){return performance.timing.navigationStart+performance.now()}static get now(){return Zi.instance.nowFunction()}}Zi.instance=new Zi;class qi{constructor(e){this.options=e}appendAnalysis(e){e.analyses=e.analyses||[];const t=this.getAnalysis(e);e.analyses.push(t)}getAnalysis(e){const t={analyserName:this.analyserName};return this.appendToAnalysis(e,t),t}}class Qi extends qi{get analyserName(){return Qi.analyserName}appendToAnalysis(e,t){if(!e.commands)return;const n={};for(const t of e.commands)n[t.name]=n[t.name]||0,n[t.name]++;const a=Object.keys(n).map((e=>[e,n[e]]));a.sort(((e,t)=>{const n=t[1]-e[1];return 0===n?e[0].localeCompare(t[0]):n}));for(const e of a){t[e[0]]=e[1]}}}Qi.analyserName="Commands";const $i=["drawArrays","drawElements","drawArraysInstanced","drawArraysInstancedANGLE","drawElementsInstanced","drawElementsInstancedANGLE","drawRangeElements","multiDrawArraysInstancedBaseInstanceWEBGL","multiDrawElementsInstancedBaseVertexBaseInstanceWEBGL"];class Ji extends qi{get analyserName(){return Ji.analyserName}appendToAnalysis(e,t){if(e.commands){t.total=e.commands.length,t.draw=0,t.clear=0;for(const n of e.commands)"clear"===n.name?t.clear++:$i.indexOf(n.name)>-1&&t.draw++}}}Ji.analyserName="CommandsSummary";class eo{static isWebGlConstant(e){return null!==no[e]&&void 0!==no[e]}static stringifyWebGlConstant(e,t){if(0===e){const e=this.zeroMeaningByCommand[t];return e||"0"}if(1===e){const e=this.oneMeaningByCommand[t];return e||"1"}const n=no[e];return n?n.name:e+""}}eo.DEPTH_BUFFER_BIT={name:"DEPTH_BUFFER_BIT",value:256,description:"Passed to clear to clear the current depth buffer."},eo.STENCIL_BUFFER_BIT={name:"STENCIL_BUFFER_BIT",value:1024,description:"Passed to clear to clear the current stencil buffer."},eo.COLOR_BUFFER_BIT={name:"COLOR_BUFFER_BIT",value:16384,description:"Passed to clear to clear the current color buffer."},eo.POINTS={name:"POINTS",value:0,description:"Passed to drawElements or drawArrays to draw single points."},eo.LINES={name:"LINES",value:1,description:"Passed to drawElements or drawArrays to draw lines. Each vertex connects to the one after it."},eo.LINE_LOOP={name:"LINE_LOOP",value:2,description:"Passed to drawElements or drawArrays to draw lines. Each set of two vertices is treated as a separate line segment."},eo.LINE_STRIP={name:"LINE_STRIP",value:3,description:"Passed to drawElements or drawArrays to draw a connected group of line segments from the first vertex to the last."},eo.TRIANGLES={name:"TRIANGLES",value:4,description:"Passed to drawElements or drawArrays to draw triangles. Each set of three vertices creates a separate triangle."},eo.TRIANGLE_STRIP={name:"TRIANGLE_STRIP",value:5,description:"Passed to drawElements or drawArrays to draw a connected group of triangles."},eo.TRIANGLE_FAN={name:"TRIANGLE_FAN",value:6,description:"Passed to drawElements or drawArrays to draw a connected group of triangles. Each vertex connects to the previous and the first vertex in the fan."},eo.ZERO={name:"ZERO",value:0,description:"Passed to blendFunc or blendFuncSeparate to turn off a component."},eo.ONE={name:"ONE",value:1,description:"Passed to blendFunc or blendFuncSeparate to turn on a component."},eo.SRC_COLOR={name:"SRC_COLOR",value:768,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by the source elements color."},eo.ONE_MINUS_SRC_COLOR={name:"ONE_MINUS_SRC_COLOR",value:769,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the source elements color."},eo.SRC_ALPHA={name:"SRC_ALPHA",value:770,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by the source's alpha."},eo.ONE_MINUS_SRC_ALPHA={name:"ONE_MINUS_SRC_ALPHA",value:771,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the source's alpha."},eo.DST_ALPHA={name:"DST_ALPHA",value:772,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by the destination's alpha."},eo.ONE_MINUS_DST_ALPHA={name:"ONE_MINUS_DST_ALPHA",value:773,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the destination's alpha."},eo.DST_COLOR={name:"DST_COLOR",value:774,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by the destination's color."},eo.ONE_MINUS_DST_COLOR={name:"ONE_MINUS_DST_COLOR",value:775,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the destination's color."},eo.SRC_ALPHA_SATURATE={name:"SRC_ALPHA_SATURATE",value:776,description:"Passed to blendFunc or blendFuncSeparate to multiply a component by the minimum of source's alpha or one minus the destination's alpha."},eo.CONSTANT_COLOR={name:"CONSTANT_COLOR",value:32769,description:"Passed to blendFunc or blendFuncSeparate to specify a constant color blend function."},eo.ONE_MINUS_CONSTANT_COLOR={name:"ONE_MINUS_CONSTANT_COLOR",value:32770,description:"Passed to blendFunc or blendFuncSeparate to specify one minus a constant color blend function."},eo.CONSTANT_ALPHA={name:"CONSTANT_ALPHA",value:32771,description:"Passed to blendFunc or blendFuncSeparate to specify a constant alpha blend function."},eo.ONE_MINUS_CONSTANT_ALPHA={name:"ONE_MINUS_CONSTANT_ALPHA",value:32772,description:"Passed to blendFunc or blendFuncSeparate to specify one minus a constant alpha blend function."},eo.FUNC_ADD={name:"FUNC_ADD",value:32774,description:"Passed to blendEquation or blendEquationSeparate to set an addition blend function."},eo.FUNC_SUBSTRACT={name:"FUNC_SUBSTRACT",value:32778,description:"Passed to blendEquation or blendEquationSeparate to specify a subtraction blend function (source - destination)."},eo.FUNC_REVERSE_SUBTRACT={name:"FUNC_REVERSE_SUBTRACT",value:32779,description:"Passed to blendEquation or blendEquationSeparate to specify a reverse subtraction blend function (destination - source)."},eo.BLEND_EQUATION={name:"BLEND_EQUATION",value:32777,description:"Passed to getParameter to get the current RGB blend function."},eo.BLEND_EQUATION_RGB={name:"BLEND_EQUATION_RGB",value:32777,description:"Passed to getParameter to get the current RGB blend function. Same as BLEND_EQUATION"},eo.BLEND_EQUATION_ALPHA={name:"BLEND_EQUATION_ALPHA",value:34877,description:"Passed to getParameter to get the current alpha blend function. Same as BLEND_EQUATION"},eo.BLEND_DST_RGB={name:"BLEND_DST_RGB",value:32968,description:"Passed to getParameter to get the current destination RGB blend function."},eo.BLEND_SRC_RGB={name:"BLEND_SRC_RGB",value:32969,description:"Passed to getParameter to get the current destination RGB blend function."},eo.BLEND_DST_ALPHA={name:"BLEND_DST_ALPHA",value:32970,description:"Passed to getParameter to get the current destination alpha blend function."},eo.BLEND_SRC_ALPHA={name:"BLEND_SRC_ALPHA",value:32971,description:"Passed to getParameter to get the current source alpha blend function."},eo.BLEND_COLOR={name:"BLEND_COLOR",value:32773,description:"Passed to getParameter to return a the current blend color."},eo.ARRAY_BUFFER_BINDING={name:"ARRAY_BUFFER_BINDING",value:34964,description:"Passed to getParameter to get the array buffer binding."},eo.ELEMENT_ARRAY_BUFFER_BINDING={name:"ELEMENT_ARRAY_BUFFER_BINDING",value:34965,description:"Passed to getParameter to get the current element array buffer."},eo.LINE_WIDTH={name:"LINE_WIDTH",value:2849,description:"Passed to getParameter to get the current lineWidth (set by the lineWidth method)."},eo.ALIASED_POINT_SIZE_RANGE={name:"ALIASED_POINT_SIZE_RANGE",value:33901,description:"Passed to getParameter to get the current size of a point drawn with gl.POINTS"},eo.ALIASED_LINE_WIDTH_RANGE={name:"ALIASED_LINE_WIDTH_RANGE",value:33902,description:"Passed to getParameter to get the range of available widths for a line. Returns a length-2 array with the lo value at 0, and hight at 1."},eo.CULL_FACE_MODE={name:"CULL_FACE_MODE",value:2885,description:"Passed to getParameter to get the current value of cullFace. Should return FRONT, BACK, or FRONT_AND_BACK"},eo.FRONT_FACE={name:"FRONT_FACE",value:2886,description:"Passed to getParameter to determine the current value of frontFace. Should return CW or CCW."},eo.DEPTH_RANGE={name:"DEPTH_RANGE",value:2928,description:"Passed to getParameter to return a length-2 array of floats giving the current depth range."},eo.DEPTH_WRITEMASK={name:"DEPTH_WRITEMASK",value:2930,description:"Passed to getParameter to determine if the depth write mask is enabled."},eo.DEPTH_CLEAR_VALUE={name:"DEPTH_CLEAR_VALUE",value:2931,description:"Passed to getParameter to determine the current depth clear value."},eo.DEPTH_FUNC={name:"DEPTH_FUNC",value:2932,description:"Passed to getParameter to get the current depth function. Returns NEVER, ALWAYS, LESS, EQUAL, LEQUAL, GREATER, GEQUAL, or NOTEQUAL."},eo.STENCIL_CLEAR_VALUE={name:"STENCIL_CLEAR_VALUE",value:2961,description:"Passed to getParameter to get the value the stencil will be cleared to."},eo.STENCIL_FUNC={name:"STENCIL_FUNC",value:2962,description:"Passed to getParameter to get the current stencil function. Returns NEVER, ALWAYS, LESS, EQUAL, LEQUAL, GREATER, GEQUAL, or NOTEQUAL."},eo.STENCIL_FAIL={name:"STENCIL_FAIL",value:2964,description:"Passed to getParameter to get the current stencil fail function. Should return KEEP, REPLACE, INCR, DECR, INVERT, INCR_WRAP, or DECR_WRAP."},eo.STENCIL_PASS_DEPTH_FAIL={name:"STENCIL_PASS_DEPTH_FAIL",value:2965,description:"Passed to getParameter to get the current stencil fail function should the depth buffer test fail. Should return KEEP, REPLACE, INCR, DECR, INVERT, INCR_WRAP, or DECR_WRAP."},eo.STENCIL_PASS_DEPTH_PASS={name:"STENCIL_PASS_DEPTH_PASS",value:2966,description:"Passed to getParameter to get the current stencil fail function should the depth buffer test pass. Should return KEEP, REPLACE, INCR, DECR, INVERT, INCR_WRAP, or DECR_WRAP."},eo.STENCIL_REF={name:"STENCIL_REF",value:2967,description:"Passed to getParameter to get the reference value used for stencil tests."},eo.STENCIL_VALUE_MASK={name:"STENCIL_VALUE_MASK",value:2963,description:" "},eo.STENCIL_WRITEMASK={name:"STENCIL_WRITEMASK",value:2968,description:" "},eo.STENCIL_BACK_FUNC={name:"STENCIL_BACK_FUNC",value:34816,description:" "},eo.STENCIL_BACK_FAIL={name:"STENCIL_BACK_FAIL",value:34817,description:" "},eo.STENCIL_BACK_PASS_DEPTH_FAIL={name:"STENCIL_BACK_PASS_DEPTH_FAIL",value:34818,description:" "},eo.STENCIL_BACK_PASS_DEPTH_PASS={name:"STENCIL_BACK_PASS_DEPTH_PASS",value:34819,description:" "},eo.STENCIL_BACK_REF={name:"STENCIL_BACK_REF",value:36003,description:" "},eo.STENCIL_BACK_VALUE_MASK={name:"STENCIL_BACK_VALUE_MASK",value:36004,description:" "},eo.STENCIL_BACK_WRITEMASK={name:"STENCIL_BACK_WRITEMASK",value:36005,description:" "},eo.VIEWPORT={name:"VIEWPORT",value:2978,description:"Returns an Int32Array with four elements for the current viewport dimensions."},eo.SCISSOR_BOX={name:"SCISSOR_BOX",value:3088,description:"Returns an Int32Array with four elements for the current scissor box dimensions."},eo.COLOR_CLEAR_VALUE={name:"COLOR_CLEAR_VALUE",value:3106,description:" "},eo.COLOR_WRITEMASK={name:"COLOR_WRITEMASK",value:3107,description:" "},eo.UNPACK_ALIGNMENT={name:"UNPACK_ALIGNMENT",value:3317,description:" "},eo.PACK_ALIGNMENT={name:"PACK_ALIGNMENT",value:3333,description:" "},eo.MAX_TEXTURE_SIZE={name:"MAX_TEXTURE_SIZE",value:3379,description:" "},eo.MAX_VIEWPORT_DIMS={name:"MAX_VIEWPORT_DIMS",value:3386,description:" "},eo.SUBPIXEL_BITS={name:"SUBPIXEL_BITS",value:3408,description:" "},eo.RED_BITS={name:"RED_BITS",value:3410,description:" "},eo.GREEN_BITS={name:"GREEN_BITS",value:3411,description:" "},eo.BLUE_BITS={name:"BLUE_BITS",value:3412,description:" "},eo.ALPHA_BITS={name:"ALPHA_BITS",value:3413,description:" "},eo.DEPTH_BITS={name:"DEPTH_BITS",value:3414,description:" "},eo.STENCIL_BITS={name:"STENCIL_BITS",value:3415,description:" "},eo.POLYGON_OFFSET_UNITS={name:"POLYGON_OFFSET_UNITS",value:10752,description:" "},eo.POLYGON_OFFSET_FACTOR={name:"POLYGON_OFFSET_FACTOR",value:32824,description:" "},eo.TEXTURE_BINDING_2D={name:"TEXTURE_BINDING_2D",value:32873,description:" "},eo.SAMPLE_BUFFERS={name:"SAMPLE_BUFFERS",value:32936,description:" "},eo.SAMPLES={name:"SAMPLES",value:32937,description:" "},eo.SAMPLE_COVERAGE_VALUE={name:"SAMPLE_COVERAGE_VALUE",value:32938,description:" "},eo.SAMPLE_COVERAGE_INVERT={name:"SAMPLE_COVERAGE_INVERT",value:32939,description:" "},eo.COMPRESSED_TEXTURE_FORMATS={name:"COMPRESSED_TEXTURE_FORMATS",value:34467,description:" "},eo.VENDOR={name:"VENDOR",value:7936,description:" "},eo.RENDERER={name:"RENDERER",value:7937,description:" "},eo.VERSION={name:"VERSION",value:7938,description:" "},eo.IMPLEMENTATION_COLOR_READ_TYPE={name:"IMPLEMENTATION_COLOR_READ_TYPE",value:35738,description:" "},eo.IMPLEMENTATION_COLOR_READ_FORMAT={name:"IMPLEMENTATION_COLOR_READ_FORMAT",value:35739,description:" "},eo.BROWSER_DEFAULT_WEBGL={name:"BROWSER_DEFAULT_WEBGL",value:37444,description:" "},eo.STATIC_DRAW={name:"STATIC_DRAW",value:35044,description:"Passed to bufferData as a hint about whether the contents of the buffer are likely to be used often and not change often."},eo.STREAM_DRAW={name:"STREAM_DRAW",value:35040,description:"Passed to bufferData as a hint about whether the contents of the buffer are likely to not be used often."},eo.DYNAMIC_DRAW={name:"DYNAMIC_DRAW",value:35048,description:"Passed to bufferData as a hint about whether the contents of the buffer are likely to be used often and change often."},eo.ARRAY_BUFFER={name:"ARRAY_BUFFER",value:34962,description:"Passed to bindBuffer or bufferData to specify the type of buffer being used."},eo.ELEMENT_ARRAY_BUFFER={name:"ELEMENT_ARRAY_BUFFER",value:34963,description:"Passed to bindBuffer or bufferData to specify the type of buffer being used."},eo.BUFFER_SIZE={name:"BUFFER_SIZE",value:34660,description:"Passed to getBufferParameter to get a buffer's size."},eo.BUFFER_USAGE={name:"BUFFER_USAGE",value:34661,description:"Passed to getBufferParameter to get the hint for the buffer passed in when it was created."},eo.CURRENT_VERTEX_ATTRIB={name:"CURRENT_VERTEX_ATTRIB",value:34342,description:"Passed to getVertexAttrib to read back the current vertex attribute."},eo.VERTEX_ATTRIB_ARRAY_ENABLED={name:"VERTEX_ATTRIB_ARRAY_ENABLED",value:34338,description:" "},eo.VERTEX_ATTRIB_ARRAY_SIZE={name:"VERTEX_ATTRIB_ARRAY_SIZE",value:34339,description:" "},eo.VERTEX_ATTRIB_ARRAY_STRIDE={name:"VERTEX_ATTRIB_ARRAY_STRIDE",value:34340,description:" "},eo.VERTEX_ATTRIB_ARRAY_TYPE={name:"VERTEX_ATTRIB_ARRAY_TYPE",value:34341,description:" "},eo.VERTEX_ATTRIB_ARRAY_NORMALIZED={name:"VERTEX_ATTRIB_ARRAY_NORMALIZED",value:34922,description:" "},eo.VERTEX_ATTRIB_ARRAY_POINTER={name:"VERTEX_ATTRIB_ARRAY_POINTER",value:34373,description:" "},eo.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING={name:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",value:34975,description:" "},eo.CULL_FACE={name:"CULL_FACE",value:2884,description:"Passed to enable/disable to turn on/off culling. Can also be used with getParameter to find the current culling method."},eo.FRONT={name:"FRONT",value:1028,description:"Passed to cullFace to specify that only front faces should be drawn."},eo.BACK={name:"BACK",value:1029,description:"Passed to cullFace to specify that only back faces should be drawn."},eo.FRONT_AND_BACK={name:"FRONT_AND_BACK",value:1032,description:"Passed to cullFace to specify that front and back faces should be drawn."},eo.BLEND={name:"BLEND",value:3042,description:"Passed to enable/disable to turn on/off blending. Can also be used with getParameter to find the current blending method."},eo.DEPTH_TEST={name:"DEPTH_TEST",value:2929,description:"Passed to enable/disable to turn on/off the depth test. Can also be used with getParameter to query the depth test."},eo.DITHER={name:"DITHER",value:3024,description:"Passed to enable/disable to turn on/off dithering. Can also be used with getParameter to find the current dithering method."},eo.POLYGON_OFFSET_FILL={name:"POLYGON_OFFSET_FILL",value:32823,description:"Passed to enable/disable to turn on/off the polygon offset. Useful for rendering hidden-line images, decals, and or solids with highlighted edges. Can also be used with getParameter to query the scissor test."},eo.SAMPLE_ALPHA_TO_COVERAGE={name:"SAMPLE_ALPHA_TO_COVERAGE",value:32926,description:"Passed to enable/disable to turn on/off the alpha to coverage. Used in multi-sampling alpha channels."},eo.SAMPLE_COVERAGE={name:"SAMPLE_COVERAGE",value:32928,description:"Passed to enable/disable to turn on/off the sample coverage. Used in multi-sampling."},eo.SCISSOR_TEST={name:"SCISSOR_TEST",value:3089,description:"Passed to enable/disable to turn on/off the scissor test. Can also be used with getParameter to query the scissor test."},eo.STENCIL_TEST={name:"STENCIL_TEST",value:2960,description:"Passed to enable/disable to turn on/off the stencil test. Can also be used with getParameter to query the stencil test."},eo.NO_ERROR={name:"NO_ERROR",value:0,description:"Returned from getError."},eo.INVALID_ENUM={name:"INVALID_ENUM",value:1280,description:"Returned from getError."},eo.INVALID_VALUE={name:"INVALID_VALUE",value:1281,description:"Returned from getError."},eo.INVALID_OPERATION={name:"INVALID_OPERATION",value:1282,description:"Returned from getError."},eo.OUT_OF_MEMORY={name:"OUT_OF_MEMORY",value:1285,description:"Returned from getError."},eo.CONTEXT_LOST_WEBGL={name:"CONTEXT_LOST_WEBGL",value:37442,description:"Returned from getError."},eo.CW={name:"CW",value:2304,description:"Passed to frontFace to specify the front face of a polygon is drawn in the clockwise direction"},eo.CCW={name:"CCW",value:2305,description:"Passed to frontFace to specify the front face of a polygon is drawn in the counter clockwise direction"},eo.DONT_CARE={name:"DONT_CARE",value:4352,description:"There is no preference for this behavior."},eo.FASTEST={name:"FASTEST",value:4353,description:"The most efficient behavior should be used."},eo.NICEST={name:"NICEST",value:4354,description:"The most correct or the highest quality option should be used."},eo.GENERATE_MIPMAP_HINT={name:"GENERATE_MIPMAP_HINT",value:33170,description:"Hint for the quality of filtering when generating mipmap images with WebGLRenderingContext.generateMipmap()."},eo.BYTE={name:"BYTE",value:5120,description:" "},eo.UNSIGNED_BYTE={name:"UNSIGNED_BYTE",value:5121,description:" "},eo.SHORT={name:"SHORT",value:5122,description:" "},eo.UNSIGNED_SHORT={name:"UNSIGNED_SHORT",value:5123,description:" "},eo.INT={name:"INT",value:5124,description:" "},eo.UNSIGNED_INT={name:"UNSIGNED_INT",value:5125,description:" "},eo.FLOAT={name:"FLOAT",value:5126,description:" "},eo.DEPTH_COMPONENT={name:"DEPTH_COMPONENT",value:6402,description:" "},eo.ALPHA={name:"ALPHA",value:6406,description:" "},eo.RGB={name:"RGB",value:6407,description:" "},eo.RGBA={name:"RGBA",value:6408,description:" "},eo.LUMINANCE={name:"LUMINANCE",value:6409,description:" "},eo.LUMINANCE_ALPHA={name:"LUMINANCE_ALPHA",value:6410,description:" "},eo.UNSIGNED_SHORT_4_4_4_4={name:"UNSIGNED_SHORT_4_4_4_4",value:32819,description:" "},eo.UNSIGNED_SHORT_5_5_5_1={name:"UNSIGNED_SHORT_5_5_5_1",value:32820,description:" "},eo.UNSIGNED_SHORT_5_6_5={name:"UNSIGNED_SHORT_5_6_5",value:33635,description:" "},eo.FRAGMENT_SHADER={name:"FRAGMENT_SHADER",value:35632,description:"Passed to createShader to define a fragment shader."},eo.VERTEX_SHADER={name:"VERTEX_SHADER",value:35633,description:"Passed to createShader to define a vertex shader"},eo.COMPILE_STATUS={name:"COMPILE_STATUS",value:35713,description:"Passed to getShaderParamter to get the status of the compilation. Returns false if the shader was not compiled. You can then query getShaderInfoLog to find the exact error"},eo.DELETE_STATUS={name:"DELETE_STATUS",value:35712,description:"Passed to getShaderParamter to determine if a shader was deleted via deleteShader. Returns true if it was, false otherwise."},eo.LINK_STATUS={name:"LINK_STATUS",value:35714,description:"Passed to getProgramParameter after calling linkProgram to determine if a program was linked correctly. Returns false if there were errors. Use getProgramInfoLog to find the exact error."},eo.VALIDATE_STATUS={name:"VALIDATE_STATUS",value:35715,description:"Passed to getProgramParameter after calling validateProgram to determine if it is valid. Returns false if errors were found."},eo.ATTACHED_SHADERS={name:"ATTACHED_SHADERS",value:35717,description:"Passed to getProgramParameter after calling attachShader to determine if the shader was attached correctly. Returns false if errors occurred."},eo.ACTIVE_ATTRIBUTES={name:"ACTIVE_ATTRIBUTES",value:35721,description:"Passed to getProgramParameter to get the number of attributes active in a program."},eo.ACTIVE_UNIFORMS={name:"ACTIVE_UNIFORMS",value:35718,description:"Passed to getProgramParamter to get the number of uniforms active in a program."},eo.MAX_VERTEX_ATTRIBS={name:"MAX_VERTEX_ATTRIBS",value:34921,description:" "},eo.MAX_VERTEX_UNIFORM_VECTORS={name:"MAX_VERTEX_UNIFORM_VECTORS",value:36347,description:" "},eo.MAX_VARYING_VECTORS={name:"MAX_VARYING_VECTORS",value:36348,description:" "},eo.MAX_COMBINED_TEXTURE_IMAGE_UNITS={name:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",value:35661,description:" "},eo.MAX_VERTEX_TEXTURE_IMAGE_UNITS={name:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",value:35660,description:" "},eo.MAX_TEXTURE_IMAGE_UNITS={name:"MAX_TEXTURE_IMAGE_UNITS",value:34930,description:"Implementation dependent number of maximum texture units. At least 8."},eo.MAX_FRAGMENT_UNIFORM_VECTORS={name:"MAX_FRAGMENT_UNIFORM_VECTORS",value:36349,description:" "},eo.SHADER_TYPE={name:"SHADER_TYPE",value:35663,description:" "},eo.SHADING_LANGUAGE_VERSION={name:"SHADING_LANGUAGE_VERSION",value:35724,description:" "},eo.CURRENT_PROGRAM={name:"CURRENT_PROGRAM",value:35725,description:" "},eo.NEVER={name:"NEVER",value:512,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will never pass. i.e. Nothing will be drawn."},eo.ALWAYS={name:"ALWAYS",value:519,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will always pass. i.e. Pixels will be drawn in the order they are drawn."},eo.LESS={name:"LESS",value:513,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is less than the stored value."},eo.EQUAL={name:"EQUAL",value:514,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is equals to the stored value."},eo.LEQUAL={name:"LEQUAL",value:515,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is less than or equal to the stored value."},eo.GREATER={name:"GREATER",value:516,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is greater than the stored value."},eo.GEQUAL={name:"GEQUAL",value:518,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is greater than or equal to the stored value."},eo.NOTEQUAL={name:"NOTEQUAL",value:517,description:"Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is not equal to the stored value."},eo.KEEP={name:"KEEP",value:7680,description:" "},eo.REPLACE={name:"REPLACE",value:7681,description:" "},eo.INCR={name:"INCR",value:7682,description:" "},eo.DECR={name:"DECR",value:7683,description:" "},eo.INVERT={name:"INVERT",value:5386,description:" "},eo.INCR_WRAP={name:"INCR_WRAP",value:34055,description:" "},eo.DECR_WRAP={name:"DECR_WRAP",value:34056,description:" "},eo.NEAREST={name:"NEAREST",value:9728,description:" "},eo.LINEAR={name:"LINEAR",value:9729,description:" "},eo.NEAREST_MIPMAP_NEAREST={name:"NEAREST_MIPMAP_NEAREST",value:9984,description:" "},eo.LINEAR_MIPMAP_NEAREST={name:"LINEAR_MIPMAP_NEAREST",value:9985,description:" "},eo.NEAREST_MIPMAP_LINEAR={name:"NEAREST_MIPMAP_LINEAR",value:9986,description:" "},eo.LINEAR_MIPMAP_LINEAR={name:"LINEAR_MIPMAP_LINEAR",value:9987,description:" "},eo.TEXTURE_MAG_FILTER={name:"TEXTURE_MAG_FILTER",value:10240,description:" "},eo.TEXTURE_MIN_FILTER={name:"TEXTURE_MIN_FILTER",value:10241,description:" "},eo.TEXTURE_WRAP_S={name:"TEXTURE_WRAP_S",value:10242,description:" "},eo.TEXTURE_WRAP_T={name:"TEXTURE_WRAP_T",value:10243,description:" "},eo.TEXTURE_2D={name:"TEXTURE_2D",value:3553,description:" "},eo.TEXTURE={name:"TEXTURE",value:5890,description:" "},eo.TEXTURE_CUBE_MAP={name:"TEXTURE_CUBE_MAP",value:34067,description:" "},eo.TEXTURE_BINDING_CUBE_MAP={name:"TEXTURE_BINDING_CUBE_MAP",value:34068,description:" "},eo.TEXTURE_CUBE_MAP_POSITIVE_X={name:"TEXTURE_CUBE_MAP_POSITIVE_X",value:34069,description:" "},eo.TEXTURE_CUBE_MAP_NEGATIVE_X={name:"TEXTURE_CUBE_MAP_NEGATIVE_X",value:34070,description:" "},eo.TEXTURE_CUBE_MAP_POSITIVE_Y={name:"TEXTURE_CUBE_MAP_POSITIVE_Y",value:34071,description:" "},eo.TEXTURE_CUBE_MAP_NEGATIVE_Y={name:"TEXTURE_CUBE_MAP_NEGATIVE_Y",value:34072,description:" "},eo.TEXTURE_CUBE_MAP_POSITIVE_Z={name:"TEXTURE_CUBE_MAP_POSITIVE_Z",value:34073,description:" "},eo.TEXTURE_CUBE_MAP_NEGATIVE_Z={name:"TEXTURE_CUBE_MAP_NEGATIVE_Z",value:34074,description:" "},eo.MAX_CUBE_MAP_TEXTURE_SIZE={name:"MAX_CUBE_MAP_TEXTURE_SIZE",value:34076,description:" "},eo.TEXTURE0={name:"TEXTURE0",value:33984,description:"A texture unit."},eo.TEXTURE1={name:"TEXTURE1",value:33985,description:"A texture unit."},eo.TEXTURE2={name:"TEXTURE2",value:33986,description:"A texture unit."},eo.TEXTURE3={name:"TEXTURE3",value:33987,description:"A texture unit."},eo.TEXTURE4={name:"TEXTURE4",value:33988,description:"A texture unit."},eo.TEXTURE5={name:"TEXTURE5",value:33989,description:"A texture unit."},eo.TEXTURE6={name:"TEXTURE6",value:33990,description:"A texture unit."},eo.TEXTURE7={name:"TEXTURE7",value:33991,description:"A texture unit."},eo.TEXTURE8={name:"TEXTURE8",value:33992,description:"A texture unit."},eo.TEXTURE9={name:"TEXTURE9",value:33993,description:"A texture unit."},eo.TEXTURE10={name:"TEXTURE10",value:33994,description:"A texture unit."},eo.TEXTURE11={name:"TEXTURE11",value:33995,description:"A texture unit."},eo.TEXTURE12={name:"TEXTURE12",value:33996,description:"A texture unit."},eo.TEXTURE13={name:"TEXTURE13",value:33997,description:"A texture unit."},eo.TEXTURE14={name:"TEXTURE14",value:33998,description:"A texture unit."},eo.TEXTURE15={name:"TEXTURE15",value:33999,description:"A texture unit."},eo.TEXTURE16={name:"TEXTURE16",value:34e3,description:"A texture unit."},eo.TEXTURE17={name:"TEXTURE17",value:34001,description:"A texture unit."},eo.TEXTURE18={name:"TEXTURE18",value:34002,description:"A texture unit."},eo.TEXTURE19={name:"TEXTURE19",value:34003,description:"A texture unit."},eo.TEXTURE20={name:"TEXTURE20",value:34004,description:"A texture unit."},eo.TEXTURE21={name:"TEXTURE21",value:34005,description:"A texture unit."},eo.TEXTURE22={name:"TEXTURE22",value:34006,description:"A texture unit."},eo.TEXTURE23={name:"TEXTURE23",value:34007,description:"A texture unit."},eo.TEXTURE24={name:"TEXTURE24",value:34008,description:"A texture unit."},eo.TEXTURE25={name:"TEXTURE25",value:34009,description:"A texture unit."},eo.TEXTURE26={name:"TEXTURE26",value:34010,description:"A texture unit."},eo.TEXTURE27={name:"TEXTURE27",value:34011,description:"A texture unit."},eo.TEXTURE28={name:"TEXTURE28",value:34012,description:"A texture unit."},eo.TEXTURE29={name:"TEXTURE29",value:34013,description:"A texture unit."},eo.TEXTURE30={name:"TEXTURE30",value:34014,description:"A texture unit."},eo.TEXTURE31={name:"TEXTURE31",value:34015,description:"A texture unit."},eo.ACTIVE_TEXTURE={name:"ACTIVE_TEXTURE",value:34016,description:"The current active texture unit."},eo.REPEAT={name:"REPEAT",value:10497,description:" "},eo.CLAMP_TO_EDGE={name:"CLAMP_TO_EDGE",value:33071,description:" "},eo.MIRRORED_REPEAT={name:"MIRRORED_REPEAT",value:33648,description:" "},eo.FLOAT_VEC2={name:"FLOAT_VEC2",value:35664,description:" "},eo.FLOAT_VEC3={name:"FLOAT_VEC3",value:35665,description:" "},eo.FLOAT_VEC4={name:"FLOAT_VEC4",value:35666,description:" "},eo.INT_VEC2={name:"INT_VEC2",value:35667,description:" "},eo.INT_VEC3={name:"INT_VEC3",value:35668,description:" "},eo.INT_VEC4={name:"INT_VEC4",value:35669,description:" "},eo.BOOL={name:"BOOL",value:35670,description:" "},eo.BOOL_VEC2={name:"BOOL_VEC2",value:35671,description:" "},eo.BOOL_VEC3={name:"BOOL_VEC3",value:35672,description:" "},eo.BOOL_VEC4={name:"BOOL_VEC4",value:35673,description:" "},eo.FLOAT_MAT2={name:"FLOAT_MAT2",value:35674,description:" "},eo.FLOAT_MAT3={name:"FLOAT_MAT3",value:35675,description:" "},eo.FLOAT_MAT4={name:"FLOAT_MAT4",value:35676,description:" "},eo.SAMPLER_2D={name:"SAMPLER_2D",value:35678,description:" "},eo.SAMPLER_CUBE={name:"SAMPLER_CUBE",value:35680,description:" "},eo.LOW_FLOAT={name:"LOW_FLOAT",value:36336,description:" "},eo.MEDIUM_FLOAT={name:"MEDIUM_FLOAT",value:36337,description:" "},eo.HIGH_FLOAT={name:"HIGH_FLOAT",value:36338,description:" "},eo.LOW_INT={name:"LOW_INT",value:36339,description:" "},eo.MEDIUM_INT={name:"MEDIUM_INT",value:36340,description:" "},eo.HIGH_INT={name:"HIGH_INT",value:36341,description:" "},eo.FRAMEBUFFER={name:"FRAMEBUFFER",value:36160,description:" "},eo.RENDERBUFFER={name:"RENDERBUFFER",value:36161,description:" "},eo.RGBA4={name:"RGBA4",value:32854,description:" "},eo.RGB5_A1={name:"RGB5_A1",value:32855,description:" "},eo.RGB565={name:"RGB565",value:36194,description:" "},eo.DEPTH_COMPONENT16={name:"DEPTH_COMPONENT16",value:33189,description:" "},eo.STENCIL_INDEX={name:"STENCIL_INDEX",value:6401,description:" "},eo.STENCIL_INDEX8={name:"STENCIL_INDEX8",value:36168,description:" "},eo.DEPTH_STENCIL={name:"DEPTH_STENCIL",value:34041,description:" "},eo.RENDERBUFFER_WIDTH={name:"RENDERBUFFER_WIDTH",value:36162,description:" "},eo.RENDERBUFFER_HEIGHT={name:"RENDERBUFFER_HEIGHT",value:36163,description:" "},eo.RENDERBUFFER_INTERNAL_FORMAT={name:"RENDERBUFFER_INTERNAL_FORMAT",value:36164,description:" "},eo.RENDERBUFFER_RED_SIZE={name:"RENDERBUFFER_RED_SIZE",value:36176,description:" "},eo.RENDERBUFFER_GREEN_SIZE={name:"RENDERBUFFER_GREEN_SIZE",value:36177,description:" "},eo.RENDERBUFFER_BLUE_SIZE={name:"RENDERBUFFER_BLUE_SIZE",value:36178,description:" "},eo.RENDERBUFFER_ALPHA_SIZE={name:"RENDERBUFFER_ALPHA_SIZE",value:36179,description:" "},eo.RENDERBUFFER_DEPTH_SIZE={name:"RENDERBUFFER_DEPTH_SIZE",value:36180,description:" "},eo.RENDERBUFFER_STENCIL_SIZE={name:"RENDERBUFFER_STENCIL_SIZE",value:36181,description:" "},eo.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE={name:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",value:36048,description:" "},eo.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME={name:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",value:36049,description:" "},eo.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL={name:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",value:36050,description:" "},eo.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE={name:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",value:36051,description:" "},eo.COLOR_ATTACHMENT0={name:"COLOR_ATTACHMENT0",value:36064,description:" "},eo.DEPTH_ATTACHMENT={name:"DEPTH_ATTACHMENT",value:36096,description:" "},eo.STENCIL_ATTACHMENT={name:"STENCIL_ATTACHMENT",value:36128,description:" "},eo.DEPTH_STENCIL_ATTACHMENT={name:"DEPTH_STENCIL_ATTACHMENT",value:33306,description:" "},eo.NONE={name:"NONE",value:0,description:" "},eo.FRAMEBUFFER_COMPLETE={name:"FRAMEBUFFER_COMPLETE",value:36053,description:" "},eo.FRAMEBUFFER_INCOMPLETE_ATTACHMENT={name:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",value:36054,description:" "},eo.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT={name:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",value:36055,description:" "},eo.FRAMEBUFFER_INCOMPLETE_DIMENSIONS={name:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",value:36057,description:" "},eo.FRAMEBUFFER_UNSUPPORTED={name:"FRAMEBUFFER_UNSUPPORTED",value:36061,description:" "},eo.FRAMEBUFFER_BINDING={name:"FRAMEBUFFER_BINDING",value:36006,description:" "},eo.RENDERBUFFER_BINDING={name:"RENDERBUFFER_BINDING",value:36007,description:" "},eo.MAX_RENDERBUFFER_SIZE={name:"MAX_RENDERBUFFER_SIZE",value:34024,description:" "},eo.INVALID_FRAMEBUFFER_OPERATION={name:"INVALID_FRAMEBUFFER_OPERATION",value:1286,description:" "},eo.UNPACK_FLIP_Y_WEBGL={name:"UNPACK_FLIP_Y_WEBGL",value:37440,description:" "},eo.UNPACK_PREMULTIPLY_ALPHA_WEBGL={name:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",value:37441,description:" "},eo.UNPACK_COLORSPACE_CONVERSION_WEBGL={name:"UNPACK_COLORSPACE_CONVERSION_WEBGL",value:37443,description:" "},eo.READ_BUFFER={name:"READ_BUFFER",value:3074,description:" "},eo.UNPACK_ROW_LENGTH={name:"UNPACK_ROW_LENGTH",value:3314,description:" "},eo.UNPACK_SKIP_ROWS={name:"UNPACK_SKIP_ROWS",value:3315,description:" "},eo.UNPACK_SKIP_PIXELS={name:"UNPACK_SKIP_PIXELS",value:3316,description:" "},eo.PACK_ROW_LENGTH={name:"PACK_ROW_LENGTH",value:3330,description:" "},eo.PACK_SKIP_ROWS={name:"PACK_SKIP_ROWS",value:3331,description:" "},eo.PACK_SKIP_PIXELS={name:"PACK_SKIP_PIXELS",value:3332,description:" "},eo.TEXTURE_BINDING_3D={name:"TEXTURE_BINDING_3D",value:32874,description:" "},eo.UNPACK_SKIP_IMAGES={name:"UNPACK_SKIP_IMAGES",value:32877,description:" "},eo.UNPACK_IMAGE_HEIGHT={name:"UNPACK_IMAGE_HEIGHT",value:32878,description:" "},eo.MAX_3D_TEXTURE_SIZE={name:"MAX_3D_TEXTURE_SIZE",value:32883,description:" "},eo.MAX_ELEMENTS_VERTICES={name:"MAX_ELEMENTS_VERTICES",value:33e3,description:" "},eo.MAX_ELEMENTS_INDICES={name:"MAX_ELEMENTS_INDICES",value:33001,description:" "},eo.MAX_TEXTURE_LOD_BIAS={name:"MAX_TEXTURE_LOD_BIAS",value:34045,description:" "},eo.MAX_FRAGMENT_UNIFORM_COMPONENTS={name:"MAX_FRAGMENT_UNIFORM_COMPONENTS",value:35657,description:" "},eo.MAX_VERTEX_UNIFORM_COMPONENTS={name:"MAX_VERTEX_UNIFORM_COMPONENTS",value:35658,description:" "},eo.MAX_ARRAY_TEXTURE_LAYERS={name:"MAX_ARRAY_TEXTURE_LAYERS",value:35071,description:" "},eo.MIN_PROGRAM_TEXEL_OFFSET={name:"MIN_PROGRAM_TEXEL_OFFSET",value:35076,description:" "},eo.MAX_PROGRAM_TEXEL_OFFSET={name:"MAX_PROGRAM_TEXEL_OFFSET",value:35077,description:" "},eo.MAX_VARYING_COMPONENTS={name:"MAX_VARYING_COMPONENTS",value:35659,description:" "},eo.FRAGMENT_SHADER_DERIVATIVE_HINT={name:"FRAGMENT_SHADER_DERIVATIVE_HINT",value:35723,description:" "},eo.RASTERIZER_DISCARD={name:"RASTERIZER_DISCARD",value:35977,description:" "},eo.VERTEX_ARRAY_BINDING={name:"VERTEX_ARRAY_BINDING",value:34229,description:" "},eo.MAX_VERTEX_OUTPUT_COMPONENTS={name:"MAX_VERTEX_OUTPUT_COMPONENTS",value:37154,description:" "},eo.MAX_FRAGMENT_INPUT_COMPONENTS={name:"MAX_FRAGMENT_INPUT_COMPONENTS",value:37157,description:" "},eo.MAX_SERVER_WAIT_TIMEOUT={name:"MAX_SERVER_WAIT_TIMEOUT",value:37137,description:" "},eo.MAX_ELEMENT_INDEX={name:"MAX_ELEMENT_INDEX",value:36203,description:" "},eo.RED={name:"RED",value:6403,description:" "},eo.RGB8={name:"RGB8",value:32849,description:" "},eo.RGBA8={name:"RGBA8",value:32856,description:" "},eo.RGB10_A2={name:"RGB10_A2",value:32857,description:" "},eo.TEXTURE_3D={name:"TEXTURE_3D",value:32879,description:" "},eo.TEXTURE_WRAP_R={name:"TEXTURE_WRAP_R",value:32882,description:" "},eo.TEXTURE_MIN_LOD={name:"TEXTURE_MIN_LOD",value:33082,description:" "},eo.TEXTURE_MAX_LOD={name:"TEXTURE_MAX_LOD",value:33083,description:" "},eo.TEXTURE_BASE_LEVEL={name:"TEXTURE_BASE_LEVEL",value:33084,description:" "},eo.TEXTURE_MAX_LEVEL={name:"TEXTURE_MAX_LEVEL",value:33085,description:" "},eo.TEXTURE_COMPARE_MODE={name:"TEXTURE_COMPARE_MODE",value:34892,description:" "},eo.TEXTURE_COMPARE_FUNC={name:"TEXTURE_COMPARE_FUNC",value:34893,description:" "},eo.SRGB={name:"SRGB",value:35904,description:" "},eo.SRGB8={name:"SRGB8",value:35905,description:" "},eo.SRGB8_ALPHA8={name:"SRGB8_ALPHA8",value:35907,description:" "},eo.COMPARE_REF_TO_TEXTURE={name:"COMPARE_REF_TO_TEXTURE",value:34894,description:" "},eo.RGBA32F={name:"RGBA32F",value:34836,description:" "},eo.RGB32F={name:"RGB32F",value:34837,description:" "},eo.RGBA16F={name:"RGBA16F",value:34842,description:" "},eo.RGB16F={name:"RGB16F",value:34843,description:" "},eo.TEXTURE_2D_ARRAY={name:"TEXTURE_2D_ARRAY",value:35866,description:" "},eo.TEXTURE_BINDING_2D_ARRAY={name:"TEXTURE_BINDING_2D_ARRAY",value:35869,description:" "},eo.R11F_G11F_B10F={name:"R11F_G11F_B10F",value:35898,description:" "},eo.RGB9_E5={name:"RGB9_E5",value:35901,description:" "},eo.RGBA32UI={name:"RGBA32UI",value:36208,description:" "},eo.RGB32UI={name:"RGB32UI",value:36209,description:" "},eo.RGBA16UI={name:"RGBA16UI",value:36214,description:" "},eo.RGB16UI={name:"RGB16UI",value:36215,description:" "},eo.RGBA8UI={name:"RGBA8UI",value:36220,description:" "},eo.RGB8UI={name:"RGB8UI",value:36221,description:" "},eo.RGBA32I={name:"RGBA32I",value:36226,description:" "},eo.RGB32I={name:"RGB32I",value:36227,description:" "},eo.RGBA16I={name:"RGBA16I",value:36232,description:" "},eo.RGB16I={name:"RGB16I",value:36233,description:" "},eo.RGBA8I={name:"RGBA8I",value:36238,description:" "},eo.RGB8I={name:"RGB8I",value:36239,description:" "},eo.RED_INTEGER={name:"RED_INTEGER",value:36244,description:" "},eo.RGB_INTEGER={name:"RGB_INTEGER",value:36248,description:" "},eo.RGBA_INTEGER={name:"RGBA_INTEGER",value:36249,description:" "},eo.R8={name:"R8",value:33321,description:" "},eo.RG8={name:"RG8",value:33323,description:" "},eo.R16F={name:"R16F",value:33325,description:" "},eo.R32F={name:"R32F",value:33326,description:" "},eo.RG16F={name:"RG16F",value:33327,description:" "},eo.RG32F={name:"RG32F",value:33328,description:" "},eo.R8I={name:"R8I",value:33329,description:" "},eo.R8UI={name:"R8UI",value:33330,description:" "},eo.R16I={name:"R16I",value:33331,description:" "},eo.R16UI={name:"R16UI",value:33332,description:" "},eo.R32I={name:"R32I",value:33333,description:" "},eo.R32UI={name:"R32UI",value:33334,description:" "},eo.RG8I={name:"RG8I",value:33335,description:" "},eo.RG8UI={name:"RG8UI",value:33336,description:" "},eo.RG16I={name:"RG16I",value:33337,description:" "},eo.RG16UI={name:"RG16UI",value:33338,description:" "},eo.RG32I={name:"RG32I",value:33339,description:" "},eo.RG32UI={name:"RG32UI",value:33340,description:" "},eo.R8_SNORM={name:"R8_SNORM",value:36756,description:" "},eo.RG8_SNORM={name:"RG8_SNORM",value:36757,description:" "},eo.RGB8_SNORM={name:"RGB8_SNORM",value:36758,description:" "},eo.RGBA8_SNORM={name:"RGBA8_SNORM",value:36759,description:" "},eo.RGB10_A2UI={name:"RGB10_A2UI",value:36975,description:" "},eo.TEXTURE_IMMUTABLE_FORMAT={name:"TEXTURE_IMMUTABLE_FORMAT",value:37167,description:" "},eo.TEXTURE_IMMUTABLE_LEVELS={name:"TEXTURE_IMMUTABLE_LEVELS",value:33503,description:" "},eo.UNSIGNED_INT_2_10_10_10_REV={name:"UNSIGNED_INT_2_10_10_10_REV",value:33640,description:" "},eo.UNSIGNED_INT_10F_11F_11F_REV={name:"UNSIGNED_INT_10F_11F_11F_REV",value:35899,description:" "},eo.UNSIGNED_INT_5_9_9_9_REV={name:"UNSIGNED_INT_5_9_9_9_REV",value:35902,description:" "},eo.FLOAT_32_UNSIGNED_INT_24_8_REV={name:"FLOAT_32_UNSIGNED_INT_24_8_REV",value:36269,description:" "},eo.UNSIGNED_INT_24_8={name:"UNSIGNED_INT_24_8",value:34042,description:" "},eo.HALF_FLOAT={name:"HALF_FLOAT",value:5131,description:" "},eo.RG={name:"RG",value:33319,description:" "},eo.RG_INTEGER={name:"RG_INTEGER",value:33320,description:" "},eo.INT_2_10_10_10_REV={name:"INT_2_10_10_10_REV",value:36255,description:" "},eo.CURRENT_QUERY={name:"CURRENT_QUERY",value:34917,description:" "},eo.QUERY_RESULT={name:"QUERY_RESULT",value:34918,description:" "},eo.QUERY_RESULT_AVAILABLE={name:"QUERY_RESULT_AVAILABLE",value:34919,description:" "},eo.ANY_SAMPLES_PASSED={name:"ANY_SAMPLES_PASSED",value:35887,description:" "},eo.ANY_SAMPLES_PASSED_CONSERVATIVE={name:"ANY_SAMPLES_PASSED_CONSERVATIVE",value:36202,description:" "},eo.MAX_DRAW_BUFFERS={name:"MAX_DRAW_BUFFERS",value:34852,description:" "},eo.DRAW_BUFFER0={name:"DRAW_BUFFER0",value:34853,description:" "},eo.DRAW_BUFFER1={name:"DRAW_BUFFER1",value:34854,description:" "},eo.DRAW_BUFFER2={name:"DRAW_BUFFER2",value:34855,description:" "},eo.DRAW_BUFFER3={name:"DRAW_BUFFER3",value:34856,description:" "},eo.DRAW_BUFFER4={name:"DRAW_BUFFER4",value:34857,description:" "},eo.DRAW_BUFFER5={name:"DRAW_BUFFER5",value:34858,description:" "},eo.DRAW_BUFFER6={name:"DRAW_BUFFER6",value:34859,description:" "},eo.DRAW_BUFFER7={name:"DRAW_BUFFER7",value:34860,description:" "},eo.DRAW_BUFFER8={name:"DRAW_BUFFER8",value:34861,description:" "},eo.DRAW_BUFFER9={name:"DRAW_BUFFER9",value:34862,description:" "},eo.DRAW_BUFFER10={name:"DRAW_BUFFER10",value:34863,description:" "},eo.DRAW_BUFFER11={name:"DRAW_BUFFER11",value:34864,description:" "},eo.DRAW_BUFFER12={name:"DRAW_BUFFER12",value:34865,description:" "},eo.DRAW_BUFFER13={name:"DRAW_BUFFER13",value:34866,description:" "},eo.DRAW_BUFFER14={name:"DRAW_BUFFER14",value:34867,description:" "},eo.DRAW_BUFFER15={name:"DRAW_BUFFER15",value:34868,description:" "},eo.MAX_COLOR_ATTACHMENTS={name:"MAX_COLOR_ATTACHMENTS",value:36063,description:" "},eo.COLOR_ATTACHMENT1={name:"COLOR_ATTACHMENT1",value:36065,description:" "},eo.COLOR_ATTACHMENT2={name:"COLOR_ATTACHMENT2",value:36066,description:" "},eo.COLOR_ATTACHMENT3={name:"COLOR_ATTACHMENT3",value:36067,description:" "},eo.COLOR_ATTACHMENT4={name:"COLOR_ATTACHMENT4",value:36068,description:" "},eo.COLOR_ATTACHMENT5={name:"COLOR_ATTACHMENT5",value:36069,description:" "},eo.COLOR_ATTACHMENT6={name:"COLOR_ATTACHMENT6",value:36070,description:" "},eo.COLOR_ATTACHMENT7={name:"COLOR_ATTACHMENT7",value:36071,description:" "},eo.COLOR_ATTACHMENT8={name:"COLOR_ATTACHMENT8",value:36072,description:" "},eo.COLOR_ATTACHMENT9={name:"COLOR_ATTACHMENT9",value:36073,description:" "},eo.COLOR_ATTACHMENT10={name:"COLOR_ATTACHMENT10",value:36074,description:" "},eo.COLOR_ATTACHMENT11={name:"COLOR_ATTACHMENT11",value:36075,description:" "},eo.COLOR_ATTACHMENT12={name:"COLOR_ATTACHMENT12",value:36076,description:" "},eo.COLOR_ATTACHMENT13={name:"COLOR_ATTACHMENT13",value:36077,description:" "},eo.COLOR_ATTACHMENT14={name:"COLOR_ATTACHMENT14",value:36078,description:" "},eo.COLOR_ATTACHMENT15={name:"COLOR_ATTACHMENT15",value:36079,description:" "},eo.SAMPLER_3D={name:"SAMPLER_3D",value:35679,description:" "},eo.SAMPLER_2D_SHADOW={name:"SAMPLER_2D_SHADOW",value:35682,description:" "},eo.SAMPLER_2D_ARRAY={name:"SAMPLER_2D_ARRAY",value:36289,description:" "},eo.SAMPLER_2D_ARRAY_SHADOW={name:"SAMPLER_2D_ARRAY_SHADOW",value:36292,description:" "},eo.SAMPLER_CUBE_SHADOW={name:"SAMPLER_CUBE_SHADOW",value:36293,description:" "},eo.INT_SAMPLER_2D={name:"INT_SAMPLER_2D",value:36298,description:" "},eo.INT_SAMPLER_3D={name:"INT_SAMPLER_3D",value:36299,description:" "},eo.INT_SAMPLER_CUBE={name:"INT_SAMPLER_CUBE",value:36300,description:" "},eo.INT_SAMPLER_2D_ARRAY={name:"INT_SAMPLER_2D_ARRAY",value:36303,description:" "},eo.UNSIGNED_INT_SAMPLER_2D={name:"UNSIGNED_INT_SAMPLER_2D",value:36306,description:" "},eo.UNSIGNED_INT_SAMPLER_3D={name:"UNSIGNED_INT_SAMPLER_3D",value:36307,description:" "},eo.UNSIGNED_INT_SAMPLER_CUBE={name:"UNSIGNED_INT_SAMPLER_CUBE",value:36308,description:" "},eo.UNSIGNED_INT_SAMPLER_2D_ARRAY={name:"UNSIGNED_INT_SAMPLER_2D_ARRAY",value:36311,description:" "},eo.MAX_SAMPLES={name:"MAX_SAMPLES",value:36183,description:" "},eo.SAMPLER_BINDING={name:"SAMPLER_BINDING",value:35097,description:" "},eo.PIXEL_PACK_BUFFER={name:"PIXEL_PACK_BUFFER",value:35051,description:" "},eo.PIXEL_UNPACK_BUFFER={name:"PIXEL_UNPACK_BUFFER",value:35052,description:" "},eo.PIXEL_PACK_BUFFER_BINDING={name:"PIXEL_PACK_BUFFER_BINDING",value:35053,description:" "},eo.PIXEL_UNPACK_BUFFER_BINDING={name:"PIXEL_UNPACK_BUFFER_BINDING",value:35055,description:" "},eo.COPY_READ_BUFFER={name:"COPY_READ_BUFFER",value:36662,description:" "},eo.COPY_WRITE_BUFFER={name:"COPY_WRITE_BUFFER",value:36663,description:" "},eo.COPY_READ_BUFFER_BINDING={name:"COPY_READ_BUFFER_BINDING",value:36662,description:" "},eo.COPY_WRITE_BUFFER_BINDING={name:"COPY_WRITE_BUFFER_BINDING",value:36663,description:" "},eo.FLOAT_MAT2x3={name:"FLOAT_MAT2x3",value:35685,description:" "},eo.FLOAT_MAT2x4={name:"FLOAT_MAT2x4",value:35686,description:" "},eo.FLOAT_MAT3x2={name:"FLOAT_MAT3x2",value:35687,description:" "},eo.FLOAT_MAT3x4={name:"FLOAT_MAT3x4",value:35688,description:" "},eo.FLOAT_MAT4x2={name:"FLOAT_MAT4x2",value:35689,description:" "},eo.FLOAT_MAT4x3={name:"FLOAT_MAT4x3",value:35690,description:" "},eo.UNSIGNED_INT_VEC2={name:"UNSIGNED_INT_VEC2",value:36294,description:" "},eo.UNSIGNED_INT_VEC3={name:"UNSIGNED_INT_VEC3",value:36295,description:" "},eo.UNSIGNED_INT_VEC4={name:"UNSIGNED_INT_VEC4",value:36296,description:" "},eo.UNSIGNED_NORMALIZED={name:"UNSIGNED_NORMALIZED",value:35863,description:" "},eo.SIGNED_NORMALIZED={name:"SIGNED_NORMALIZED",value:36764,description:" "},eo.VERTEX_ATTRIB_ARRAY_INTEGER={name:"VERTEX_ATTRIB_ARRAY_INTEGER",value:35069,description:" "},eo.VERTEX_ATTRIB_ARRAY_DIVISOR={name:"VERTEX_ATTRIB_ARRAY_DIVISOR",value:35070,description:" "},eo.TRANSFORM_FEEDBACK_BUFFER_MODE={name:"TRANSFORM_FEEDBACK_BUFFER_MODE",value:35967,description:" "},eo.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS={name:"MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",value:35968,description:" "},eo.TRANSFORM_FEEDBACK_VARYINGS={name:"TRANSFORM_FEEDBACK_VARYINGS",value:35971,description:" "},eo.TRANSFORM_FEEDBACK_BUFFER_START={name:"TRANSFORM_FEEDBACK_BUFFER_START",value:35972,description:" "},eo.TRANSFORM_FEEDBACK_BUFFER_SIZE={name:"TRANSFORM_FEEDBACK_BUFFER_SIZE",value:35973,description:" "},eo.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN={name:"TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",value:35976,description:" "},eo.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS={name:"MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",value:35978,description:" "},eo.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS={name:"MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",value:35979,description:" "},eo.INTERLEAVED_ATTRIBS={name:"INTERLEAVED_ATTRIBS",value:35980,description:" "},eo.SEPARATE_ATTRIBS={name:"SEPARATE_ATTRIBS",value:35981,description:" "},eo.TRANSFORM_FEEDBACK_BUFFER={name:"TRANSFORM_FEEDBACK_BUFFER",value:35982,description:" "},eo.TRANSFORM_FEEDBACK_BUFFER_BINDING={name:"TRANSFORM_FEEDBACK_BUFFER_BINDING",value:35983,description:" "},eo.TRANSFORM_FEEDBACK={name:"TRANSFORM_FEEDBACK",value:36386,description:" "},eo.TRANSFORM_FEEDBACK_PAUSED={name:"TRANSFORM_FEEDBACK_PAUSED",value:36387,description:" "},eo.TRANSFORM_FEEDBACK_ACTIVE={name:"TRANSFORM_FEEDBACK_ACTIVE",value:36388,description:" "},eo.TRANSFORM_FEEDBACK_BINDING={name:"TRANSFORM_FEEDBACK_BINDING",value:36389,description:" "},eo.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING={name:"FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",value:33296,description:" "},eo.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE={name:"FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",value:33297,description:" "},eo.FRAMEBUFFER_ATTACHMENT_RED_SIZE={name:"FRAMEBUFFER_ATTACHMENT_RED_SIZE",value:33298,description:" "},eo.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE={name:"FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",value:33299,description:" "},eo.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE={name:"FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",value:33300,description:" "},eo.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE={name:"FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",value:33301,description:" "},eo.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE={name:"FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",value:33302,description:" "},eo.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE={name:"FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",value:33303,description:" "},eo.FRAMEBUFFER_DEFAULT={name:"FRAMEBUFFER_DEFAULT",value:33304,description:" "},eo.DEPTH24_STENCIL8={name:"DEPTH24_STENCIL8",value:35056,description:" "},eo.DRAW_FRAMEBUFFER_BINDING={name:"DRAW_FRAMEBUFFER_BINDING",value:36006,description:" "},eo.READ_FRAMEBUFFER={name:"READ_FRAMEBUFFER",value:36008,description:" "},eo.DRAW_FRAMEBUFFER={name:"DRAW_FRAMEBUFFER",value:36009,description:" "},eo.READ_FRAMEBUFFER_BINDING={name:"READ_FRAMEBUFFER_BINDING",value:36010,description:" "},eo.RENDERBUFFER_SAMPLES={name:"RENDERBUFFER_SAMPLES",value:36011,description:" "},eo.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER={name:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",value:36052,description:" "},eo.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE={name:"FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",value:36182,description:" "},eo.UNIFORM_BUFFER={name:"UNIFORM_BUFFER",value:35345,description:" "},eo.UNIFORM_BUFFER_BINDING={name:"UNIFORM_BUFFER_BINDING",value:35368,description:" "},eo.UNIFORM_BUFFER_START={name:"UNIFORM_BUFFER_START",value:35369,description:" "},eo.UNIFORM_BUFFER_SIZE={name:"UNIFORM_BUFFER_SIZE",value:35370,description:" "},eo.MAX_VERTEX_UNIFORM_BLOCKS={name:"MAX_VERTEX_UNIFORM_BLOCKS",value:35371,description:" "},eo.MAX_FRAGMENT_UNIFORM_BLOCKS={name:"MAX_FRAGMENT_UNIFORM_BLOCKS",value:35373,description:" "},eo.MAX_COMBINED_UNIFORM_BLOCKS={name:"MAX_COMBINED_UNIFORM_BLOCKS",value:35374,description:" "},eo.MAX_UNIFORM_BUFFER_BINDINGS={name:"MAX_UNIFORM_BUFFER_BINDINGS",value:35375,description:" "},eo.MAX_UNIFORM_BLOCK_SIZE={name:"MAX_UNIFORM_BLOCK_SIZE",value:35376,description:" "},eo.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS={name:"MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",value:35377,description:" "},eo.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS={name:"MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",value:35379,description:" "},eo.UNIFORM_BUFFER_OFFSET_ALIGNMENT={name:"UNIFORM_BUFFER_OFFSET_ALIGNMENT",value:35380,description:" "},eo.ACTIVE_UNIFORM_BLOCKS={name:"ACTIVE_UNIFORM_BLOCKS",value:35382,description:" "},eo.UNIFORM_TYPE={name:"UNIFORM_TYPE",value:35383,description:" "},eo.UNIFORM_SIZE={name:"UNIFORM_SIZE",value:35384,description:" "},eo.UNIFORM_BLOCK_INDEX={name:"UNIFORM_BLOCK_INDEX",value:35386,description:" "},eo.UNIFORM_OFFSET={name:"UNIFORM_OFFSET",value:35387,description:" "},eo.UNIFORM_ARRAY_STRIDE={name:"UNIFORM_ARRAY_STRIDE",value:35388,description:" "},eo.UNIFORM_MATRIX_STRIDE={name:"UNIFORM_MATRIX_STRIDE",value:35389,description:" "},eo.UNIFORM_IS_ROW_MAJOR={name:"UNIFORM_IS_ROW_MAJOR",value:35390,description:" "},eo.UNIFORM_BLOCK_BINDING={name:"UNIFORM_BLOCK_BINDING",value:35391,description:" "},eo.UNIFORM_BLOCK_DATA_SIZE={name:"UNIFORM_BLOCK_DATA_SIZE",value:35392,description:" "},eo.UNIFORM_BLOCK_ACTIVE_UNIFORMS={name:"UNIFORM_BLOCK_ACTIVE_UNIFORMS",value:35394,description:" "},eo.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES={name:"UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",value:35395,description:" "},eo.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER={name:"UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",value:35396,description:" "},eo.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER={name:"UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",value:35398,description:" "},eo.OBJECT_TYPE={name:"OBJECT_TYPE",value:37138,description:" "},eo.SYNC_CONDITION={name:"SYNC_CONDITION",value:37139,description:" "},eo.SYNC_STATUS={name:"SYNC_STATUS",value:37140,description:" "},eo.SYNC_FLAGS={name:"SYNC_FLAGS",value:37141,description:" "},eo.SYNC_FENCE={name:"SYNC_FENCE",value:37142,description:" "},eo.SYNC_GPU_COMMANDS_COMPLETE={name:"SYNC_GPU_COMMANDS_COMPLETE",value:37143,description:" "},eo.UNSIGNALED={name:"UNSIGNALED",value:37144,description:" "},eo.SIGNALED={name:"SIGNALED",value:37145,description:" "},eo.ALREADY_SIGNALED={name:"ALREADY_SIGNALED",value:37146,description:" "},eo.TIMEOUT_EXPIRED={name:"TIMEOUT_EXPIRED",value:37147,description:" "},eo.CONDITION_SATISFIED={name:"CONDITION_SATISFIED",value:37148,description:" "},eo.WAIT_FAILED={name:"WAIT_FAILED",value:37149,description:" "},eo.SYNC_FLUSH_COMMANDS_BIT={name:"SYNC_FLUSH_COMMANDS_BIT",value:1,description:" "},eo.COLOR={name:"COLOR",value:6144,description:" "},eo.DEPTH={name:"DEPTH",value:6145,description:" "},eo.STENCIL={name:"STENCIL",value:6146,description:" "},eo.MIN={name:"MIN",value:32775,description:" "},eo.MAX={name:"MAX",value:32776,description:" "},eo.DEPTH_COMPONENT24={name:"DEPTH_COMPONENT24",value:33190,description:" "},eo.STREAM_READ={name:"STREAM_READ",value:35041,description:" "},eo.STREAM_COPY={name:"STREAM_COPY",value:35042,description:" "},eo.STATIC_READ={name:"STATIC_READ",value:35045,description:" "},eo.STATIC_COPY={name:"STATIC_COPY",value:35046,description:" "},eo.DYNAMIC_READ={name:"DYNAMIC_READ",value:35049,description:" "},eo.DYNAMIC_COPY={name:"DYNAMIC_COPY",value:35050,description:" "},eo.DEPTH_COMPONENT32F={name:"DEPTH_COMPONENT32F",value:36012,description:" "},eo.DEPTH32F_STENCIL8={name:"DEPTH32F_STENCIL8",value:36013,description:" "},eo.INVALID_INDEX={name:"INVALID_INDEX",value:4294967295,description:" "},eo.TIMEOUT_IGNORED={name:"TIMEOUT_IGNORED",value:-1,description:" "},eo.MAX_CLIENT_WAIT_TIMEOUT_WEBGL={name:"MAX_CLIENT_WAIT_TIMEOUT_WEBGL",value:37447,description:" "},eo.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE={name:"VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE",value:35070,description:"Describes the frequency divisor used for instanced rendering.",extensionName:"ANGLE_instanced_arrays"},eo.UNMASKED_VENDOR_WEBGL={name:"UNMASKED_VENDOR_WEBGL",value:37445,description:"Passed to getParameter to get the vendor string of the graphics driver.",extensionName:"ANGLE_instanced_arrays"},eo.UNMASKED_RENDERER_WEBGL={name:"UNMASKED_RENDERER_WEBGL",value:37446,description:"Passed to getParameter to get the renderer string of the graphics driver.",extensionName:"WEBGL_debug_renderer_info"},eo.MAX_TEXTURE_MAX_ANISOTROPY_EXT={name:"MAX_TEXTURE_MAX_ANISOTROPY_EXT",value:34047,description:"Returns the maximum available anisotropy.",extensionName:"EXT_texture_filter_anisotropic"},eo.TEXTURE_MAX_ANISOTROPY_EXT={name:"TEXTURE_MAX_ANISOTROPY_EXT",value:34046,description:"Passed to texParameter to set the desired maximum anisotropy for a texture.",extensionName:"EXT_texture_filter_anisotropic"},eo.COMPRESSED_RGB_S3TC_DXT1_EXT={name:"COMPRESSED_RGB_S3TC_DXT1_EXT",value:33776,description:"A DXT1-compressed image in an RGB image format.",extensionName:"WEBGL_compressed_texture_s3tc"},eo.COMPRESSED_RGBA_S3TC_DXT1_EXT={name:"COMPRESSED_RGBA_S3TC_DXT1_EXT",value:33777,description:"A DXT1-compressed image in an RGB image format with a simple on/off alpha value.",extensionName:"WEBGL_compressed_texture_s3tc"},eo.COMPRESSED_RGBA_S3TC_DXT3_EXT={name:"COMPRESSED_RGBA_S3TC_DXT3_EXT",value:33778,description:"A DXT3-compressed image in an RGBA image format. Compared to a 32-bit RGBA texture, it offers 4:1 compression.",extensionName:"WEBGL_compressed_texture_s3tc"},eo.COMPRESSED_RGBA_S3TC_DXT5_EXT={name:"COMPRESSED_RGBA_S3TC_DXT5_EXT",value:33779,description:"A DXT5-compressed image in an RGBA image format. It also provides a 4:1 compression, but differs to the DXT3 compression in how the alpha compression is done.",extensionName:"WEBGL_compressed_texture_s3tc"},eo.COMPRESSED_R11_EAC={name:"COMPRESSED_R11_EAC",value:37488,description:"One-channel (red) unsigned format compression.",extensionName:"WEBGL_compressed_texture_etc"},eo.COMPRESSED_SIGNED_R11_EAC={name:"COMPRESSED_SIGNED_R11_EAC",value:37489,description:"One-channel (red) signed format compression.",extensionName:"WEBGL_compressed_texture_etc"},eo.COMPRESSED_RG11_EAC={name:"COMPRESSED_RG11_EAC",value:37490,description:"Two-channel (red and green) unsigned format compression.",extensionName:"WEBGL_compressed_texture_etc"},eo.COMPRESSED_SIGNED_RG11_EAC={name:"COMPRESSED_SIGNED_RG11_EAC",value:37491,description:"Two-channel (red and green) signed format compression.",extensionName:"WEBGL_compressed_texture_etc"},eo.COMPRESSED_RGB8_ETC2={name:"COMPRESSED_RGB8_ETC2",value:37492,description:"Compresses RBG8 data with no alpha channel.",extensionName:"WEBGL_compressed_texture_etc"},eo.COMPRESSED_RGBA8_ETC2_EAC={name:"COMPRESSED_RGBA8_ETC2_EAC",value:37493,description:"Compresses RGBA8 data. The RGB part is encoded the same as RGB_ETC2, but the alpha part is encoded separately.",extensionName:"WEBGL_compressed_texture_etc"},eo.COMPRESSED_SRGB8_ETC2={name:"COMPRESSED_SRGB8_ETC2",value:37494,description:"Compresses sRBG8 data with no alpha channel.",extensionName:"WEBGL_compressed_texture_etc"},eo.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC={name:"COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",value:37495,description:"Compresses sRGBA8 data. The sRGB part is encoded the same as SRGB_ETC2, but the alpha part is encoded separately.",extensionName:"WEBGL_compressed_texture_etc"},eo.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2={name:"COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",value:37496,description:"Similar to RGB8_ETC, but with ability to punch through the alpha channel, which means to make it completely opaque or transparent.",extensionName:"WEBGL_compressed_texture_etc"},eo.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2={name:"COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",value:37497,description:"Similar to SRGB8_ETC, but with ability to punch through the alpha channel, which means to make it completely opaque or transparent.",extensionName:"WEBGL_compressed_texture_etc"},eo.COMPRESSED_RGB_PVRTC_4BPPV1_IMG={name:"COMPRESSED_RGB_PVRTC_4BPPV1_IMG",value:35840,description:"RGB compression in 4-bit mode. One block for each 4×4 pixels.",extensionName:"WEBGL_compressed_texture_pvrtc"},eo.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG={name:"COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",value:35842,description:"RGBA compression in 4-bit mode. One block for each 4×4 pixels.",extensionName:"WEBGL_compressed_texture_pvrtc"},eo.COMPRESSED_RGB_PVRTC_2BPPV1_IMG={name:"COMPRESSED_RGB_PVRTC_2BPPV1_IMG",value:35841,description:"RGB compression in 2-bit mode. One block for each 8×4 pixels.",extensionName:"WEBGL_compressed_texture_pvrtc"},eo.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG={name:"COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",value:35843,description:"RGBA compression in 2-bit mode. One block for each 8×4 pixe",extensionName:"WEBGL_compressed_texture_pvrtc"},eo.COMPRESSED_RGB_ETC1_WEBGL={name:"COMPRESSED_RGB_ETC1_WEBGL",value:36196,description:"Compresses 24-bit RGB data with no alpha channel.",extensionName:"WEBGL_compressed_texture_etc1"},eo.COMPRESSED_RGB_ATC_WEBGL={name:"COMPRESSED_RGB_ATC_WEBGL",value:35986,description:"Compresses RGB textures with no alpha channel.",extensionName:"WEBGL_compressed_texture_atc"},eo.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL={name:"COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",value:35986,description:"Compresses RGBA textures using explicit alpha encoding (useful when alpha transitions are sharp).",extensionName:"WEBGL_compressed_texture_atc"},eo.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL={name:"COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",value:34798,description:"Compresses RGBA textures using interpolated alpha encoding (useful when alpha transitions are gradient).",extensionName:"WEBGL_compressed_texture_atc"},eo.UNSIGNED_INT_24_8_WEBGL={name:"UNSIGNED_INT_24_8_WEBGL",value:34042,description:"Unsigned integer type for 24-bit depth texture data.",extensionName:"WEBGL_depth_texture"},eo.HALF_FLOAT_OES={name:"HALF_FLOAT_OES",value:36193,description:"Half floating-point type (16-bit).",extensionName:"OES_texture_half_float"},eo.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT={name:"FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT",value:33297,description:" ",extensionName:"WEBGL_color_buffer_float"},eo.UNSIGNED_NORMALIZED_EXT={name:"UNSIGNED_NORMALIZED_EXT",value:35863,description:" ",extensionName:"WEBGL_color_buffer_float"},eo.MIN_EXT={name:"MIN_EXT",value:32775,description:"Produces the minimum color components of the source and destination colors.",extensionName:"EXT_blend_minmax"},eo.MAX_EXT={name:"MAX_EXT",value:32776,description:"Produces the maximum color components of the source and destination colors.",extensionName:"EXT_blend_minmax"},eo.SRGB_EXT={name:"SRGB_EXT",value:35904,description:"Unsized sRGB format that leaves the precision up to the driver.",extensionName:"EXT_sRGB"},eo.SRGB_ALPHA_EXT={name:"SRGB_ALPHA_EXT",value:35906,description:"Unsized sRGB format with unsized alpha component.",extensionName:"EXT_sRGB"},eo.SRGB8_ALPHA8_EXT={name:"SRGB8_ALPHA8_EXT",value:35907,description:"Sized (8-bit) sRGB and alpha formats.",extensionName:"EXT_sRGB"},eo.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT={name:"FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT",value:33296,description:"Returns the framebuffer color encoding.",extensionName:"EXT_sRGB"},eo.FRAGMENT_SHADER_DERIVATIVE_HINT_OES={name:"FRAGMENT_SHADER_DERIVATIVE_HINT_OES",value:35723,description:"Indicates the accuracy of the derivative calculation for the GLSL built-in functions: dFdx, dFdy, and fwidth.",extensionName:"OES_standard_derivatives"},eo.COLOR_ATTACHMENT0_WEBGL={name:"COLOR_ATTACHMENT0_WEBGL",value:36064,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},eo.COLOR_ATTACHMENT1_WEBGL={name:"COLOR_ATTACHMENT1_WEBGL",value:36065,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},eo.COLOR_ATTACHMENT2_WEBGL={name:"COLOR_ATTACHMENT2_WEBGL",value:36066,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},eo.COLOR_ATTACHMENT3_WEBGL={name:"COLOR_ATTACHMENT3_WEBGL",value:36067,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},eo.COLOR_ATTACHMENT4_WEBGL={name:"COLOR_ATTACHMENT4_WEBGL",value:36068,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},eo.COLOR_ATTACHMENT5_WEBGL={name:"COLOR_ATTACHMENT5_WEBGL",value:36069,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},eo.COLOR_ATTACHMENT6_WEBGL={name:"COLOR_ATTACHMENT6_WEBGL",value:36070,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},eo.COLOR_ATTACHMENT7_WEBGL={name:"COLOR_ATTACHMENT7_WEBGL",value:36071,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},eo.COLOR_ATTACHMENT8_WEBGL={name:"COLOR_ATTACHMENT8_WEBGL",value:36072,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},eo.COLOR_ATTACHMENT9_WEBGL={name:"COLOR_ATTACHMENT9_WEBGL",value:36073,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},eo.COLOR_ATTACHMENT10_WEBGL={name:"COLOR_ATTACHMENT10_WEBGL",value:36074,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},eo.COLOR_ATTACHMENT11_WEBGL={name:"COLOR_ATTACHMENT11_WEBGL",value:36075,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},eo.COLOR_ATTACHMENT12_WEBGL={name:"COLOR_ATTACHMENT12_WEBGL",value:36076,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},eo.COLOR_ATTACHMENT13_WEBGL={name:"COLOR_ATTACHMENT13_WEBGL",value:36077,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},eo.COLOR_ATTACHMENT14_WEBGL={name:"COLOR_ATTACHMENT14_WEBGL",value:36078,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},eo.COLOR_ATTACHMENT15_WEBGL={name:"COLOR_ATTACHMENT15_WEBGL",value:36079,description:"Framebuffer color attachment point",extensionName:"WEBGL_draw_buffers"},eo.DRAW_BUFFER0_WEBGL={name:"DRAW_BUFFER0_WEBGL",value:34853,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},eo.DRAW_BUFFER1_WEBGL={name:"DRAW_BUFFER1_WEBGL",value:34854,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},eo.DRAW_BUFFER2_WEBGL={name:"DRAW_BUFFER2_WEBGL",value:34855,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},eo.DRAW_BUFFER3_WEBGL={name:"DRAW_BUFFER3_WEBGL",value:34856,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},eo.DRAW_BUFFER4_WEBGL={name:"DRAW_BUFFER4_WEBGL",value:34857,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},eo.DRAW_BUFFER5_WEBGL={name:"DRAW_BUFFER5_WEBGL",value:34858,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},eo.DRAW_BUFFER6_WEBGL={name:"DRAW_BUFFER6_WEBGL",value:34859,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},eo.DRAW_BUFFER7_WEBGL={name:"DRAW_BUFFER7_WEBGL",value:34860,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},eo.DRAW_BUFFER8_WEBGL={name:"DRAW_BUFFER8_WEBGL",value:34861,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},eo.DRAW_BUFFER9_WEBGL={name:"DRAW_BUFFER9_WEBGL",value:34862,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},eo.DRAW_BUFFER10_WEBGL={name:"DRAW_BUFFER10_WEBGL",value:34863,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},eo.DRAW_BUFFER11_WEBGL={name:"DRAW_BUFFER11_WEBGL",value:34864,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},eo.DRAW_BUFFER12_WEBGL={name:"DRAW_BUFFER12_WEBGL",value:34865,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},eo.DRAW_BUFFER13_WEBGL={name:"DRAW_BUFFER13_WEBGL",value:34866,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},eo.DRAW_BUFFER14_WEBGL={name:"DRAW_BUFFER14_WEBGL",value:34867,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},eo.DRAW_BUFFER15_WEBGL={name:"DRAW_BUFFER15_WEBGL",value:34868,description:"Draw buffer",extensionName:"WEBGL_draw_buffers"},eo.MAX_COLOR_ATTACHMENTS_WEBGL={name:"MAX_COLOR_ATTACHMENTS_WEBGL",value:36063,description:"Maximum number of framebuffer color attachment points",extensionName:"WEBGL_draw_buffers"},eo.MAX_DRAW_BUFFERS_WEBGL={name:"MAX_DRAW_BUFFERS_WEBGL",value:34852,description:"Maximum number of draw buffers",extensionName:"WEBGL_draw_buffers"},eo.VERTEX_ARRAY_BINDING_OES={name:"VERTEX_ARRAY_BINDING_OES",value:34229,description:"The bound vertex array object (VAO).",extensionName:"VERTEX_ARRAY_BINDING_OES"},eo.QUERY_COUNTER_BITS_EXT={name:"QUERY_COUNTER_BITS_EXT",value:34916,description:"The number of bits used to hold the query result for the given target.",extensionName:"EXT_disjoint_timer_query"},eo.CURRENT_QUERY_EXT={name:"CURRENT_QUERY_EXT",value:34917,description:"The currently active query.",extensionName:"EXT_disjoint_timer_query"},eo.QUERY_RESULT_EXT={name:"QUERY_RESULT_EXT",value:34918,description:"The query result.",extensionName:"EXT_disjoint_timer_query"},eo.QUERY_RESULT_AVAILABLE_EXT={name:"QUERY_RESULT_AVAILABLE_EXT",value:34919,description:"A Boolean indicating whether or not a query result is available.",extensionName:"EXT_disjoint_timer_query"},eo.TIME_ELAPSED_EXT={name:"TIME_ELAPSED_EXT",value:35007,description:"Elapsed time (in nanoseconds).",extensionName:"EXT_disjoint_timer_query"},eo.TIMESTAMP_EXT={name:"TIMESTAMP_EXT",value:36392,description:"The current time.",extensionName:"EXT_disjoint_timer_query"},eo.GPU_DISJOINT_EXT={name:"GPU_DISJOINT_EXT",value:36795,description:"A Boolean indicating whether or not the GPU performed any disjoint operation.",extensionName:"EXT_disjoint_timer_query"},eo.zeroMeaningByCommand={getError:"NO_ERROR",blendFunc:"ZERO",blendFuncSeparate:"ZERO",readBuffer:"NONE",getFramebufferAttachmentParameter:"NONE",texParameterf:"NONE",texParameteri:"NONE",drawArrays:"POINTS",drawElements:"POINTS",drawArraysInstanced:"POINTS",drawArraysInstancedAngle:"POINTS",drawBuffers:"POINTS",drawElementsInstanced:"POINTS",drawRangeElements:"POINTS"},eo.oneMeaningByCommand={blendFunc:"ONE",blendFuncSeparate:"ONE",drawArrays:"LINES",drawElements:"LINES",drawArraysInstanced:"LINES",drawArraysInstancedAngle:"LINES",drawBuffers:"LINES",drawElementsInstanced:"LINES",drawRangeElements:"LINES"};const to={},no={};!function(){for(const e in eo)if(eo.hasOwnProperty(e)){const t=eo[e];to[t.name]=t,no[t.value]=t}}();class ao extends qi{get analyserName(){return ao.analyserName}appendToAnalysis(e,t){if(!e.commands)return;const n={total:0,totalTriangles:0,totalTriangleStrip:0,totalTriangleFan:0,totalLines:0,totalLineStrip:0,totalLineLoop:0,totalPoints:0};for(const t of e.commands)"drawArrays"===t.name&&t.commandArguments.length>=3||"drawArraysInstanced"===t.name&&t.commandArguments.length>=3||"drawArraysInstancedANGLE"===t.name&&t.commandArguments.length>=3?this.appendToPrimitives(n,t.commandArguments[0],t.commandArguments[2]):"drawElements"===t.name&&t.commandArguments.length>=2||"drawElementsInstanced"===t.name&&t.commandArguments.length>=2||"drawElementsInstancedANGLE"===t.name&&t.commandArguments.length>=2?this.appendToPrimitives(n,t.commandArguments[0],t.commandArguments[1]):"drawRangeElements"===t.name&&t.commandArguments.length>=4&&this.appendToPrimitives(n,t.commandArguments[0],t.commandArguments[3]);t.total=n.total,t.triangles=n.totalTriangles,t.triangleStrip=n.totalTriangleStrip,t.triangleFan=n.totalTriangleFan,t.lines=n.totalLines,t.lineStrip=n.totalLineStrip,t.lineLoop=n.totalLineLoop,t.points=n.totalPoints}appendToPrimitives(e,t,n){t===eo.POINTS.value?e.totalPoints+=n:t===eo.LINES.value?e.totalLines+=n:t===eo.LINE_STRIP.value?e.totalLineStrip+=n:t===eo.LINE_LOOP.value?e.totalLineLoop+=n:t===eo.TRIANGLES.value?e.totalTriangles+=n:t===eo.TRIANGLE_STRIP.value?e.totalTriangleStrip+=n:t===eo.TRIANGLE_FAN.value&&(e.totalTriangleFan+=n),e.total+=n}}ao.analyserName="Primitives";class ro{constructor(e){this.contextInformation=e,this.analysers=[],this.initAnalysers()}appendAnalyses(e){for(const t in this.analysers)if(this.analysers.hasOwnProperty(t)){this.analysers[t].appendAnalysis(e)}}initAnalysers(){this.analysers.push(new Qi(this.contextInformation),new Ji(this.contextInformation),new ao(this.contextInformation))}}class io{static storeOriginFunction(e,t){if(!e)return;if(!e[t])return;const n=this.getOriginFunctionName(t);e[n]||(e[n]=e[t])}static storePrototypeOriginFunction(e,t){if(!e)return;if(!e.prototype[t])return;const n=this.getOriginFunctionName(t);e.prototype[n]||(e.prototype[n]=e.prototype[t])}static executePrototypeOriginFunction(e,t,n,a){if(!e)return;const r=this.getOriginFunctionName(n);return t.prototype[r]?(e[r]||(e[r]=t.prototype[r]),this.executeFunction(e,r,a)):void 0}static executeOriginFunction(e,t,n){if(!e)return;const a=this.getOriginFunctionName(t);return e[a]?this.executeFunction(e,a,n):void 0}static executeFunction(e,t,n){const a=n;if(void 0===a||0===a.length)return e[t]();switch(a.length){case 1:return e[t](a[0]);case 2:return e[t](a[0],a[1]);case 3:return e[t](a[0],a[1],a[2]);case 4:return e[t](a[0],a[1],a[2],a[3]);case 5:return e[t](a[0],a[1],a[2],a[3],a[4]);case 6:return e[t](a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return e[t](a[0],a[1],a[2],a[3],a[4],a[5],a[6]);case 8:return e[t](a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7]);case 9:return e[t](a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8]);case 10:return e[t](a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9]);case 11:return e[t](a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10]);case 12:return e[t](a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11]);case 13:return e[t](a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12]);case 14:return e[t](a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13]);case 15:return e[t](a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14]);case 16:return e[t](a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]);case 17:return e[t](a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15],a[16]);case 18:return e[t](a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15],a[16],a[17]);case 19:return e[t](a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15],a[16],a[17],a[18]);case 20:return e[t](a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15],a[16],a[17],a[18],a[19]);default:return e[t].apply(e,a)}}static getOriginFunctionName(e){return this.originFunctionPrefix+e}}io.originFunctionPrefix="__SPECTOR_Origin_";let oo;!function(e){e[e.Unknown=0]="Unknown",e[e.Unused=10]="Unused",e[e.Disabled=20]="Disabled",e[e.Redundant=30]="Redundant",e[e.Valid=40]="Valid",e[e.Deprecated=50]="Deprecated"}(oo||(oo={}));class so{static getWebGlObjectTag(e){return e[so.SPECTOROBJECTTAGKEY]}static attachWebGlObjectTag(e,t){t.displayText=so.stringifyWebGlObjectTag(t),e[so.SPECTOROBJECTTAGKEY]=t}static stringifyWebGlObjectTag(e){return e?`${e.typeName} - ID: ${e.id}`:"No tag available."}}so.SPECTOROBJECTTAGKEY="__SPECTOR_Object_TAG";class co{get type(){return window[this.typeName]||null}constructor(){this.id=0}tagWebGlObject(e){if(!this.type)return;let t;if(!e)return t;if(t=so.getWebGlObjectTag(e),t)return t;if(e instanceof this.type){const n=this.getNextId();return t={typeName:this.typeName,id:n},so.attachWebGlObjectTag(e,t),t}return t}getNextId(){return this.id++}}class uo{constructor(e){this.options=e}createCapture(e,t,n){const a=class{static getStackTrace(e=0,t=0){const n=[];try{throw new Error("Errorator.")}catch(e){if(e.stack){const t=e.stack.split("\n");for(let e=0,a=t.length;e<a;e++)t[e].match(/^\s*[A-Za-z0-9\-_\$]+\(/)?n.push(t[e]):0===t[e].indexOf("    at ")?(t[e]=t[e].replace("    at ",""),n.push(t[e])):-1!==t[e].indexOf("/<@http")?(t[e]=t[e].substring(t[e].indexOf("/<@http")+3),n.push(t[e])):-1!==t[e].indexOf("@http")&&(t[e]=t[e].replace("@http"," (http"),t[e]=t[e]+")",n.push(t[e]))}else if(e.message){const t=e.message.split("\n");for(let e=0,a=t.length;e<a;e++)if(t[e].match(/^\s*[A-Za-z0-9\-_\$]+\(/)){let a=t[e];t[e+1]&&(a+=" at "+t[e+1],e++),n.push(a)}}}if(!n){let e=arguments.callee.caller;for(;e;){const t=e.toString(),a=t.substring(t.indexOf("function")+8,t.indexOf(""))||"anonymous";n.push(a),e=e.caller}}if(n){n.shift();for(let t=0;t<e&&n.length>0;t++)n.shift();for(let e=0;e<t&&n.length>0;e++)n.pop()}return n}}.getStackTrace(4,1),r=0===e.name.indexOf("uniform")?this.stringifyUniform(e.arguments):this.stringify(e.arguments,e.result),i={id:t,startTime:e.startTime,commandEndTime:e.endTime,endTime:0,name:e.name,commandArguments:e.arguments,result:e.result,stackTrace:a,status:oo.Unknown,marker:n,text:r};this.transformCapture(i);for(let e=0;e<i.commandArguments.length;e++){const t=i.commandArguments[e];t&&t.length&&t.length>50&&(i.commandArguments[e]="Array Length: "+t.length)}if(i.commandArguments){const e=[];for(let t=0;t<i.commandArguments.length;t++){const n=i.commandArguments[t];void 0===n?e.push(void 0):null===n?e.push(null):e.push(JSON.parse(this.stringifyJSON(n)))}i.commandArguments=e}return i.result&&(i.result=JSON.parse(this.stringifyJSON(i.result))),i}stringifyJSON(e){try{return JSON.stringify(e)}catch(e){return null}}transformCapture(e){}stringify(e,t){let n=this.spiedCommandName;return e&&e.length>0&&(n+=": "+this.stringifyArgs(e).join(", ")),t&&(n+=" -> "+this.stringifyResult(t)),n}stringifyUniform(e){let t=this.spiedCommandName;if(e&&e.length>0){const n=[];n.push(this.stringifyValue(e[0]));for(let t=1;t<e.length;t++)if("number"==typeof e[t]){const a=e[t]+"";n.push(a)}else{const a=this.stringifyValue(e[t]);n.push(a)}t+=": "+n.join(", ")}return t}stringifyArgs(e){const t=[];for(let n=0;n<e.length;n++){const a=e[n],r=this.stringifyValue(a);t.push(r)}return t}stringifyResult(e){if(e)return this.stringifyValue(e)}stringifyValue(e){if(null===e)return"null";if(void 0===e)return"undefined";const t=so.getWebGlObjectTag(e);return t?t.displayText:"number"==typeof e&&eo.isWebGlConstant(e)?eo.stringifyWebGlConstant(e,this.spiedCommandName):"string"==typeof e?e:e instanceof HTMLImageElement?e.src:e instanceof ArrayBuffer?"[--("+e.byteLength+")--]":e.length?"[..("+e.length+")..]":e}}class lo extends uo{get spiedCommandName(){return lo.commandName}stringifyArgs(e){const t=[];if(e.length>0){const n=e[0],a=this.stringifyValue(n);t.push(a)}if(e.length>1){const n=""+e[1];t.push(n)}return e.length>2&&t.push(e[2]),t}}lo.commandName="bindAttribLocation";class Eo extends uo{get spiedCommandName(){return Eo.commandName}stringifyArgs(e){const t=[],n=this.options.context.getParameter(eo.READ_FRAMEBUFFER_BINDING.value),a=this.options.tagWebGlObject(n);t.push("READ FROM: "+this.stringifyValue(a));const r=this.options.context.getParameter(eo.DRAW_FRAMEBUFFER_BINDING.value),i=this.options.tagWebGlObject(r);t.push("WRITE TO: "+this.stringifyValue(i));for(let n=0;n<8;n++)t.push(e[n]);return(e[8]&eo.DEPTH_BUFFER_BIT.value)===eo.DEPTH_BUFFER_BIT.value&&t.push(eo.DEPTH_BUFFER_BIT.name),(e[8]&eo.STENCIL_BUFFER_BIT.value)===eo.STENCIL_BUFFER_BIT.value&&t.push(eo.STENCIL_BUFFER_BIT.name),(e[8]&eo.COLOR_BUFFER_BIT.value)===eo.COLOR_BUFFER_BIT.value&&t.push(eo.COLOR_BUFFER_BIT.name),t.push(eo.stringifyWebGlConstant(e[9],"blitFrameBuffer")),t}}Eo.commandName="blitFrameBuffer";class mo extends uo{get spiedCommandName(){return mo.commandName}stringifyArgs(e){const t=[];return(e[0]&eo.DEPTH_BUFFER_BIT.value)===eo.DEPTH_BUFFER_BIT.value&&t.push(eo.DEPTH_BUFFER_BIT.name),(e[0]&eo.STENCIL_BUFFER_BIT.value)===eo.STENCIL_BUFFER_BIT.value&&t.push(eo.STENCIL_BUFFER_BIT.name),(e[0]&eo.COLOR_BUFFER_BIT.value)===eo.COLOR_BUFFER_BIT.value&&t.push(eo.COLOR_BUFFER_BIT.name),t}}mo.commandName="clear";const _o=["lineWidth"];class To extends uo{get spiedCommandName(){return this.internalSpiedCommandName}constructor(e,t){super(e),this.internalSpiedCommandName=t,this.isDeprecated=_o.indexOf(this.spiedCommandName)>-1}transformCapture(e){this.isDeprecated&&(e.status=oo.Deprecated)}}class Ao extends uo{get spiedCommandName(){return Ao.commandName}stringifyArgs(e){const t=[];return t.push(e[0]),t}}Ao.commandName="disableVertexAttribArray";class Ro extends uo{get spiedCommandName(){return Ro.commandName}stringifyArgs(e){const t=[];return t.push(eo.stringifyWebGlConstant(e[0],"drawArrays")),t.push(e[1]),t.push(e[2]),t}}Ro.commandName="drawArrays";class po extends uo{get spiedCommandName(){return po.commandName}stringifyArgs(e){const t=[];return t.push(eo.stringifyWebGlConstant(e[0],"drawArraysInstanced")),t.push(e[1]),t.push(e[2]),t.push(e[3]),t}}po.commandName="drawArraysInstanced";class ho extends uo{get spiedCommandName(){return ho.commandName}stringifyArgs(e){const t=[];return t.push(eo.stringifyWebGlConstant(e[0],"drawArraysInstancedANGLE")),t.push(e[1]),t.push(e[2]),t.push(e[3]),t}}ho.commandName="drawArraysInstancedANGLE";class fo extends uo{get spiedCommandName(){return fo.commandName}stringifyArgs(e){const t=[];return t.push(eo.stringifyWebGlConstant(e[0],"drawElements")),t.push(e[1]),t.push(eo.stringifyWebGlConstant(e[2],"drawElements")),t.push(e[3]),t}}fo.commandName="drawElements";class Co extends uo{get spiedCommandName(){return Co.commandName}stringifyArgs(e){const t=[];return t.push(eo.stringifyWebGlConstant(e[0],"drawElementsInstancedANGLE")),t.push(e[1]),t.push(eo.stringifyWebGlConstant(e[2],"drawElementsInstancedANGLE")),t.push(e[3]),t.push(e[4]),t}}Co.commandName="drawElementsInstancedANGLE";class Fo extends uo{get spiedCommandName(){return Fo.commandName}stringifyArgs(e){const t=[];return t.push(eo.stringifyWebGlConstant(e[0],"drawElementsInstanced")),t.push(e[1]),t.push(eo.stringifyWebGlConstant(e[2],"drawElementsInstanced")),t.push(e[3]),t.push(e[4]),t}}Fo.commandName="drawElementsInstanced";class vo extends uo{get spiedCommandName(){return vo.commandName}stringifyArgs(e){const t=[];return t.push(eo.stringifyWebGlConstant(e[0],"drawRangeElements")),t.push(e[1]),t.push(e[2]),t.push(e[3]),t.push(eo.stringifyWebGlConstant(e[4],"drawRangeElements")),t.push(e[5]),t}}vo.commandName="drawRangeElements";class So extends uo{get spiedCommandName(){return So.commandName}stringifyResult(e){if(e)return`name: ${e.name}, size: ${e.size}, type: ${e.type}`}}So.commandName="getActiveAttrib";class No extends uo{get spiedCommandName(){return No.commandName}stringifyResult(e){if(e)return`name: ${e.name}, size: ${e.size}, type: ${e.type}`}}No.commandName="getActiveUniform";class Io extends uo{get spiedCommandName(){return Io.commandName}stringifyResult(e){return e?"true":"false"}}Io.commandName="getExtension";class go extends uo{get spiedCommandName(){return go.commandName}stringifyResult(e){if(!e)return"null";const t=so.getWebGlObjectTag(e);return t?t.displayText:e}}go.commandName="getParameter";class Bo extends uo{get spiedCommandName(){return Bo.commandName}stringifyResult(e){if(e)return`min: ${e.rangeMin}, max: ${e.rangeMax}, precision: ${e.precision}`}}Bo.commandName="getShaderPrecisionFormat";class Mo extends uo{get spiedCommandName(){return Mo.commandName}stringifyResult(e){if(e)return`name: ${e.name}, size: ${e.size}, type: ${e.type}`}}Mo.commandName="getTransformFeedbackVarying";class Lo extends uo{get spiedCommandName(){return Lo.commandName}stringifyArgs(e){const t=[];return t.push(eo.stringifyWebGlConstant(e[0],"multiDrawArraysInstancedBaseInstanceWEBGL")),t.push(`drawCount=${e[9]}`),t.push(e[2]),t.push(e[4]),t.push(e[6]),t.push(e[8]),t}}Lo.commandName="multiDrawArraysInstancedBaseInstanceWEBGL";class Oo extends uo{get spiedCommandName(){return Oo.commandName}stringifyArgs(e){const t=[];return t.push(eo.stringifyWebGlConstant(e[0],"multiDrawElementsInstancedBaseVertexBaseInstanceWEBGL")),t.push(eo.stringifyWebGlConstant(e[3],"multiDrawElementsInstancedBaseVertexBaseInstanceWEBGL")),t.push(`drawCount=${e[11]}`),t.push(e[2]),t.push(e[4]),t.push(e[6]),t.push(e[8]),t.push(e[10]),t}}Oo.commandName="multiDrawElementsInstancedBaseVertexBaseInstanceWEBGL";class Uo extends uo{get spiedCommandName(){return Uo.commandName}stringifyArgs(e){const t=[];for(let n=0;n<4;n++)t.push(e[n].toFixed(0));return t}}function xo(e){return`${e.toFixed(0)} (0b${(e>>>0).toString(2)})`}Uo.commandName="scissor";class Po extends uo{get spiedCommandName(){return Po.commandName}stringifyArgs(e){const t=[];return t.push(xo(e[0])),t}}Po.commandName="stencilMask";class bo extends uo{get spiedCommandName(){return bo.commandName}stringifyArgs(e){const t=[];return t.push(eo.stringifyWebGlConstant(e[0],"stencilMaskSeparate")),t.push(xo(e[1])),t}}bo.commandName="stencilMaskSeparate";class Do extends uo{get spiedCommandName(){return Do.commandName}stringifyArgs(e){const t=[];return t.push(eo.stringifyWebGlConstant(e[0],"stencilFunc")),t.push(xo(e[1])),t.push(xo(e[2])),t}}Do.commandName="stencilFunc";class yo extends uo{get spiedCommandName(){return yo.commandName}stringifyArgs(e){const t=[];return t.push(eo.stringifyWebGlConstant(e[0],"stencilFuncSeparate")),t.push(eo.stringifyWebGlConstant(e[1],"stencilFuncSeparate")),t.push(xo(e[2])),t.push(xo(e[3])),t}}yo.commandName="stencilFuncSeparate";class Go extends uo{get spiedCommandName(){return Go.commandName}stringifyArgs(e){const t=[];return t.push(e[0]),t.push(e[1]),t.push(eo.stringifyWebGlConstant(e[2],"vertexAttribPointer")),t.push(e[3]),t.push(e[4]),t.push(e[5]),t}}Go.commandName="vertexAttribPointer";class wo extends uo{get spiedCommandName(){return wo.commandName}stringifyArgs(e){const t=[];for(let n=0;n<4;n++)t.push(e[n].toFixed(0));return t}}wo.commandName="viewport";class Xo extends uo{get spiedCommandName(){return Xo.commandName}stringifyArgs(e){const t=[];return t.push(e[0]),t}}Xo.commandName="enableVertexAttribArray";class Wo{constructor(e){this.spiedCommandName=e.spiedCommandName,this.spiedCommandRunningContext=e.spiedCommandRunningContext,this.spiedCommand=this.spiedCommandRunningContext[this.spiedCommandName],io.storeOriginFunction(this.spiedCommandRunningContext,this.spiedCommandName),this.callback=e.callback,this.commandOptions={context:e.context,contextVersion:e.contextVersion,extensions:e.extensions,toggleCapture:e.toggleCapture},this.initCustomCommands(),this.initCommand()}spy(){this.spiedCommandRunningContext[this.spiedCommandName]=this.overloadedCommand}unSpy(){this.spiedCommandRunningContext[this.spiedCommandName]=this.spiedCommand}createCapture(e,t,n){return this.command.createCapture(e,t,n)}initCommand(){Wo.customCommandsConstructors[this.spiedCommandName]?this.command=Wo.customCommandsConstructors[this.spiedCommandName](this.commandOptions):this.command=new To(this.commandOptions,this.spiedCommandName),this.overloadedCommand=this.getSpy()}getSpy(){const e=this;return function(){const t=Zi.now,n=io.executeOriginFunction(e.spiedCommandRunningContext,e.spiedCommandName,arguments),a=Zi.now,r={name:e.spiedCommandName,arguments:arguments,result:n,startTime:t,endTime:a};return e.callback(e,r),n}}initCustomCommands(){Wo.customCommandsConstructors||(Wo.customCommandsConstructors={[lo.commandName]:e=>new lo(e),[Eo.commandName]:e=>new Eo(e),[mo.commandName]:e=>new mo(e),[Ao.commandName]:e=>new Ao(e),[Ro.commandName]:e=>new Ro(e),[po.commandName]:e=>new po(e),[ho.commandName]:e=>new ho(e),[fo.commandName]:e=>new fo(e),[Fo.commandName]:e=>new Fo(e),[Co.commandName]:e=>new Co(e),[vo.commandName]:e=>new vo(e),[So.commandName]:e=>new So(e),[No.commandName]:e=>new No(e),[Io.commandName]:e=>new Io(e),[go.commandName]:e=>new go(e),[Bo.commandName]:e=>new Bo(e),[Mo.commandName]:e=>new Mo(e),[Lo.commandName]:e=>new Lo(e),[Oo.commandName]:e=>new Oo(e),[Uo.commandName]:e=>new Uo(e),[Po.commandName]:e=>new Po(e),[bo.commandName]:e=>new bo(e),[Do.commandName]:e=>new Do(e),[yo.commandName]:e=>new yo(e),[Go.commandName]:e=>new Go(e),[wo.commandName]:e=>new wo(e),[Xo.commandName]:e=>new Xo(e)})}}class Vo{constructor(e){this.options=e,this.context=e.context,this.contextVersion=e.contextVersion,this.extensions=e.extensions,this.toggleCapture=e.toggleCapture,this.consumeCommands=this.getConsumeCommands(),this.changeCommandsByState=this.getChangeCommandsByState(),this.commandNameToStates=this.getCommandNameToStates()}get requireStartAndStopStates(){return!0}startCapture(e,t,n){return this.quickCapture=t,this.fullCapture=n,this.capturedCommandsByState={},e&&this.requireStartAndStopStates&&(this.currentState={},this.readFromContextNoSideEffects()),this.copyCurrentStateToPrevious(),this.currentState={},this.previousState}stopCapture(){return this.requireStartAndStopStates&&this.readFromContextNoSideEffects(),this.analyse(void 0),this.currentState}registerCallbacks(e){for(const t in this.changeCommandsByState)if(this.changeCommandsByState.hasOwnProperty(t))for(const n of this.changeCommandsByState[t])e[n]=e[n]||[],e[n].push(this.onChangeCommand.bind(this));for(const t of this.consumeCommands)e[t]=e[t]||[],e[t].push(this.onConsumeCommand.bind(this))}getStateData(){return this.currentState}getConsumeCommands(){return[]}getChangeCommandsByState(){return{}}copyCurrentStateToPrevious(){this.currentState&&(this.previousState=this.currentState)}onChangeCommand(e){const t=this.commandNameToStates[e.name];for(const n of t){if(!this.isValidChangeCommand(e,n))return;this.capturedCommandsByState[n]=this.capturedCommandsByState[n]||[],this.capturedCommandsByState[n].push(e)}}isValidChangeCommand(e,t){return!0}onConsumeCommand(e){this.isValidConsumeCommand(e)&&(this.readFromContextNoSideEffects(),this.analyse(e),this.storeCommandIds(),e[this.stateName]=this.currentState,this.startCapture(!1,this.quickCapture,this.fullCapture))}isValidConsumeCommand(e){return this.lastCommandName=e?.name,!0}analyse(e){for(const t in this.capturedCommandsByState)if(this.capturedCommandsByState.hasOwnProperty(t)){const n=this.capturedCommandsByState[t],a=n.length-1;if(a>=0)if(e){for(let t=0;t<a;t++){const a=n[t];a.consumeCommandId=e.id,this.changeCommandCaptureStatus(a,oo.Redundant)}const r=this.isStateEnableNoSideEffects(t,e.commandArguments),i=n[a];i.consumeCommandId=e.id,this.areStatesEquals(this.currentState[t],this.previousState[t])?this.changeCommandCaptureStatus(i,oo.Redundant):r?this.changeCommandCaptureStatus(i,oo.Valid):this.changeCommandCaptureStatus(i,oo.Disabled)}else for(let e=0;e<n.length;e++){const t=n[e];this.changeCommandCaptureStatus(t,oo.Unused)}}}storeCommandIds(){const e=["unusedCommandIds","disabledCommandIds","redundantCommandIds","validCommandIds"];for(const t of e)this.currentState[t]=[];for(const e in this.capturedCommandsByState)if(this.capturedCommandsByState.hasOwnProperty(e)){const t=this.capturedCommandsByState[e];for(const e of t)switch(e.status){case oo.Unused:this.currentState.unusedCommandIds.push(e.id);break;case oo.Disabled:this.currentState.disabledCommandIds.push(e.id);break;case oo.Redundant:this.currentState.redundantCommandIds.push(e.id);break;case oo.Valid:this.currentState.validCommandIds.push(e.id)}}for(const t of e)this.currentState[t].length||delete this.currentState[t]}changeCommandCaptureStatus(e,t){return e.status<t&&(e.status=t,!0)}areStatesEquals(e,t){if(typeof e!=typeof t)return!1;if(e&&!t)return!1;if(t&&!e)return!1;if(null==e)return!0;if(e.length&&t.length&&"string"!=typeof e){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}isStateEnable(e,t){return!0}getSpectorData(e){if(e)return{__SPECTOR_Object_TAG:so.getWebGlObjectTag(e)||this.options.tagWebGlObject(e),__SPECTOR_Object_CustomData:e.__SPECTOR_Object_CustomData,__SPECTOR_Metadata:e.__SPECTOR_Metadata}}readFromContextNoSideEffects(){this.toggleCapture(!1),this.readFromContext(),this.toggleCapture(!0)}isStateEnableNoSideEffects(e,t){this.toggleCapture(!1);const n=this.isStateEnable(e,t);return this.toggleCapture(!0),n}getCommandNameToStates(){const e={};for(const t in this.changeCommandsByState)if(this.changeCommandsByState.hasOwnProperty(t))for(const n of this.changeCommandsByState[t])e[n]=e[n]||[],e[n].push(t);return e}}let Ho,Yo,ko;!function(e){e[e.Unknown=0]="Unknown",e[e.GlInt=10]="GlInt",e[e.GlEnum=20]="GlEnum",e[e.GlUint=30]="GlUint"}(Ho||(Ho={}));class Ko extends Vo{getWebgl1Parameters(){return[]}getWebgl2Parameters(){return[]}getChangeCommandsByState(){this.parameters=[],this.parameters.push(this.getWebgl1Parameters()),this.contextVersion>1&&this.parameters.push(this.getWebgl2Parameters());const e={};for(let t=1;t<=this.contextVersion&&!(t>this.parameters.length);t++)if(this.parameters[t-1])for(const n of this.parameters[t-1])if(n.changeCommands)for(const t of n.changeCommands)e[n.constant.name]=e[n.constant.name]||[],e[n.constant.name].push(t);return e}readFromContext(){for(let e=1;e<=this.contextVersion&&!(e>this.parameters.length);e++)for(const t of this.parameters[e-1]){const e=this.readParameterFromContext(t),n=so.getWebGlObjectTag(e);if("BLEND_DST_ALPHA"===t.constant.name&&console.log(" ----- "),n)this.currentState[t.constant.name]=n;else{const n=this.stringifyParameterValue(e,t);this.currentState[t.constant.name]=n}}console.log(this.currentState)}readParameterFromContext(e){if(e.constant.extensionName&&!this.extensions[e.constant.extensionName])return`Extension ${e.constant.extensionName} is unavailable.`;return this.context.getParameter(e.constant.value)}stringifyParameterValue(e,t){if(null===e)return"null";if(void 0===e)return"undefined";if(t.returnType===Ho.GlUint)return e=xo(e);if("number"==typeof e&&eo.isWebGlConstant(e)){if(t.returnType===Ho.GlEnum){const n=t.changeCommands&&t.changeCommands[0]||"";return e=eo.stringifyWebGlConstant(e,n)}return e}if(e.length&&"string"!=typeof e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n]);return t}return e}}class zo extends Ko{get stateName(){return zo.stateName}getWebgl1Parameters(){return[{constant:eo.PACK_ALIGNMENT,changeCommands:["pixelStorei"]},{constant:eo.UNPACK_ALIGNMENT,changeCommands:["pixelStorei"]},{constant:eo.UNPACK_COLORSPACE_CONVERSION_WEBGL,returnType:Ho.GlEnum,changeCommands:["pixelStorei"]},{constant:eo.UNPACK_FLIP_Y_WEBGL,changeCommands:["pixelStorei"]},{constant:eo.UNPACK_PREMULTIPLY_ALPHA_WEBGL,changeCommands:["pixelStorei"]}]}getWebgl2Parameters(){return[{constant:eo.PACK_ROW_LENGTH,changeCommands:["pixelStorei"]},{constant:eo.PACK_SKIP_PIXELS,changeCommands:["pixelStorei"]},{constant:eo.PACK_SKIP_ROWS,changeCommands:["pixelStorei"]},{constant:eo.UNPACK_IMAGE_HEIGHT,changeCommands:["pixelStorei"]},{constant:eo.UNPACK_SKIP_PIXELS,changeCommands:["pixelStorei"]},{constant:eo.UNPACK_SKIP_ROWS,changeCommands:["pixelStorei"]},{constant:eo.UNPACK_SKIP_IMAGES,changeCommands:["pixelStorei"]}]}getConsumeCommands(){return["readPixels","texImage2D","texSubImage2D"]}isValidChangeCommand(e,t){return to[t].value===e.commandArguments[0]}}zo.stateName="AlignmentState";class jo extends Ko{get stateName(){return jo.stateName}getWebgl1Parameters(){return[{constant:eo.BLEND,changeCommands:["enable","disable"]},{constant:eo.BLEND_COLOR,changeCommands:["blendColor"]},{constant:eo.BLEND_DST_ALPHA,returnType:Ho.GlEnum,changeCommands:["blendFunc","blendFuncSeparate"]},{constant:eo.BLEND_DST_RGB,returnType:Ho.GlEnum,changeCommands:["blendFunc","blendFuncSeparate"]},{constant:eo.BLEND_EQUATION_ALPHA,returnType:Ho.GlEnum,changeCommands:["blendEquation","blendEquationSeparate"]},{constant:eo.BLEND_EQUATION_RGB,returnType:Ho.GlEnum,changeCommands:["blendEquation","blendEquationSeparate"]},{constant:eo.BLEND_SRC_ALPHA,returnType:Ho.GlEnum,changeCommands:["blendFunc","blendFuncSeparate"]},{constant:eo.BLEND_SRC_RGB,returnType:Ho.GlEnum,changeCommands:["blendFunc","blendFuncSeparate"]}]}isValidChangeCommand(e,t){return"enable"!==e.name&&"disable"!==e.name||e.commandArguments[0]===eo.BLEND.value}getConsumeCommands(){return $i}isStateEnable(e,t){return this.context.isEnabled(eo.BLEND.value)}}jo.stateName="BlendState";class Zo extends Ko{get stateName(){return Zo.stateName}getWebgl1Parameters(){return[{constant:eo.COLOR_CLEAR_VALUE,changeCommands:["clearColor"]},{constant:eo.DEPTH_CLEAR_VALUE,changeCommands:["clearDepth"]},{constant:eo.STENCIL_CLEAR_VALUE,changeCommands:["clearStencil"]}]}getConsumeCommands(){return["clear"]}isStateEnable(e,t){switch(e){case eo.COLOR_CLEAR_VALUE.name:return eo.COLOR_BUFFER_BIT.value===(t[0]&eo.COLOR_BUFFER_BIT.value);case eo.DEPTH_CLEAR_VALUE.name:return eo.DEPTH_BUFFER_BIT.value===(t[0]&eo.DEPTH_BUFFER_BIT.value);case eo.STENCIL_CLEAR_VALUE.name:return eo.STENCIL_BUFFER_BIT.value===(t[0]&eo.STENCIL_BUFFER_BIT.value)}return!1}}Zo.stateName="ClearState";class qo extends Ko{get stateName(){return qo.stateName}getWebgl1Parameters(){return[{constant:eo.COLOR_WRITEMASK,changeCommands:["colorMask"]}]}getConsumeCommands(){return $i}}qo.stateName="ColorState";class Qo extends Ko{get stateName(){return Qo.stateName}getWebgl1Parameters(){return[{constant:eo.SAMPLE_COVERAGE_VALUE,changeCommands:["sampleCoverage"]},{constant:eo.SAMPLE_COVERAGE_INVERT,changeCommands:["sampleCoverage"]}]}getWebgl2Parameters(){return[{constant:eo.SAMPLE_COVERAGE,changeCommands:["enable","disable"]},{constant:eo.SAMPLE_ALPHA_TO_COVERAGE,changeCommands:["enable","disable"]}]}isValidChangeCommand(e,t){return"enable"!==e.name&&"disable"!==e.name||(e.commandArguments[0]===eo.SAMPLE_COVERAGE.value?t===eo.SAMPLE_COVERAGE.name:e.commandArguments[0]===eo.SAMPLE_ALPHA_TO_COVERAGE.value&&t===eo.SAMPLE_ALPHA_TO_COVERAGE.name)}getConsumeCommands(){return $i}isStateEnable(e,t){return 2===this.contextVersion&&this.context.isEnabled(eo.SAMPLE_COVERAGE.value)}}Qo.stateName="CoverageState";class $o extends Ko{get stateName(){return $o.stateName}getWebgl1Parameters(){return[{constant:eo.CULL_FACE,changeCommands:["enable","disable"]},{constant:eo.CULL_FACE_MODE,returnType:Ho.GlEnum,changeCommands:["cullFace"]}]}getConsumeCommands(){return $i}isValidChangeCommand(e,t){return"enable"!==e.name&&"disable"!==e.name||e.commandArguments[0]===eo.CULL_FACE.value}isStateEnable(e,t){return this.context.isEnabled(eo.CULL_FACE.value)}}$o.stateName="CullState";class Jo extends Ko{get stateName(){return Jo.stateName}getWebgl1Parameters(){return[{constant:eo.DEPTH_TEST,changeCommands:["enable","disable"]},{constant:eo.DEPTH_FUNC,returnType:Ho.GlEnum,changeCommands:["depthFunc"]},{constant:eo.DEPTH_RANGE,changeCommands:["depthRange"]},{constant:eo.DEPTH_WRITEMASK,changeCommands:["depthMask"]}]}getConsumeCommands(){return $i}isValidChangeCommand(e,t){return"enable"!==e.name&&"disable"!==e.name||e.commandArguments[0]===eo.DEPTH_TEST.value}isStateEnable(e,t){return this.context.isEnabled(eo.DEPTH_TEST.value)}}Jo.stateName="DepthState";class es extends Ko{get stateName(){return es.stateName}getWebgl1Parameters(){return[{constant:eo.DITHER,changeCommands:["enable","disable"]},{constant:eo.VIEWPORT,changeCommands:["viewPort"]},{constant:eo.FRONT_FACE,returnType:Ho.GlEnum,changeCommands:["frontFace"]},{constant:eo.FRAGMENT_SHADER_DERIVATIVE_HINT_OES,changeCommands:["hint"]}]}getWebgl2Parameters(){return[{constant:eo.RASTERIZER_DISCARD,changeCommands:["enable","disable"]},{constant:eo.FRAGMENT_SHADER_DERIVATIVE_HINT,changeCommands:["hint"]}]}isValidChangeCommand(e,t){return"enable"===e.name||"disable"===e.name?e.commandArguments[0]===eo.DITHER.value?t===eo.DITHER.name:e.commandArguments[0]===eo.RASTERIZER_DISCARD.value&&t===eo.RASTERIZER_DISCARD.name:"hint"!==e.name||(e.commandArguments[0]===eo.FRAGMENT_SHADER_DERIVATIVE_HINT_OES.value?t===eo.FRAGMENT_SHADER_DERIVATIVE_HINT_OES.name:e.commandArguments[0]===eo.FRAGMENT_SHADER_DERIVATIVE_HINT.value&&t===eo.FRAGMENT_SHADER_DERIVATIVE_HINT.name)}getConsumeCommands(){return $i}isStateEnable(e,t){switch(e){case eo.DITHER.name:return this.context.isEnabled(eo.DITHER.value);case eo.RASTERIZER_DISCARD.name:return this.context.isEnabled(eo.RASTERIZER_DISCARD.value)}return!0}}es.stateName="DrawState";class ts extends Ko{get stateName(){return ts.stateName}getWebgl1Parameters(){return[{constant:eo.GENERATE_MIPMAP_HINT,changeCommands:["hint"]}]}getConsumeCommands(){return["generateMipmap"]}}ts.stateName="MipmapHintState";class ns extends Ko{get stateName(){return ns.stateName}getWebgl1Parameters(){return[{constant:eo.POLYGON_OFFSET_FILL,changeCommands:["enable","disable"]},{constant:eo.POLYGON_OFFSET_FACTOR,changeCommands:["polygonOffset"]},{constant:eo.POLYGON_OFFSET_UNITS,changeCommands:["polygonOffset"]}]}isValidChangeCommand(e,t){return"enable"!==e.name&&"disable"!==e.name||e.commandArguments[0]===eo.POLYGON_OFFSET_FILL.value}getConsumeCommands(){return $i}isStateEnable(e,t){return this.context.isEnabled(eo.POLYGON_OFFSET_FILL.value)}}ns.stateName="PolygonOffsetState";class as extends Ko{get stateName(){return as.stateName}getWebgl1Parameters(){return[{constant:eo.SCISSOR_TEST,changeCommands:["enable","disable"]},{constant:eo.SCISSOR_BOX,changeCommands:["scissor"]}]}isValidChangeCommand(e,t){return"enable"!==e.name&&"disable"!==e.name||e.commandArguments[0]===eo.SCISSOR_TEST.value}getConsumeCommands(){return[...$i,"clear"]}isStateEnable(e,t){return this.context.isEnabled(eo.SCISSOR_TEST.value)}}as.stateName="ScissorState";class rs extends Ko{get stateName(){return rs.stateName}getWebgl1Parameters(){return[{constant:eo.STENCIL_TEST,changeCommands:["enable","disable"]},{constant:eo.STENCIL_BACK_FAIL,returnType:Ho.GlEnum,changeCommands:["stencilOp","stencilOpSeparate"]},{constant:eo.STENCIL_BACK_FUNC,returnType:Ho.GlEnum,changeCommands:["stencilFunc","stencilFuncSeparate"]},{constant:eo.STENCIL_BACK_PASS_DEPTH_FAIL,returnType:Ho.GlEnum,changeCommands:["stencilOp","stencilOpSeparate"]},{constant:eo.STENCIL_BACK_PASS_DEPTH_PASS,returnType:Ho.GlEnum,changeCommands:["stencilOp","stencilOpSeparate"]},{constant:eo.STENCIL_BACK_REF,changeCommands:["stencilFunc","stencilFuncSeparate"]},{constant:eo.STENCIL_BACK_VALUE_MASK,returnType:Ho.GlUint,changeCommands:["stencilFunc","stencilFuncSeparate"]},{constant:eo.STENCIL_BACK_WRITEMASK,returnType:Ho.GlUint,changeCommands:["stencilMask","stencilMaskSeparate"]},{constant:eo.STENCIL_FAIL,returnType:Ho.GlEnum,changeCommands:["stencilOp","stencilOpSeparate"]},{constant:eo.STENCIL_FUNC,returnType:Ho.GlEnum,changeCommands:["stencilFunc","stencilFuncSeparate"]},{constant:eo.STENCIL_PASS_DEPTH_FAIL,returnType:Ho.GlEnum,changeCommands:["stencilOp","stencilOpSeparate"]},{constant:eo.STENCIL_PASS_DEPTH_PASS,returnType:Ho.GlEnum,changeCommands:["stencilOp","stencilOpSeparate"]},{constant:eo.STENCIL_REF,changeCommands:["stencilFunc","stencilFuncSeparate"]},{constant:eo.STENCIL_VALUE_MASK,returnType:Ho.GlUint,changeCommands:["stencilFunc","stencilFuncSeparate"]},{constant:eo.STENCIL_WRITEMASK,returnType:Ho.GlUint,changeCommands:["stencilMask","stencilMaskSeparate"]}]}readFromContext(){super.readFromContext();const e=this.context,t=eo.FRAMEBUFFER.value,n=eo.STENCIL_ATTACHMENT.value;let a=0;if(e.getParameter(eo.FRAMEBUFFER_BINDING.value)){if(this.context.getFramebufferAttachmentParameter(t,n,eo.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE.value)!==eo.NONE.value)if(this.contextVersion>1)a=this.context.getFramebufferAttachmentParameter(t,n,eo.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE.value);else{this.context.getFramebufferAttachmentParameter(t,n,eo.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME.value)===eo.RENDERBUFFER.value&&(a=e.getRenderbufferParameter(e.RENDERBUFFER,e.RENDERBUFFER_STENCIL_SIZE))}}else a=this.readParameterFromContext({constant:eo.STENCIL_BITS});this.currentState[eo.STENCIL_BITS.name]=""+a}isValidChangeCommand(e,t){return"enable"===e.name||"disable"===e.name?e.commandArguments[0]===eo.STENCIL_TEST.value:"stencilOp"===e.name||"stencilOpSeparate"===e.name?rs.stencilOpStates.indexOf(e.commandArguments[0])>0:"stencilFunc"===e.name||"stencilFuncSeparate"===e.name?rs.stencilFuncStates.indexOf(e.commandArguments[0])>0:"stencilMask"!==e.name&&"stencilMaskSeparate"!==e.name||rs.stencilMaskStates.indexOf(e.commandArguments[0])>0}getConsumeCommands(){return $i}isStateEnable(e,t){return this.context.isEnabled(eo.STENCIL_TEST.value)}}rs.stateName="StencilState",rs.stencilOpStates=[eo.STENCIL_BACK_FAIL.value,eo.STENCIL_BACK_PASS_DEPTH_FAIL.value,eo.STENCIL_BACK_PASS_DEPTH_PASS.value,eo.STENCIL_FAIL.value,eo.STENCIL_PASS_DEPTH_FAIL.value,eo.STENCIL_PASS_DEPTH_PASS.value],rs.stencilFuncStates=[eo.STENCIL_BACK_FUNC.value,eo.STENCIL_BACK_REF.value,eo.STENCIL_BACK_VALUE_MASK.value,eo.STENCIL_FUNC.value,eo.STENCIL_REF.value,eo.STENCIL_VALUE_MASK.value],rs.stencilMaskStates=[eo.STENCIL_BACK_WRITEMASK.value,eo.STENCIL_WRITEMASK.value];class is{static isSupportedCombination(e,t,n){return e=e||eo.UNSIGNED_BYTE.value,((t=t||eo.RGBA.value)===eo.RGB.value||t===eo.RGBA.value)&&((n===eo.RGB.value||n===eo.RGBA.value||n===eo.RGBA8.value||n===eo.RGBA16F.value||n===eo.RGBA32F.value||n===eo.RGB16F.value||n===eo.RGB32F.value||n===eo.R11F_G11F_B10F.value||n===eo.SRGB8.value||n===eo.SRGB8_ALPHA8.value)&&this.isSupportedComponentType(e))}static readPixels(e,t,n,a,r,i){e.getError();const o=a*r*4;let s;if(i===eo.UNSIGNED_BYTE.value?s=new Uint8Array(o):(i=eo.FLOAT.value,s=new Float32Array(o)),e.readPixels(t,n,a,r,e.RGBA,i,s),e.getError())return;if(i===eo.UNSIGNED_BYTE.value)return s;const c=new Uint8Array(a*r*4);for(let e=0;e<r;e++)for(let t=0;t<a;t++)c[e*a*4+4*t+0]=255*Math.min(Math.max(s[e*a*4+4*t+0],0),1),c[e*a*4+4*t+1]=255*Math.min(Math.max(s[e*a*4+4*t+1],0),1),c[e*a*4+4*t+2]=255*Math.min(Math.max(s[e*a*4+4*t+2],0),1),c[e*a*4+4*t+3]=255*Math.min(Math.max(s[e*a*4+4*t+3],0),1);return c}static isSupportedComponentType(e){return e===eo.UNSIGNED_BYTE.value||e===eo.UNSIGNED_SHORT_4_4_4_4.value||e===eo.UNSIGNED_SHORT_5_5_5_1.value||e===eo.UNSIGNED_SHORT_5_6_5.value||e===eo.HALF_FLOAT.value||e===eo.HALF_FLOAT_OES.value||e===eo.FLOAT.value}}class os extends Vo{get stateName(){return os.stateName}constructor(e){super(e),this.captureFrameBuffer=e.context.createFramebuffer(),this.workingCanvas=document.createElement("canvas"),this.workingContext2D=this.workingCanvas.getContext("2d"),this.captureCanvas=document.createElement("canvas"),this.captureContext2D=this.captureCanvas.getContext("2d"),this.captureContext2D.imageSmoothingEnabled=!0,this.captureContext2D.mozImageSmoothingEnabled=!0,this.captureContext2D.oImageSmoothingEnabled=!0,this.captureContext2D.webkitImageSmoothingEnabled=!0,this.captureContext2D.msImageSmoothingEnabled=!0}getConsumeCommands(){return["clear","clearBufferfv","clearBufferiv","clearBufferuiv","clearBufferfi",...$i]}readFromContext(){const e=this.context;this.currentState.Attachments=[];const t=this.context.getParameter(eo.FRAMEBUFFER_BINDING.value);if(!t)return this.currentState.FrameBuffer=null,void this.getCapture(e,"Canvas COLOR_ATTACHMENT",0,0,e.drawingBufferWidth,e.drawingBufferHeight,0,0,eo.UNSIGNED_BYTE.value);const n=e.getParameter(e.VIEWPORT),a=n[0],r=n[1],i=n[2],o=n[3];this.currentState.FrameBuffer=this.getSpectorData(t);const s=this.context.checkFramebufferStatus(eo.FRAMEBUFFER.value);if(this.currentState.FrameBufferStatus=no[s].name,s!==eo.FRAMEBUFFER_COMPLETE.value)return;if(this.extensions[eo.MAX_DRAW_BUFFERS_WEBGL.extensionName]){const e=this.context.getParameter(eo.MAX_DRAW_BUFFERS_WEBGL.value);for(let n=0;n<e;n++)this.readFrameBufferAttachmentFromContext(this.context,t,to["COLOR_ATTACHMENT"+n+"_WEBGL"],a,r,i,o)}else if(this.contextVersion>1){const e=this.context.getParameter(eo.MAX_DRAW_BUFFERS.value);for(let n=0;n<e;n++)this.readFrameBufferAttachmentFromContext(this.context,t,to["COLOR_ATTACHMENT"+n],a,r,i,o)}else this.readFrameBufferAttachmentFromContext(this.context,t,to.COLOR_ATTACHMENT0,a,r,i,o)}readFrameBufferAttachmentFromContext(e,t,n,a,r,i,o){const s=eo.FRAMEBUFFER.value,c=this.context.getFramebufferAttachmentParameter(s,n.value,eo.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE.value);if(c===eo.NONE.value)return;const u=this.context.getFramebufferAttachmentParameter(s,n.value,eo.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME.value);if(!u)return;const l=this.contextVersion>1?this.context.getFramebufferAttachmentParameter(s,n.value,eo.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE.value):eo.UNSIGNED_BYTE.value;c===eo.RENDERBUFFER.value?this.readFrameBufferAttachmentFromRenderBuffer(e,t,n,a,r,i,o,s,l,u):c===eo.TEXTURE.value&&this.readFrameBufferAttachmentFromTexture(e,t,n,a,r,i,o,s,l,u)}readFrameBufferAttachmentFromRenderBuffer(e,t,n,a,r,i,o,s,c,u){let l=0,E=0;if(u.__SPECTOR_Object_CustomData){const e=u.__SPECTOR_Object_CustomData;if(i=e.width,o=e.height,l=e.samples,E=e.internalFormat,!l&&!is.isSupportedCombination(c,eo.RGBA.value,E))return}else i+=a,o+=r;if(a=r=0,l){const s=e,c=e.createRenderbuffer(),u=e.getParameter(e.RENDERBUFFER_BINDING);e.bindRenderbuffer(e.RENDERBUFFER,c),e.renderbufferStorage(e.RENDERBUFFER,E,i,o),e.bindRenderbuffer(e.RENDERBUFFER,u),e.bindFramebuffer(eo.FRAMEBUFFER.value,this.captureFrameBuffer),e.framebufferRenderbuffer(eo.FRAMEBUFFER.value,eo.COLOR_ATTACHMENT0.value,eo.RENDERBUFFER.value,c);const l=s.getParameter(s.READ_FRAMEBUFFER_BINDING),m=s.getParameter(s.DRAW_FRAMEBUFFER_BINDING);s.bindFramebuffer(s.READ_FRAMEBUFFER,t),s.bindFramebuffer(s.DRAW_FRAMEBUFFER,this.captureFrameBuffer),s.blitFramebuffer(0,0,i,o,0,0,i,o,e.COLOR_BUFFER_BIT,e.NEAREST),s.bindFramebuffer(eo.FRAMEBUFFER.value,this.captureFrameBuffer),s.bindFramebuffer(s.READ_FRAMEBUFFER,l),s.bindFramebuffer(s.DRAW_FRAMEBUFFER,m);this.context.checkFramebufferStatus(eo.FRAMEBUFFER.value)===eo.FRAMEBUFFER_COMPLETE.value&&this.getCapture(e,n.name,a,r,i,o,0,0,eo.UNSIGNED_BYTE.value),e.bindFramebuffer(eo.FRAMEBUFFER.value,t),e.deleteRenderbuffer(c)}else{e.bindFramebuffer(eo.FRAMEBUFFER.value,this.captureFrameBuffer),e.framebufferRenderbuffer(eo.FRAMEBUFFER.value,eo.COLOR_ATTACHMENT0.value,eo.RENDERBUFFER.value,u);this.context.checkFramebufferStatus(eo.FRAMEBUFFER.value)===eo.FRAMEBUFFER_COMPLETE.value&&this.getCapture(e,n.name,a,r,i,o,0,0,c),e.bindFramebuffer(eo.FRAMEBUFFER.value,t)}}readFrameBufferAttachmentFromTexture(e,t,n,a,r,i,o,s,c,u){let l=0;this.contextVersion>1&&(l=this.context.getFramebufferAttachmentParameter(s,n.value,eo.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER.value));const E=this.context.getFramebufferAttachmentParameter(s,n.value,eo.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL.value),m=this.context.getFramebufferAttachmentParameter(s,n.value,eo.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE.value);m>0?no[m].name:eo.TEXTURE_2D.name;let _=!1,d=c;if(u.__SPECTOR_Object_CustomData){const e=u.__SPECTOR_Object_CustomData;if(i=e.width,o=e.height,d=e.type,_=e.target===eo.TEXTURE_2D_ARRAY.name,!is.isSupportedCombination(e.type,e.format,e.internalFormat))return}else i+=a,o+=r;a=r=0,e.bindFramebuffer(eo.FRAMEBUFFER.value,this.captureFrameBuffer),l>0||_?e.framebufferTextureLayer(eo.FRAMEBUFFER.value,eo.COLOR_ATTACHMENT0.value,u,E,l):e.framebufferTexture2D(eo.FRAMEBUFFER.value,eo.COLOR_ATTACHMENT0.value,m||eo.TEXTURE_2D.value,u,E);this.context.checkFramebufferStatus(eo.FRAMEBUFFER.value)===eo.FRAMEBUFFER_COMPLETE.value&&this.getCapture(e,n.name,a,r,i,o,m,l,d),e.bindFramebuffer(eo.FRAMEBUFFER.value,t)}getCapture(e,t,n,a,r,i,o,s,c){const u={attachmentName:t,src:null,textureCubeMapFace:o?no[o].name:null,textureLayer:s};if(!this.quickCapture)try{const t=is.readPixels(e,n,a,r,i,c);if(t){this.workingCanvas.width=r,this.workingCanvas.height=i;const e=this.workingContext2D.createImageData(Math.ceil(r),Math.ceil(i));if(e.data.set(t),this.workingContext2D.putImageData(e,0,0),this.fullCapture)this.captureCanvas.width=this.workingCanvas.width,this.captureCanvas.height=this.workingCanvas.height;else{const e=r/i;e<1?(this.captureCanvas.width=os.captureBaseSize*e,this.captureCanvas.height=os.captureBaseSize):e>1?(this.captureCanvas.width=os.captureBaseSize,this.captureCanvas.height=os.captureBaseSize/e):(this.captureCanvas.width=os.captureBaseSize,this.captureCanvas.height=os.captureBaseSize)}this.captureCanvas.width=Math.max(this.captureCanvas.width,1),this.captureCanvas.height=Math.max(this.captureCanvas.height,1),this.captureContext2D.globalCompositeOperation="copy",this.captureContext2D.scale(1,-1),this.captureContext2D.translate(0,-this.captureCanvas.height),this.captureContext2D.drawImage(this.workingCanvas,0,0,r,i,0,0,this.captureCanvas.width,this.captureCanvas.height),this.captureContext2D.setTransform(1,0,0,1,0,0),this.captureContext2D.globalCompositeOperation="source-over",u.src=this.captureCanvas.toDataURL()}}catch(e){zi.warn("Spector can not capture the visual state: "+e)}this.currentState.Attachments.push(u)}analyse(e){}}os.stateName="VisualState",os.captureBaseSize=256;class ss{constructor(e){this.context=e.context,this.captureFrameBuffer=e.context.createFramebuffer(),this.workingCanvas=document.createElement("canvas"),this.workingContext2D=this.workingCanvas.getContext("2d"),this.captureCanvas=document.createElement("canvas"),this.captureContext2D=this.captureCanvas.getContext("2d"),this._setSmoothing(!0)}appendTextureState(e,t,n=null,a){if(!t)return;const r=t.__SPECTOR_Object_CustomData;if(r&&(this.fullCapture=a,r.type&&(e.textureType=this.getWebGlConstant(r.type)),r.format&&(e.format=this.getWebGlConstant(r.format)),r.internalFormat&&(e.internalFormat=this.getWebGlConstant(r.internalFormat)),e.width=r.width,e.height=r.height,r.depth&&(e.depth=r.depth),n)){const a="NEAREST"===e.samplerMagFilter||"NEAREST"===e.magFilter;e.visual=this.getTextureVisualState(n,t,r,a)}}getTextureVisualState(e,t,n,a){try{const r=this.context,i={};if(!is.isSupportedCombination(n.type,n.format,n.internalFormat))return i;const o=this.context.getParameter(eo.FRAMEBUFFER_BINDING.value);r.bindFramebuffer(eo.FRAMEBUFFER.value,this.captureFrameBuffer);try{const o=0,s=n.width,c=n.height;if(e===eo.TEXTURE_3D&&n.depth){const e=r;for(let u=0;u<n.depth;u++)u>2&&u<n.depth-3||(e.framebufferTextureLayer(eo.FRAMEBUFFER.value,eo.COLOR_ATTACHMENT0.value,t,o,u),i["3D Layer "+u]=this.getCapture(r,0,0,s,c,n.type,a))}else if(e===eo.TEXTURE_2D_ARRAY&&n.depth){const e=r;for(let u=0;u<n.depth;u++)u>2&&u<n.depth-3||(e.framebufferTextureLayer(eo.FRAMEBUFFER.value,eo.COLOR_ATTACHMENT0.value,t,o,u),i["Layer "+u]=this.getCapture(r,0,0,s,c,n.type,a))}else if(e===eo.TEXTURE_CUBE_MAP)for(const e of ss.cubeMapFaces)r.framebufferTexture2D(eo.FRAMEBUFFER.value,eo.COLOR_ATTACHMENT0.value,e.value,t,o),i[e.name]=this.getCapture(r,0,0,s,c,n.type,a);else r.framebufferTexture2D(eo.FRAMEBUFFER.value,eo.COLOR_ATTACHMENT0.value,eo.TEXTURE_2D.value,t,o),i[eo.TEXTURE_2D.name]=this.getCapture(r,0,0,s,c,n.type,a)}catch(e){}return r.bindFramebuffer(eo.FRAMEBUFFER.value,o),i}catch(e){}}getCapture(e,t,n,a,r,i,o){try{if(this.context.checkFramebufferStatus(eo.FRAMEBUFFER.value)!==eo.FRAMEBUFFER_COMPLETE.value)return;i=i||eo.UNSIGNED_BYTE.value;const s=is.readPixels(e,t,n,a,r,i);if(!s)return;this.workingCanvas.width=a,this.workingCanvas.height=r;const c=this.workingContext2D.createImageData(a,r);if(c.data.set(s),this.workingContext2D.putImageData(c,0,0),this.fullCapture)this.captureCanvas.width=this.workingCanvas.width,this.captureCanvas.height=this.workingCanvas.height;else{const e=a/r;e<1?(this.captureCanvas.width=os.captureBaseSize*e,this.captureCanvas.height=os.captureBaseSize):e>1?(this.captureCanvas.width=os.captureBaseSize,this.captureCanvas.height=os.captureBaseSize/e):(this.captureCanvas.width=os.captureBaseSize,this.captureCanvas.height=os.captureBaseSize)}this.captureCanvas.width=Math.max(this.captureCanvas.width,1),this.captureCanvas.height=Math.max(this.captureCanvas.height,1),this.captureContext2D.globalCompositeOperation="copy",this.captureContext2D.scale(1,-1),this.captureContext2D.translate(0,-this.captureCanvas.height),this._setSmoothing(!o),this.captureContext2D.drawImage(this.workingCanvas,0,0,a,r,0,0,this.captureCanvas.width,this.captureCanvas.height),this.captureContext2D.setTransform(1,0,0,1,0,0),this.captureContext2D.globalCompositeOperation="source-over";return this.captureCanvas.toDataURL()}catch(e){}}getWebGlConstant(e){const t=no[e];return t?t.name:e+""}_setSmoothing(e){this.captureContext2D.imageSmoothingEnabled=e,this.captureContext2D.mozImageSmoothingEnabled=e,this.captureContext2D.oImageSmoothingEnabled=e,this.captureContext2D.webkitImageSmoothingEnabled=e,this.captureContext2D.msImageSmoothingEnabled=e}}ss.captureBaseSize=64,ss.cubeMapFaces=[eo.TEXTURE_CUBE_MAP_POSITIVE_X,eo.TEXTURE_CUBE_MAP_POSITIVE_Y,eo.TEXTURE_CUBE_MAP_POSITIVE_Z,eo.TEXTURE_CUBE_MAP_NEGATIVE_X,eo.TEXTURE_CUBE_MAP_NEGATIVE_Y,eo.TEXTURE_CUBE_MAP_NEGATIVE_Z];class cs{constructor(e){this.context=e.context}getUboValue(e,t,n,a){const r=cs.uboTypes[a];if(!r)return;const i=new r.arrayBufferView(n*r.lengthMultiplier),o=this.context,s=o.getIndexedParameter(eo.UNIFORM_BUFFER_BINDING.value,e);if(s){const n=o.getIndexedParameter(eo.UNIFORM_BUFFER_START.value,e),a=o.getParameter(eo.UNIFORM_BUFFER_BINDING.value);try{o.bindBuffer(eo.UNIFORM_BUFFER.value,s),o.getBufferSubData(eo.UNIFORM_BUFFER.value,n+t,i)}catch(e){return}a&&o.bindBuffer(eo.UNIFORM_BUFFER.value,a)}return Array.prototype.slice.call(i)}}cs.uboTypes={[eo.BOOL.value]:{arrayBufferView:Uint8Array,lengthMultiplier:1},[eo.BOOL_VEC2.value]:{arrayBufferView:Uint8Array,lengthMultiplier:2},[eo.BOOL_VEC3.value]:{arrayBufferView:Uint8Array,lengthMultiplier:3},[eo.BOOL_VEC4.value]:{arrayBufferView:Uint8Array,lengthMultiplier:4},[eo.INT.value]:{arrayBufferView:Int32Array,lengthMultiplier:1},[eo.INT_VEC2.value]:{arrayBufferView:Int32Array,lengthMultiplier:2},[eo.INT_VEC3.value]:{arrayBufferView:Int32Array,lengthMultiplier:3},[eo.INT_VEC4.value]:{arrayBufferView:Int32Array,lengthMultiplier:4},[eo.UNSIGNED_INT.value]:{arrayBufferView:Uint32Array,lengthMultiplier:1},[eo.UNSIGNED_INT_VEC2.value]:{arrayBufferView:Uint32Array,lengthMultiplier:2},[eo.UNSIGNED_INT_VEC3.value]:{arrayBufferView:Uint32Array,lengthMultiplier:3},[eo.UNSIGNED_INT_VEC4.value]:{arrayBufferView:Uint32Array,lengthMultiplier:4},[eo.FLOAT.value]:{arrayBufferView:Float32Array,lengthMultiplier:1},[eo.FLOAT_VEC2.value]:{arrayBufferView:Float32Array,lengthMultiplier:2},[eo.FLOAT_VEC3.value]:{arrayBufferView:Float32Array,lengthMultiplier:3},[eo.FLOAT_VEC4.value]:{arrayBufferView:Float32Array,lengthMultiplier:4},[eo.FLOAT_MAT2.value]:{arrayBufferView:Float32Array,lengthMultiplier:4},[eo.FLOAT_MAT2x3.value]:{arrayBufferView:Float32Array,lengthMultiplier:6},[eo.FLOAT_MAT2x4.value]:{arrayBufferView:Float32Array,lengthMultiplier:8},[eo.FLOAT_MAT3.value]:{arrayBufferView:Float32Array,lengthMultiplier:9},[eo.FLOAT_MAT3x2.value]:{arrayBufferView:Float32Array,lengthMultiplier:6},[eo.FLOAT_MAT3x4.value]:{arrayBufferView:Float32Array,lengthMultiplier:12},[eo.FLOAT_MAT4.value]:{arrayBufferView:Float32Array,lengthMultiplier:16},[eo.FLOAT_MAT4x2.value]:{arrayBufferView:Float32Array,lengthMultiplier:8},[eo.FLOAT_MAT4x3.value]:{arrayBufferView:Float32Array,lengthMultiplier:12},[eo.SAMPLER_2D.value]:{arrayBufferView:Uint8Array,lengthMultiplier:1},[eo.SAMPLER_CUBE.value]:{arrayBufferView:Uint8Array,lengthMultiplier:1}};class us extends co{get typeName(){return"WebGLBuffer"}}class ls extends co{get typeName(){return"WebGLFramebuffer"}}class Es extends co{get typeName(){return"WebGLProgram"}static saveInGlobalStore(e){const t=so.getWebGlObjectTag(e);t&&(this.store[t.id]=e)}static getFromGlobalStore(e){return this.store[e]}static updateInGlobalStore(e,t){if(!t)return;const n=this.getFromGlobalStore(e);if(!n)return;const a=so.getWebGlObjectTag(n);a&&(so.attachWebGlObjectTag(t,a),this.store[a.id]=t)}}Es.store={};class ms extends co{get typeName(){return"WebGLQuery"}}class _s extends co{get typeName(){return"WebGLRenderbuffer"}}class ds extends co{get typeName(){return"WebGLSampler"}}class Ts extends co{get typeName(){return"WebGLShader"}}class As extends co{get typeName(){return"WebGLSync"}}class Rs extends co{get typeName(){return"WebGLTexture"}}class ps extends co{get typeName(){return"WebGLTransformFeedback"}}class hs extends co{get typeName(){return"WebGLUniformLocation"}}class fs extends co{get typeName(){return"WebGLVertexArrayObject"}}class Cs{static getProgramData(e,t){const n={LINK_STATUS:e.getProgramParameter(t,eo.LINK_STATUS.value),VALIDATE_STATUS:e.getProgramParameter(t,eo.VALIDATE_STATUS.value)},a=e.getAttachedShaders(t),r=new Array(2);let i=0;for(const t of a){const n=this.readShaderFromContext(e,t);i+=n.source.length,n.shaderType===eo.FRAGMENT_SHADER.name?r[1]=n:r[0]=n}return{programStatus:n,shaders:r,length:i}}static readShaderFromContext(e,t){const n=e.getShaderSource(t),a=e.getExtension("WEBGL_debug_shaders"),r=a?a.getTranslatedShaderSource(t):null,i=e.getShaderParameter(t,eo.SHADER_TYPE.value)===eo.FRAGMENT_SHADER.value;let o=t&&t.__SPECTOR_Metadata&&t.__SPECTOR_Metadata.name?t.__SPECTOR_Metadata.name:this.readNameFromShaderSource(n);return o||(o=i?"Fragment":"Vertex"),{COMPILE_STATUS:e.getShaderParameter(t,eo.COMPILE_STATUS.value),shaderType:i?eo.FRAGMENT_SHADER.name:eo.VERTEX_SHADER.name,name:o,source:n,translatedSource:r}}static readNameFromShaderSource(e){try{let t,n="";const a=/#define[\s]+SHADER_NAME[\s]+([\S]+)(\n|$)/gi;if(t=a.exec(e),null!==t&&(t.index===a.lastIndex&&a.lastIndex++,n=t[1]),""===n){const a=/#define[\s]+SHADER_NAME_B64[\s]+([\S]+)(\n|$)/gi;t=a.exec(e),null!==t&&(t.index===a.lastIndex&&a.lastIndex++,n=t[1]),n&&(n=decodeURIComponent(atob(n)))}return n}catch(e){return null}}}class Fs extends Vo{get stateName(){return Fs.stateName}get requireStartAndStopStates(){return!1}constructor(e){super(e),this.drawCallTextureInputState=new ss(e),this.drawCallUboInputState=new cs(e)}getConsumeCommands(){return $i}getChangeCommandsByState(){return{}}readFromContext(){const e=this.context.getParameter(eo.CURRENT_PROGRAM.value);if(!e)return;this.currentState.frameBuffer=this.readFrameBufferFromContext();const t=e.__SPECTOR_Object_CustomData?e.__SPECTOR_Object_CustomData:Cs.getProgramData(this.context,e);if(this.currentState.programStatus={...t.programStatus},this.currentState.programStatus.program=this.getSpectorData(e),this.currentState.programStatus.RECOMPILABLE=ki.isBuildableProgram(e),this.currentState.programStatus.RECOMPILABLE&&Es.saveInGlobalStore(e),this.currentState.shaders=t.shaders,this.lastCommandName?.indexOf("Elements")>=0){const e=this.context.getParameter(this.context.ELEMENT_ARRAY_BUFFER_BINDING);e&&(this.currentState.elementArray={},this.currentState.elementArray.arrayBuffer=this.getSpectorData(e))}const n=this.context.getProgramParameter(e,eo.ACTIVE_ATTRIBUTES.value);this.currentState.attributes=[];for(let t=0;t<n;t++){const n=this.readAttributeFromContext(e,t);this.currentState.attributes.push(n)}const a=this.context.getProgramParameter(e,eo.ACTIVE_UNIFORMS.value);this.currentState.uniforms=[];const r=[];for(let t=0;t<a;t++){r.push(t);const n=this.readUniformFromContext(e,t);this.currentState.uniforms.push(n)}if(this.contextVersion>1){const t=this.context.getProgramParameter(e,eo.ACTIVE_UNIFORM_BLOCKS.value);this.currentState.uniformBlocks=[];for(let n=0;n<t;n++){const t=this.readUniformBlockFromContext(e,n);this.currentState.uniformBlocks.push(t)}this.readUniformsFromContextIntoState(e,r,this.currentState.uniforms,this.currentState.uniformBlocks);if(this.context.getParameter(eo.TRANSFORM_FEEDBACK_ACTIVE.value)){const t=this.context.getProgramParameter(e,eo.TRANSFORM_FEEDBACK_BUFFER_MODE.value);this.currentState.transformFeedbackMode=this.getWebGlConstant(t),this.currentState.transformFeedbacks=[];const n=this.context.getProgramParameter(e,eo.TRANSFORM_FEEDBACK_VARYINGS.value);for(let t=0;t<n;t++){const n=this.readTransformFeedbackFromContext(e,t);this.currentState.transformFeedbacks.push(n)}}}for(let e=0;e<r.length;e++){const t=this.currentState.uniforms[e],n=t.value??t.values;if(null!=n){const e=Fs.samplerTypes[t.typeValue];if(e)if(n.length){t.textures=[];for(let a=0;a<n.length;a++)t.textures.push(this.readTextureFromContext(n[a].value,e))}else t.texture=this.readTextureFromContext(n,e)}delete t.typeValue}}readFrameBufferFromContext(){const e=this.context.getParameter(eo.FRAMEBUFFER_BINDING.value);if(!e)return null;const t={};t.frameBuffer=this.getSpectorData(e);this.readFrameBufferAttachmentFromContext(eo.DEPTH_ATTACHMENT.value)&&(t.depthAttachment=this.readFrameBufferAttachmentFromContext(eo.DEPTH_ATTACHMENT.value));this.readFrameBufferAttachmentFromContext(eo.STENCIL_ATTACHMENT.value)&&(t.stencilAttachment=this.readFrameBufferAttachmentFromContext(eo.STENCIL_ATTACHMENT.value));if(this.extensions[eo.MAX_DRAW_BUFFERS_WEBGL.extensionName]){t.colorAttachments=[];const e=this.context.getParameter(eo.MAX_DRAW_BUFFERS_WEBGL.value);for(let n=0;n<e;n++){const e=this.readFrameBufferAttachmentFromContext(to["COLOR_ATTACHMENT"+n+"_WEBGL"].value);e&&t.colorAttachments.push(e)}}else if(this.contextVersion>1){const e=this.context;t.colorAttachments=[];const n=e.getParameter(eo.MAX_DRAW_BUFFERS.value);for(let e=0;e<n;e++){const n=this.readFrameBufferAttachmentFromContext(to["COLOR_ATTACHMENT"+e].value);n&&t.colorAttachments.push(n)}}else{const e=this.readFrameBufferAttachmentFromContext(to.COLOR_ATTACHMENT0.value);e&&(t.colorAttachments=[e])}return t}readFrameBufferAttachmentFromContext(e){const t=eo.FRAMEBUFFER.value,n=this.context.getFramebufferAttachmentParameter(t,e,eo.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE.value);if(n===eo.NONE.value)return;const a={},r=this.context.getFramebufferAttachmentParameter(t,e,eo.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME.value);if(n===eo.RENDERBUFFER.value){if(a.type="RENDERBUFFER",a.buffer=this.getSpectorData(r),r){const e=r.__SPECTOR_Object_CustomData;e&&(e.internalFormat&&(a.internalFormat=this.getWebGlConstant(e.internalFormat)),a.width=e.width,a.height=e.height,a.msaaSamples=e.samples)}}else if(n===eo.TEXTURE.value){a.type="TEXTURE",a.texture=this.getSpectorData(r),a.textureLevel=this.context.getFramebufferAttachmentParameter(t,e,eo.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL.value);const n=this.context.getFramebufferAttachmentParameter(t,e,eo.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE.value);a.textureCubeMapFace=this.getWebGlConstant(n),this.drawCallTextureInputState.appendTextureState(a,r,null,this.fullCapture)}return this.extensions.EXT_sRGB&&(a.encoding=this.getWebGlConstant(this.context.getFramebufferAttachmentParameter(t,e,eo.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT.value))),this.contextVersion>1&&(a.alphaSize=this.context.getFramebufferAttachmentParameter(t,e,eo.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE.value),a.blueSize=this.context.getFramebufferAttachmentParameter(t,e,eo.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE.value),a.encoding=this.getWebGlConstant(this.context.getFramebufferAttachmentParameter(t,e,eo.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING.value)),a.componentType=this.getWebGlConstant(this.context.getFramebufferAttachmentParameter(t,e,eo.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE.value)),a.depthSize=this.context.getFramebufferAttachmentParameter(t,e,eo.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE.value),a.greenSize=this.context.getFramebufferAttachmentParameter(t,e,eo.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE.value),a.redSize=this.context.getFramebufferAttachmentParameter(t,e,eo.FRAMEBUFFER_ATTACHMENT_RED_SIZE.value),a.stencilSize=this.context.getFramebufferAttachmentParameter(t,e,eo.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE.value),n===eo.TEXTURE.value&&(a.textureLayer=this.context.getFramebufferAttachmentParameter(t,e,eo.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER.value))),a}readAttributeFromContext(e,t){const n=this.context.getActiveAttrib(e,t),a=this.context.getAttribLocation(e,n.name);if(-1===a)return{name:n.name,size:n.size,type:this.getWebGlConstant(n.type),location:-1};const r=this.context.getVertexAttrib(a,eo.CURRENT_VERTEX_ATTRIB.value),i=this.context.getVertexAttrib(a,eo.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING.value),o={name:n.name,size:n.size,type:this.getWebGlConstant(n.type),location:a,offsetPointer:this.context.getVertexAttribOffset(a,eo.VERTEX_ATTRIB_ARRAY_POINTER.value),bufferBinding:this.getSpectorData(i),enabled:this.context.getVertexAttrib(a,eo.VERTEX_ATTRIB_ARRAY_ENABLED.value),arraySize:this.context.getVertexAttrib(a,eo.VERTEX_ATTRIB_ARRAY_SIZE.value),stride:this.context.getVertexAttrib(a,eo.VERTEX_ATTRIB_ARRAY_STRIDE.value),arrayType:this.getWebGlConstant(this.context.getVertexAttrib(a,eo.VERTEX_ATTRIB_ARRAY_TYPE.value)),normalized:this.context.getVertexAttrib(a,eo.VERTEX_ATTRIB_ARRAY_NORMALIZED.value),vertexAttrib:Array.prototype.slice.call(r)};return this.extensions[eo.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE.extensionName]?o.divisor=this.context.getVertexAttrib(a,eo.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE.value):this.contextVersion>1&&(o.integer=this.context.getVertexAttrib(a,eo.VERTEX_ATTRIB_ARRAY_INTEGER.value),o.divisor=this.context.getVertexAttrib(a,eo.VERTEX_ATTRIB_ARRAY_DIVISOR.value)),this.appendBufferCustomData(o,i),o}readUniformFromContext(e,t){const n=this.context.getActiveUniform(e,t),a=this.context.getUniformLocation(e,n.name);if(a){if(n.size>1&&n.name&&n.name.indexOf("[0]")===n.name.length-3){const t=[];for(let a=0;a<n.size;a++){const r=this.context.getUniformLocation(e,n.name.replace("[0]","["+a+"]"));if(r){let n=this.context.getUniform(e,r);n.length&&(n=Array.prototype.slice.call(n)),t.push({value:n})}}return{name:n.name.replace("[0]",""),size:n.size,type:this.getWebGlConstant(n.type),typeValue:n.type,location:this.getSpectorData(a),values:t}}{let t=this.context.getUniform(e,a);t.length&&(t=Array.prototype.slice.call(t));return{name:n.name,size:n.size,type:this.getWebGlConstant(n.type),typeValue:n.type,location:this.getSpectorData(a),value:t}}}return{name:n.name,size:n.size,type:this.getWebGlConstant(n.type),typeValue:n.type}}readTextureFromContext(e,t){const n=this.context.getParameter(eo.ACTIVE_TEXTURE.value);this.context.activeTexture(eo.TEXTURE0.value+e);const a={magFilter:this.getWebGlConstant(this.context.getTexParameter(t.value,eo.TEXTURE_MAG_FILTER.value)),minFilter:this.getWebGlConstant(this.context.getTexParameter(t.value,eo.TEXTURE_MIN_FILTER.value)),wrapS:this.getWebGlConstant(this.context.getTexParameter(t.value,eo.TEXTURE_WRAP_S.value)),wrapT:this.getWebGlConstant(this.context.getTexParameter(t.value,eo.TEXTURE_WRAP_T.value))};if(this.extensions[eo.TEXTURE_MAX_ANISOTROPY_EXT.extensionName]&&(a.anisotropy=this.context.getTexParameter(t.value,eo.TEXTURE_MAX_ANISOTROPY_EXT.value)),this.contextVersion>1){a.baseLevel=this.context.getTexParameter(t.value,eo.TEXTURE_BASE_LEVEL.value),a.immutable=this.context.getTexParameter(t.value,eo.TEXTURE_IMMUTABLE_FORMAT.value),a.immutableLevels=this.context.getTexParameter(t.value,eo.TEXTURE_IMMUTABLE_LEVELS.value),a.maxLevel=this.context.getTexParameter(t.value,eo.TEXTURE_MAX_LEVEL.value);const e=this.context.getParameter(eo.SAMPLER_BINDING.value);if(e){a.sampler=this.getSpectorData(e);const t=this.context;a.samplerMaxLod=t.getSamplerParameter(e,eo.TEXTURE_MAX_LOD.value),a.samplerMinLod=t.getSamplerParameter(e,eo.TEXTURE_MIN_LOD.value),a.samplerCompareFunc=this.getWebGlConstant(t.getSamplerParameter(e,eo.TEXTURE_COMPARE_FUNC.value)),a.samplerCompareMode=this.getWebGlConstant(t.getSamplerParameter(e,eo.TEXTURE_COMPARE_MODE.value)),a.samplerWrapS=this.getWebGlConstant(t.getSamplerParameter(e,eo.TEXTURE_WRAP_S.value)),a.samplerWrapT=this.getWebGlConstant(t.getSamplerParameter(e,eo.TEXTURE_WRAP_T.value)),a.samplerWrapR=this.getWebGlConstant(t.getSamplerParameter(e,eo.TEXTURE_WRAP_R.value)),a.samplerMagFilter=this.getWebGlConstant(t.getSamplerParameter(e,eo.TEXTURE_MAG_FILTER.value)),a.samplerMinFilter=this.getWebGlConstant(t.getSamplerParameter(e,eo.TEXTURE_MIN_FILTER.value))}else a.maxLod=this.context.getTexParameter(t.value,eo.TEXTURE_MAX_LOD.value),a.minLod=this.context.getTexParameter(t.value,eo.TEXTURE_MIN_LOD.value),a.compareFunc=this.getWebGlConstant(this.context.getTexParameter(t.value,eo.TEXTURE_COMPARE_FUNC.value)),a.compareMode=this.getWebGlConstant(this.context.getTexParameter(t.value,eo.TEXTURE_COMPARE_MODE.value)),a.wrapR=this.getWebGlConstant(this.context.getTexParameter(t.value,eo.TEXTURE_WRAP_R.value))}const r=this.getTextureStorage(t);if(r){const e=this.quickCapture?null:t;this.drawCallTextureInputState.appendTextureState(a,r,e,this.fullCapture)}return this.context.activeTexture(n),a}getTextureStorage(e){return e===eo.TEXTURE_2D?this.context.getParameter(eo.TEXTURE_BINDING_2D.value):e===eo.TEXTURE_CUBE_MAP?this.context.getParameter(eo.TEXTURE_BINDING_CUBE_MAP.value):e===eo.TEXTURE_3D?this.context.getParameter(eo.TEXTURE_BINDING_3D.value):e===eo.TEXTURE_2D_ARRAY?this.context.getParameter(eo.TEXTURE_BINDING_2D_ARRAY.value):void 0}readUniformsFromContextIntoState(e,t,n,a){const r=this.context,i=r.getActiveUniforms(e,t,eo.UNIFORM_TYPE.value),o=r.getActiveUniforms(e,t,eo.UNIFORM_SIZE.value),s=r.getActiveUniforms(e,t,eo.UNIFORM_BLOCK_INDEX.value),c=r.getActiveUniforms(e,t,eo.UNIFORM_OFFSET.value),u=r.getActiveUniforms(e,t,eo.UNIFORM_ARRAY_STRIDE.value),l=r.getActiveUniforms(e,t,eo.UNIFORM_MATRIX_STRIDE.value),E=r.getActiveUniforms(e,t,eo.UNIFORM_IS_ROW_MAJOR.value);for(let m=0;m<t.length;m++){const t=n[m];if(t.type=this.getWebGlConstant(i[m]),t.size=o[m],t.blockIndice=s[m],t.blockIndice>-1&&(t.blockName=r.getActiveUniformBlockName(e,t.blockIndice)),t.offset=c[m],t.arrayStride=u[m],t.matrixStride=l[m],t.rowMajor=E[m],t.blockIndice>-1){const e=a[s[m]].bindingPoint;t.value=this.drawCallUboInputState.getUboValue(e,t.offset,t.size,i[m])}}}readTransformFeedbackFromContext(e,t){const n=this.context,a=n.getTransformFeedbackVarying(e,t),r=n.getIndexedParameter(eo.TRANSFORM_FEEDBACK_BUFFER_BINDING.value,t),i={name:a.name,size:a.size,type:this.getWebGlConstant(a.type),buffer:this.getSpectorData(r),bufferSize:n.getIndexedParameter(eo.TRANSFORM_FEEDBACK_BUFFER_SIZE.value,t),bufferStart:n.getIndexedParameter(eo.TRANSFORM_FEEDBACK_BUFFER_START.value,t)};return this.appendBufferCustomData(i,r),i}readUniformBlockFromContext(e,t){const n=this.context,a=n.getActiveUniformBlockParameter(e,t,eo.UNIFORM_BLOCK_BINDING.value),r=n.getIndexedParameter(eo.UNIFORM_BUFFER_BINDING.value,a),i={name:n.getActiveUniformBlockName(e,t),bindingPoint:a,size:n.getActiveUniformBlockParameter(e,t,eo.UNIFORM_BLOCK_DATA_SIZE.value),activeUniformCount:n.getActiveUniformBlockParameter(e,t,eo.UNIFORM_BLOCK_ACTIVE_UNIFORMS.value),vertex:n.getActiveUniformBlockParameter(e,t,eo.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER.value),fragment:n.getActiveUniformBlockParameter(e,t,eo.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER.value),buffer:this.getSpectorData(r)};return this.appendBufferCustomData(i,r),i}appendBufferCustomData(e,t){if(t){const n=t.__SPECTOR_Object_CustomData;n&&(n.usage&&(e.bufferUsage=this.getWebGlConstant(n.usage)),e.bufferLength=n.length,n.offset&&(e.bufferOffset=n.offset),n.sourceLength&&(e.bufferSourceLength=n.sourceLength))}}getWebGlConstant(e){const t=no[e];return t?t.name:e}}Fs.stateName="DrawCall",Fs.samplerTypes={[eo.SAMPLER_2D.value]:eo.TEXTURE_2D,[eo.SAMPLER_CUBE.value]:eo.TEXTURE_CUBE_MAP,[eo.SAMPLER_3D.value]:eo.TEXTURE_3D,[eo.SAMPLER_2D_SHADOW.value]:eo.TEXTURE_2D,[eo.SAMPLER_2D_ARRAY.value]:eo.TEXTURE_2D_ARRAY,[eo.SAMPLER_2D_ARRAY_SHADOW.value]:eo.TEXTURE_2D_ARRAY,[eo.SAMPLER_CUBE_SHADOW.value]:eo.TEXTURE_CUBE_MAP,[eo.INT_SAMPLER_2D.value]:eo.TEXTURE_2D,[eo.INT_SAMPLER_3D.value]:eo.TEXTURE_3D,[eo.INT_SAMPLER_CUBE.value]:eo.TEXTURE_CUBE_MAP,[eo.INT_SAMPLER_2D_ARRAY.value]:eo.TEXTURE_2D_ARRAY,[eo.UNSIGNED_INT_SAMPLER_2D.value]:eo.TEXTURE_2D,[eo.UNSIGNED_INT_SAMPLER_3D.value]:eo.TEXTURE_3D,[eo.UNSIGNED_INT_SAMPLER_CUBE.value]:eo.TEXTURE_CUBE_MAP,[eo.UNSIGNED_INT_SAMPLER_2D_ARRAY.value]:eo.TEXTURE_2D_ARRAY};class vs{constructor(e){this.contextInformation=e,this.stateTrackers=[],this.onCommandCapturedCallbacks={},this.initStateTrackers()}startCapture(e,t,n){for(const a of this.stateTrackers){const r=a.startCapture(!0,t,n);a.requireStartAndStopStates&&(e.initState[a.stateName]=r)}}stopCapture(e){for(const t of this.stateTrackers){const n=t.stopCapture();t.requireStartAndStopStates&&(e.endState[t.stateName]=n)}}captureState(e){const t=this.onCommandCapturedCallbacks[e.name];if(t)for(const n of t)n(e)}initStateTrackers(){this.stateTrackers.push(new zo(this.contextInformation),new jo(this.contextInformation),new Zo(this.contextInformation),new qo(this.contextInformation),new Qo(this.contextInformation),new $o(this.contextInformation),new Jo(this.contextInformation),new es(this.contextInformation),new ts(this.contextInformation),new ns(this.contextInformation),new as(this.contextInformation),new rs(this.contextInformation),new os(this.contextInformation),new Fs(this.contextInformation));for(const e of this.stateTrackers)e.registerCallbacks(this.onCommandCapturedCallbacks)}}class Ss{static initializeByteSizeFormat(){this.byteSizePerInternalFormat||(this.byteSizePerInternalFormat={[eo.R8.value]:1,[eo.R16F.value]:2,[eo.R32F.value]:4,[eo.R8UI.value]:1,[eo.RG8.value]:2,[eo.RG16F.value]:4,[eo.RG32F.value]:8,[eo.ALPHA.value]:1,[eo.RGB.value]:3,[eo.RGBA.value]:4,[eo.LUMINANCE.value]:1,[eo.LUMINANCE_ALPHA.value]:2,[eo.DEPTH_COMPONENT.value]:1,[eo.DEPTH_STENCIL.value]:2,[eo.SRGB_EXT.value]:3,[eo.SRGB_ALPHA_EXT.value]:4,[eo.RGB8.value]:3,[eo.SRGB8.value]:3,[eo.RGB565.value]:2,[eo.R11F_G11F_B10F.value]:4,[eo.RGB9_E5.value]:2,[eo.RGB16F.value]:6,[eo.RGB32F.value]:12,[eo.RGB8UI.value]:3,[eo.RGBA8.value]:4,[eo.RGB5_A1.value]:2,[eo.RGBA16F.value]:8,[eo.RGBA32F.value]:16,[eo.RGBA8UI.value]:4,[eo.COMPRESSED_R11_EAC.value]:4,[eo.COMPRESSED_SIGNED_R11_EAC.value]:4,[eo.COMPRESSED_RG11_EAC.value]:4,[eo.COMPRESSED_SIGNED_RG11_EAC.value]:4,[eo.COMPRESSED_RGB8_ETC2.value]:4,[eo.COMPRESSED_RGBA8_ETC2_EAC.value]:4,[eo.COMPRESSED_SRGB8_ETC2.value]:4,[eo.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC.value]:4,[eo.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2.value]:4,[eo.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2.value]:4,[eo.COMPRESSED_RGB_S3TC_DXT1_EXT.value]:.5,[eo.COMPRESSED_RGBA_S3TC_DXT3_EXT.value]:1,[eo.COMPRESSED_RGBA_S3TC_DXT5_EXT.value]:1,[eo.COMPRESSED_RGB_PVRTC_4BPPV1_IMG.value]:.5,[eo.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG.value]:.5,[eo.COMPRESSED_RGB_PVRTC_2BPPV1_IMG.value]:.25,[eo.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG.value]:.25,[eo.COMPRESSED_RGB_ETC1_WEBGL.value]:.5,[eo.COMPRESSED_RGB_ATC_WEBGL.value]:.5,[eo.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL.value]:1,[eo.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL.value]:1})}constructor(e){this.options=e,this.createCommandNames=this.getCreateCommandNames(),this.updateCommandNames=this.getUpdateCommandNames(),this.deleteCommandNames=this.getDeleteCommandNames(),this.startTime=Zi.now,this.memoryPerSecond={},this.totalMemory=0,this.frameMemory=0,this.capturing=!1,Ss.initializeByteSizeFormat()}registerCallbacks(e){for(const t of this.createCommandNames)e[t]=e[t]||[],e[t].push(this.createWithoutSideEffects.bind(this));for(const t of this.updateCommandNames)e[t]=e[t]||[],e[t].push(this.updateWithoutSideEffects.bind(this));for(const t of this.deleteCommandNames)e[t]=e[t]||[],e[t].push(this.deleteWithoutSideEffects.bind(this))}startCapture(){this.frameMemory=0,this.capturing=!0}stopCapture(){this.frameMemory=0,this.capturing=!1}appendRecordedInformation(e){e.frameMemory[this.objectName]=this.frameMemory,e.memory[this.objectName]=this.memoryPerSecond}create(e){}createWithoutSideEffects(e){this.options.toggleCapture(!1),this.create(e),this.options.toggleCapture(!0)}updateWithoutSideEffects(e){if(!e||0===e.arguments.length)return;this.options.toggleCapture(!1);const t=e.arguments[0],n=this.getBoundInstance(t);if(!n)return void this.options.toggleCapture(!0);if(!so.getWebGlObjectTag(n))return void this.options.toggleCapture(!0);const a=this.getWebGlConstant(t),r=this.update(e,a,n);this.changeMemorySize(r),this.options.toggleCapture(!0)}deleteWithoutSideEffects(e){if(!e||!e.arguments||e.arguments.length<1)return;const t=e.arguments[0];if(!t)return;this.options.toggleCapture(!1);const n=this.delete(t);this.changeMemorySize(-n),this.options.toggleCapture(!0)}changeMemorySize(e){this.totalMemory+=e,this.capturing&&(this.frameMemory+=e);const t=Zi.now-this.startTime,n=Math.round(t/1e3);this.memoryPerSecond[n]=this.totalMemory}getWebGlConstant(e){const t=no[e];return t?t.name:e+""}getByteSizeForInternalFormat(e){return Ss.byteSizePerInternalFormat[e]||4}}class Ns extends Ss{get objectName(){return"Buffer"}getCreateCommandNames(){return["createBuffer"]}getUpdateCommandNames(){return["bufferData"]}getDeleteCommandNames(){return["deleteBuffer"]}getBoundInstance(e){const t=this.options.context;return e===eo.ARRAY_BUFFER.value?t.getParameter(eo.ARRAY_BUFFER_BINDING.value):e===eo.ELEMENT_ARRAY_BUFFER.value?t.getParameter(eo.ELEMENT_ARRAY_BUFFER_BINDING.value):e===eo.COPY_READ_BUFFER.value?t.getParameter(eo.COPY_READ_BUFFER_BINDING.value):e===eo.COPY_WRITE_BUFFER.value?t.getParameter(eo.COPY_WRITE_BUFFER_BINDING.value):e===eo.TRANSFORM_FEEDBACK_BUFFER.value?t.getParameter(eo.TRANSFORM_FEEDBACK_BUFFER_BINDING.value):e===eo.UNIFORM_BUFFER.value?t.getParameter(eo.UNIFORM_BUFFER_BINDING.value):e===eo.PIXEL_PACK_BUFFER.value?t.getParameter(eo.PIXEL_PACK_BUFFER_BINDING.value):e===eo.PIXEL_UNPACK_BUFFER.value?t.getParameter(eo.PIXEL_UNPACK_BUFFER_BINDING.value):void 0}delete(e){const t=e.__SPECTOR_Object_CustomData;return t?t.length:0}update(e,t,n){const a=this.getCustomData(t,e);if(!a)return 0;const r=n.__SPECTOR_Object_CustomData?n.__SPECTOR_Object_CustomData.length:0;return n.__SPECTOR_Object_CustomData=a,a.length-r}getCustomData(e,t){const n=this.getLength(t);return t.arguments.length>=4?{target:e,length:n,usage:t.arguments[2],offset:t.arguments[3],sourceLength:t.arguments[1]?t.arguments[1].length:-1}:3===t.arguments.length?{target:e,length:n,usage:t.arguments[2]}:void 0}getLength(e){let t=-1,n=0;return 5===e.arguments.length&&(t=e.arguments[4],n=e.arguments[3]),t<=0&&(t="number"==typeof e.arguments[1]?e.arguments[1]:e.arguments[1]&&(e.arguments[1].byteLength||e.arguments[1].length)||0),t-n}}class Is extends Ss{get objectName(){return"Renderbuffer"}getCreateCommandNames(){return["createRenderbuffer"]}getUpdateCommandNames(){return["renderbufferStorage","renderbufferStorageMultisample"]}getDeleteCommandNames(){return["deleteRenderbuffer"]}getBoundInstance(e){const t=this.options.context;if(e===eo.RENDERBUFFER.value)return t.getParameter(eo.RENDERBUFFER_BINDING.value)}delete(e){const t=e.__SPECTOR_Object_CustomData;return t?t.length:0}update(e,t,n){const a=this.getCustomData(e,t);if(!a)return 0;const r=n.__SPECTOR_Object_CustomData?n.__SPECTOR_Object_CustomData.length:0;return a.length=a.width*a.height*this.getByteSizeForInternalFormat(a.internalFormat),n.__SPECTOR_Object_CustomData=a,a.length-r}getCustomData(e,t){return 4===e.arguments.length?{target:t,internalFormat:e.arguments[1],width:e.arguments[2],height:e.arguments[3],length:0,samples:0}:{target:t,internalFormat:e.arguments[2],width:e.arguments[3],height:e.arguments[4],length:0,samples:e.arguments[1]}}}class gs extends Ss{get objectName(){return"Texture2d"}getCreateCommandNames(){return["createTexture"]}getUpdateCommandNames(){return["texImage2D","compressedTexImage2D","texStorage2D"]}getDeleteCommandNames(){return["deleteTexture"]}getBoundInstance(e){const t=this.options.context;return e===eo.TEXTURE_2D.value?t.getParameter(eo.TEXTURE_BINDING_2D.value):e===eo.TEXTURE_CUBE_MAP_POSITIVE_X.value||e===eo.TEXTURE_CUBE_MAP_POSITIVE_Y.value||e===eo.TEXTURE_CUBE_MAP_POSITIVE_Z.value||e===eo.TEXTURE_CUBE_MAP_NEGATIVE_X.value||e===eo.TEXTURE_CUBE_MAP_NEGATIVE_Y.value||e===eo.TEXTURE_CUBE_MAP_NEGATIVE_Z.value?t.getParameter(eo.TEXTURE_BINDING_CUBE_MAP.value):void 0}delete(e){const t=e.__SPECTOR_Object_CustomData;return t?t.target===eo.TEXTURE_2D_ARRAY.name||t.target===eo.TEXTURE_3D.name?0:t.length:0}update(e,t,n){const a=this.getCustomData(e,t,n);if(!a)return 0;const r=n.__SPECTOR_Object_CustomData?n.__SPECTOR_Object_CustomData.length:0;if(a.isCompressed){if(e.arguments.length>=7){const t=e.arguments[6];a.length="number"==typeof t?t:t?.byteLength}}else{const e="TEXTURE_2D"===t?1:6;let n=a.internalFormat;n===eo.RGBA.value&&(a.type===eo.FLOAT.value&&(n=eo.RGBA32F.value),a.type===eo.HALF_FLOAT_OES.value&&(n=eo.RGBA16F.value)),a.length=a.width*a.height*e*this.getByteSizeForInternalFormat(n)}return a.length=0|a.length,n.__SPECTOR_Object_CustomData=a,a.length-r}getCustomData(e,t,n){return"texImage2D"===e.name?this.getTexImage2DCustomData(e,t,n):"compressedTexImage2D"===e.name?this.getCompressedTexImage2DCustomData(e,t,n):"texStorage2D"===e.name?this.getTexStorage2DCustomData(e,t,n):void 0}getTexStorage2DCustomData(e,t,n){let a;return 5===e.arguments.length&&(a={target:t,internalFormat:e.arguments[2],width:e.arguments[3],height:e.arguments[4],length:0,isCompressed:!1}),a}getCompressedTexImage2DCustomData(e,t,n){if(0!==e.arguments[1])return;let a;return e.arguments.length>=7&&(a={target:t,internalFormat:e.arguments[2],width:e.arguments[3],height:e.arguments[4],length:0,isCompressed:!0}),a}getTexImage2DCustomData(e,t,n){if(0!==e.arguments[1])return;let a;return e.arguments.length>=8?a={target:t,internalFormat:e.arguments[2],width:e.arguments[3],height:e.arguments[4],format:e.arguments[6],type:e.arguments[7],length:0,isCompressed:!1}:6===e.arguments.length&&(a={target:t,internalFormat:e.arguments[2],width:e.arguments[5].width,height:e.arguments[5].height,format:e.arguments[3],type:e.arguments[4],length:0,isCompressed:!1}),a}}class Bs extends Ss{get objectName(){return"Texture3d"}getCreateCommandNames(){return["createTexture"]}getUpdateCommandNames(){return["texImage3D","compressedTexImage3D","texStorage3D"]}getDeleteCommandNames(){return["deleteTexture"]}getBoundInstance(e){const t=this.options.context;return e===eo.TEXTURE_2D_ARRAY.value?t.getParameter(eo.TEXTURE_BINDING_2D_ARRAY.value):e===eo.TEXTURE_3D.value?t.getParameter(eo.TEXTURE_BINDING_3D.value):void 0}delete(e){const t=e.__SPECTOR_Object_CustomData;return t?t.target!==eo.TEXTURE_2D_ARRAY.name&&t.target!==eo.TEXTURE_3D.name?0:t.length:0}update(e,t,n){if(e.arguments.length>=2&&0!==e.arguments[1])return 0;const a=this.getCustomData(e,t,n);if(!a)return 0;const r=n.__SPECTOR_Object_CustomData?n.__SPECTOR_Object_CustomData.length:0;if(a.isCompressed){if(e.arguments.length>=7){const t=e.arguments[6];a.length="number"==typeof t?t:t?.byteLength}}else a.length=a.width*a.height*a.depth*this.getByteSizeForInternalFormat(a.internalFormat);return a.length=0|a.length,n.__SPECTOR_Object_CustomData=a,a.length-r}getCustomData(e,t,n){return"texImage3D"===e.name?this.getTexImage3DCustomData(e,t,n):"compressedTexImage3D"===e.name?this.getCompressedTexImage3DCustomData(e,t,n):"texStorage3D"===e.name?this.getTexStorage3DCustomData(e,t,n):void 0}getTexStorage3DCustomData(e,t,n){let a;return 6===e.arguments.length&&(a={target:t,internalFormat:e.arguments[2],width:e.arguments[3],height:e.arguments[4],depth:e.arguments[5],length:0,isCompressed:!1}),a}getCompressedTexImage3DCustomData(e,t,n){if(0!==e.arguments[1])return;let a;return e.arguments.length>=8&&(a={target:t,internalFormat:e.arguments[2],width:e.arguments[3],height:e.arguments[4],depth:e.arguments[5],length:0,isCompressed:!0}),a}getTexImage3DCustomData(e,t,n){if(0!==e.arguments[1])return;let a;return e.arguments.length>=9&&(a={target:t,internalFormat:e.arguments[2],width:e.arguments[3],height:e.arguments[4],depth:e.arguments[5],format:e.arguments[7],type:e.arguments[8],length:0,isCompressed:!1}),a}}class Ms extends Ss{get objectName(){return"Program"}getCreateCommandNames(){return["createProgram"]}getUpdateCommandNames(){return["linkProgram"]}getDeleteCommandNames(){return["deleteProgram"]}getBoundInstance(e){return e}delete(e){const t=e.__SPECTOR_Object_CustomData;return t?t.length:0}update(e,t,n){if(e.arguments.length>=1&&!e.arguments[0])return 0;const a=this.getCustomData(n);if(!a)return 0;const r=n.__SPECTOR_Object_CustomData?n.__SPECTOR_Object_CustomData.length:0;return n.__SPECTOR_Object_CustomData=a,a.length-r}getCustomData(e){const t=this.options.context;return Cs.getProgramData(t,e)}}class Ls{constructor(e){this.contextInformation=e,this.onCommandCallbacks={},this.recorders=[],this.initRecorders()}recordCommand(e){const t=this.onCommandCallbacks[e.name];if(t)for(const n of t)n(e)}startCapture(){for(const e of this.recorders)e.startCapture()}stopCapture(){for(const e of this.recorders)e.stopCapture()}appendRecordedInformation(e){for(const t of this.recorders)t.appendRecordedInformation(e)}initRecorders(){this.recorders.push(new Ns(this.contextInformation),new Is(this.contextInformation),new gs(this.contextInformation),new Bs(this.contextInformation),new Ms(this.contextInformation));for(const e of this.recorders)e.registerCallbacks(this.onCommandCallbacks)}}class Os{constructor(e){this.contextInformation=e,this.webGlObjects=[],this.initWebglObjects()}tagWebGlObjects(e){for(const t of this.webGlObjects){for(let n=0;n<e.arguments.length;n++){const a=e.arguments[n];if(t.tagWebGlObject(a))break}if(t.tagWebGlObject(e.result))break}}tagWebGlObject(e){for(const t of this.webGlObjects){const n=t.tagWebGlObject(e);if(n)return n}}initWebglObjects(){this.webGlObjects.push(new us,new ls,new Es,new ms,new _s,new ds,new As,new Rs,new ps,new hs,new fs,new Ts)}}class Us extends Vo{get stateName(){return"Extensions"}constructor(e){super(e),this.extensionDefinition=[[{name:"ANGLE_instanced_arrays",description:""},{name:"EXT_blend_minmax",description:""},{name:"EXT_color_buffer_float",description:""},{name:"EXT_color_buffer_half_float",description:""},{name:"EXT_disjoint_timer_query",description:""},{name:"EXT_frag_depth",description:""},{name:"EXT_sRGB",description:""},{name:"EXT_shader_texture_lod",description:""},{name:"EXT_texture_filter_anisotropic",description:""},{name:"OES_element_index_uint",description:""},{name:"OES_standard_derivatives",description:""},{name:"OES_texture_float",description:""},{name:"OES_texture_float_linear",description:""},{name:"OES_texture_half_float",description:""},{name:"OES_texture_half_float_linear",description:""},{name:"OES_vertex_array_object",description:""},{name:"WEBGL_color_buffer_float",description:""},{name:"WEBGL_compressed_texture_astc",description:""},{name:"WEBGL_compressed_texture_atc",description:""},{name:"WEBGL_compressed_texture_etc",description:""},{name:"WEBGL_compressed_texture_etc1",description:""},{name:"WEBGL_compressed_texture_pvrtc",description:""},{name:"WEBGL_compressed_texture_s3tc",description:""},{name:"WEBGL_depth_texture",description:""},{name:"WEBGL_draw_buffers",description:""}],[{name:"EXT_color_buffer_float",description:""},{name:"EXT_disjoint_timer_query",description:""},{name:"EXT_disjoint_timer_query_webgl2",description:""},{name:"EXT_texture_filter_anisotropic",description:""},{name:"OES_texture_float_linear",description:""},{name:"WEBGL_compressed_texture_astc",description:""},{name:"WEBGL_compressed_texture_atc",description:""},{name:"WEBGL_compressed_texture_etc",description:""},{name:"WEBGL_compressed_texture_etc1",description:""},{name:"WEBGL_compressed_texture_pvrtc",description:""},{name:"WEBGL_compressed_texture_s3tc",description:""},{name:"WEBGL_multi_draw_instanced_base_vertex_base_instance",description:""}]],this.currentState=this.startCapture(!0,this.quickCapture,this.fullCapture)}getExtensions(){return this.extensions}readFromContext(){const e=1===this.contextVersion?this.extensionDefinition[0]:this.extensionDefinition[1];for(const t of e){const e=this.context.getExtension(t.name);e?(this.currentState[t.name]=!0,this.extensions[t.name]=e):this.currentState[t.name]=!1}}}class xs extends Ko{get stateName(){return"CompressedTextures"}constructor(e){super(e),this.currentState=this.startCapture(!0,this.quickCapture,this.fullCapture)}getWebgl1Parameters(){return[{constant:eo.COMPRESSED_TEXTURE_FORMATS}]}stringifyParameterValue(e,t){const n=[];for(const t of e)n.push(eo.stringifyWebGlConstant(t,"getParameter"));return n}}class Ps extends Ko{get stateName(){return"Capabilities"}constructor(e){super(e),this.currentState=this.startCapture(!0,this.quickCapture,this.fullCapture)}getWebgl1Parameters(){return[{constant:eo.RENDERER},{constant:eo.VENDOR},{constant:eo.VERSION},{constant:eo.SHADING_LANGUAGE_VERSION},{constant:eo.SAMPLES},{constant:eo.SAMPLE_BUFFERS},{constant:eo.RED_BITS},{constant:eo.GREEN_BITS},{constant:eo.BLUE_BITS},{constant:eo.ALPHA_BITS},{constant:eo.DEPTH_BITS},{constant:eo.STENCIL_BITS},{constant:eo.SUBPIXEL_BITS},{constant:eo.LINE_WIDTH},{constant:eo.ALIASED_LINE_WIDTH_RANGE},{constant:eo.ALIASED_POINT_SIZE_RANGE},{constant:eo.IMPLEMENTATION_COLOR_READ_FORMAT,returnType:Ho.GlEnum},{constant:eo.IMPLEMENTATION_COLOR_READ_TYPE,returnType:Ho.GlEnum},{constant:eo.MAX_COMBINED_TEXTURE_IMAGE_UNITS},{constant:eo.MAX_CUBE_MAP_TEXTURE_SIZE},{constant:eo.MAX_FRAGMENT_UNIFORM_VECTORS},{constant:eo.MAX_RENDERBUFFER_SIZE},{constant:eo.MAX_TEXTURE_IMAGE_UNITS},{constant:eo.MAX_TEXTURE_SIZE},{constant:eo.MAX_VARYING_VECTORS},{constant:eo.MAX_VERTEX_ATTRIBS},{constant:eo.MAX_VERTEX_TEXTURE_IMAGE_UNITS},{constant:eo.MAX_VERTEX_UNIFORM_VECTORS},{constant:eo.MAX_VIEWPORT_DIMS},{constant:eo.MAX_TEXTURE_MAX_ANISOTROPY_EXT},{constant:eo.MAX_COLOR_ATTACHMENTS_WEBGL},{constant:eo.MAX_DRAW_BUFFERS_WEBGL}]}getWebgl2Parameters(){return[{constant:eo.MAX_3D_TEXTURE_SIZE},{constant:eo.MAX_ARRAY_TEXTURE_LAYERS},{constant:eo.MAX_CLIENT_WAIT_TIMEOUT_WEBGL},{constant:eo.MAX_COLOR_ATTACHMENTS},{constant:eo.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS},{constant:eo.MAX_COMBINED_UNIFORM_BLOCKS},{constant:eo.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS},{constant:eo.MAX_DRAW_BUFFERS},{constant:eo.MAX_ELEMENT_INDEX},{constant:eo.MAX_ELEMENTS_INDICES},{constant:eo.MAX_ELEMENTS_VERTICES},{constant:eo.MAX_FRAGMENT_INPUT_COMPONENTS},{constant:eo.MAX_FRAGMENT_UNIFORM_BLOCKS},{constant:eo.MAX_FRAGMENT_UNIFORM_COMPONENTS},{constant:eo.MAX_PROGRAM_TEXEL_OFFSET},{constant:eo.MAX_SAMPLES},{constant:eo.MAX_SERVER_WAIT_TIMEOUT},{constant:eo.MAX_TEXTURE_LOD_BIAS},{constant:eo.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS},{constant:eo.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS},{constant:eo.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS},{constant:eo.MAX_UNIFORM_BLOCK_SIZE},{constant:eo.MAX_UNIFORM_BUFFER_BINDINGS},{constant:eo.MAX_VARYING_COMPONENTS},{constant:eo.MAX_VERTEX_OUTPUT_COMPONENTS},{constant:eo.MAX_VERTEX_UNIFORM_BLOCKS},{constant:eo.MAX_VERTEX_UNIFORM_COMPONENTS},{constant:eo.MIN_PROGRAM_TEXEL_OFFSET}]}}class bs{constructor(e){this.options=e,this.commandId=0,this.context=e.context,this.version=e.version,this.onMaxCommand=new ji,this.capturing=!1,this.globalCapturing=!0,this.contextInformation={context:this.context,contextVersion:this.version,toggleCapture:this.toggleGlobalCapturing.bind(this),tagWebGlObject:this.tagWebGlObject.bind(this),extensions:{}},this.commandSpies={},this.stateSpy=new vs(this.contextInformation),this.recorderSpy=new Ls(this.contextInformation),this.webGlObjectSpy=new Os(this.contextInformation),this.analyser=new ro(this.contextInformation),this.initStaticCapture(),e.recordAlways&&this.spy()}spy(){this.spyContext(this.context);const{extensions:e}=this.contextInformation;for(const t in e)e.hasOwnProperty(t)&&this.spyContext(e[t])}unSpy(){for(const e in this.commandSpies)this.commandSpies.hasOwnProperty(e)&&this.commandSpies[e].unSpy()}startCapture(e=0,t=!1,n=!1){const a=Zi.now;this.maxCommands=e,this.options.recordAlways||this.spy(),this.capturing=!0,this.commandId=0,this.currentCapture={canvas:this.canvasCapture,context:this.contextCapture,commands:[],initState:{},endState:{},startTime:a,listenCommandsStartTime:0,listenCommandsEndTime:0,endTime:0,analyses:[],frameMemory:{},memory:{}},this.currentCapture.canvas.width=this.context.canvas.width,this.currentCapture.canvas.height=this.context.canvas.height,this.currentCapture.canvas.clientWidth=this.context.canvas.clientWidth||this.context.canvas.width,this.currentCapture.canvas.clientHeight=this.context.canvas.clientHeight||this.context.canvas.height,this.stateSpy.startCapture(this.currentCapture,t,n),this.recorderSpy.startCapture(),this.currentCapture.listenCommandsStartTime=Zi.now}stopCapture(){const e=Zi.now;return this.options.recordAlways||this.unSpy(),this.capturing=!1,this.stateSpy.stopCapture(this.currentCapture),this.recorderSpy.stopCapture(),this.currentCapture.listenCommandsEndTime=e,this.currentCapture.endTime=Zi.now,this.recorderSpy.appendRecordedInformation(this.currentCapture),this.analyser.appendAnalyses(this.currentCapture),this.currentCapture}isCapturing(){return this.globalCapturing&&this.capturing}setMarker(e){this.marker=e}clearMarker(){this.marker=null}log(e){this.currentCapture.commands.push({name:"LOG",text:e,commandArguments:[],commandEndTime:Zi.now,endTime:Zi.now,stackTrace:[],marker:"",status:oo.Valid,startTime:Zi.now,result:void 0,id:this.getNextCommandCaptureId()})}getNextCommandCaptureId(){return this.commandId++}onCommand(e,t){if(this.globalCapturing&&(this.webGlObjectSpy.tagWebGlObjects(t),this.recorderSpy.recordCommand(t),this.isCapturing())){const n=e.createCapture(t,this.getNextCommandCaptureId(),this.marker);this.stateSpy.captureState(n),this.currentCapture.commands.push(n),n.endTime=Zi.now,this.maxCommands>0&&this.currentCapture.commands.length===this.maxCommands&&this.onMaxCommand.trigger(this)}}spyContext(e){const t=[];for(const n in e)n&&t.push(n);for(let n=0;n<t.length;n++){const a=t[n];if(!~bs.unSpyableMembers.indexOf(a))try{"number"!=typeof e[a]&&this.spyFunction(a,e)}catch(e){zi.error("Cant Spy member: "+a),zi.error(e)}}}initStaticCapture(){const e=new Us(this.contextInformation),t=e.getExtensions();for(const e in t)t.hasOwnProperty(e)&&(this.contextInformation.extensions[e]=t[e]);const n=new Ps(this.contextInformation),a=new xs(this.contextInformation);this.contextCapture={version:this.version,contextAttributes:this.context.getContextAttributes(),capabilities:n.getStateData(),extensions:e.getStateData(),compressedTextures:a.getStateData()},this.canvasCapture={width:this.context.canvas.width,height:this.context.canvas.height,clientWidth:this.context.canvas.clientWidth||this.context.canvas.width,clientHeight:this.context.canvas.clientHeight||this.context.canvas.height,browserAgent:navigator?navigator.userAgent:""}}spyFunction(e,t){if(0!==e.indexOf("__SPECTOR_Origin_")){if(!this.commandSpies[e]){const n=function(e,t){const n={};for(const t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);for(const e in t)n.hasOwnProperty(e)||(n[e]=t[e]);return n}(this.contextInformation,{spiedCommandName:e,spiedCommandRunningContext:t,callback:this.onCommand.bind(this)});this.commandSpies[e]=new Wo(n)}this.commandSpies[e].spy()}}toggleGlobalCapturing(e){this.globalCapturing=e}tagWebGlObject(e){return this.webGlObjectSpy.tagWebGlObject(e)}}bs.unSpyableMembers=["canvas","drawingBufferWidth","drawingBufferHeight","glp"];class Ds{constructor(e){this.spiedWindow=e||window,this.lastFrame=0,this.speedRatio=1,this.willPlayNextFrame=!1,this.onFrameStart=new ji,this.onFrameEnd=new ji,this.onError=new ji,this.lastSixtyFramesDuration=[],this.lastSixtyFramesCurrentIndex=0,this.lastSixtyFramesPreviousStart=0;for(let e=0;e<Ds.fpsWindowSize;e++)this.lastSixtyFramesDuration[e]=0;this.init()}playNextFrame(){this.willPlayNextFrame=!0}changeSpeedRatio(e){this.speedRatio=e}getFps(){let e=0;for(let t=0;t<Ds.fpsWindowSize;t++)e+=this.lastSixtyFramesDuration[t];return 0===e?0:6e4/e}init(){for(const e of Ds.requestAnimationFrameFunctions)this.spyRequestAnimationFrame(e,this.spiedWindow);for(const e of Ds.setTimerFunctions)this.spySetTimer(e);this.spiedWindow.VRDisplay&&this.spiedWindow.addEventListener("vrdisplaypresentchange",(e=>{this.spyRequestAnimationFrame("requestAnimationFrame",e.display)}))}spyRequestAnimationFrame(e,t){const n=this;io.storeOriginFunction(t,e),t[e]=function(){const a=arguments[0],r=n.getCallback(n,a,(()=>{n.spiedWindow[e](a)})),i=io.executeOriginFunction(t,e,[r]);return i}}spySetTimer(e){const t=this,n=this.spiedWindow,a="setTimeout"===e;io.storeOriginFunction(n,e),n[e]=function(){const r=arguments[0],i=arguments[1],o=Array.prototype.slice.call(arguments);Ds.setTimerCommonValues.indexOf(i)>-1&&(o[0]=t.getCallback(t,r,a?()=>{n[e](r)}:null));const s=io.executeOriginFunction(n,e,o);return s}}getCallback(e,t,n=null){return function(){const a=Zi.now;if(e.lastFrame=++e.lastFrame%e.speedRatio,e.willPlayNextFrame||e.speedRatio&&!e.lastFrame){e.onFrameStart.trigger(e);try{t.apply(e.spiedWindow,arguments)}catch(t){e.onError.trigger(t)}e.lastSixtyFramesCurrentIndex=(e.lastSixtyFramesCurrentIndex+1)%Ds.fpsWindowSize,e.lastSixtyFramesDuration[e.lastSixtyFramesCurrentIndex]=a-e.lastSixtyFramesPreviousStart,e.onFrameEnd.trigger(e),e.willPlayNextFrame=!1}else n&&n();e.lastSixtyFramesPreviousStart=a}}}Ds.requestAnimationFrameFunctions=["requestAnimationFrame","msRequestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame"],Ds.setTimerFunctions=["setTimeout","setInterval"],Ds.setTimerCommonValues=[0,15,16,33,32,40],Ds.fpsWindowSize=60;class ys{constructor(e){this.canvas=e,this.onContextRequested=new ji,this.init()}init(){const e=this,t=function(){const t=this instanceof HTMLCanvasElement?HTMLCanvasElement:OffscreenCanvas,n=e.canvas?io.executeOriginFunction(this,"getContext",arguments):io.executePrototypeOriginFunction(this,t,"getContext",arguments);if(arguments.length>0&&"2d"===arguments[0])return n;if(n){const t=Array.prototype.slice.call(arguments),a="webgl2"===t[0]||"experimental-webgl2"===t[0]?2:1;e.onContextRequested.trigger({context:n,contextVersion:a})}return n};this.canvas?(io.storeOriginFunction(this.canvas,"getContext"),this.canvas.getContext=t):(io.storePrototypeOriginFunction(HTMLCanvasElement,"getContext"),HTMLCanvasElement.prototype.getContext=t,"undefined"!=typeof OffscreenCanvas&&(io.storePrototypeOriginFunction(OffscreenCanvas,"getContext"),OffscreenCanvas.prototype.getContext=t))}}!function(e){e[e.Processed=0]="Processed",e[e.Add=20]="Add",e[e.Update=40]="Update",e[e.Delete=50]="Delete"}(Yo||(Yo={}));class Gs{constructor(){this.store={},this.idGenerator=0,this.pendingOperation={}}getLastOperation(e){return this.store[e].lastOperation}getData(e){return this.store[e].data}getComponentInstance(e){return this.store[e].componentInstance}getParentId(e){return this.store[e].parent?this.store[e].parent.id:-1}getChildrenIds(e){const t=[];for(const n of this.store[e].children)t.push(n.id);return t}hasChildren(e){return this.store[e].children.length>0}add(e,t){const n=this.getNewId();return this.pendingOperation[n]=n,this.store[n]={data:e,id:n,parent:null,children:[],componentInstance:t,lastOperation:Yo.Add},n}update(e,t){this.store[e];this.pendingOperation[e]=e,this.store[e].data=t,this.store[e].lastOperation=Yo.Update}addChild(e,t,n){const a=this.store[e],r=this.add(t,n);this.pendingOperation[r]=r;const i=this.store[r];return i.parent=a,a.children.push(i),r}insertChildAt(e,t,n,a){const r=this.store[e],i=this.add(n,a);this.pendingOperation[i]=i;const o=this.store[i];return o.parent=r,t>=r.children.length?r.children.push(o):t>=0?r.children.splice(t,0,o):r.children.unshift(o),i}removeChildById(e,t){const n=this.store[e];for(let a=n.children.length-1;a>=0;a--){if(n.children[a].id===t){this.removeChildAt(e,a);break}}}removeChildAt(e,t){const n=this.store[e];let a;t>n.children.length-1?(a=n.children[n.children.length-1],n.children[n.children.length-1].parent=null,n.children.splice(n.children.length-1,1)):t>=0?(a=n.children[t],n.children[t].parent=null,n.children.splice(t,1)):(a=n.children[0],n.children[0].parent=null,n.children.splice(0,1)),a.parent=null,this.remove(a.id)}remove(e){const t=this.store[e];if(t.parent){this.store[t.parent.id];this.removeChildById(t.parent.id,e)}else this.removeChildren(e),this.store[e].lastOperation=Yo.Delete,this.pendingOperation[e]=e}removeChildren(e){const t=this.store[e];for(;t.children.length;)this.remove(t.children[0].id)}getStatesToProcess(){return this.pendingOperation}flushPendingOperations(){for(const e in this.pendingOperation)this.pendingOperation[e]&&(this.store[e].lastOperation===Yo.Delete?delete this.store[e]:this.store[e].lastOperation=Yo.Processed);this.pendingOperation={}}getNewId(){return++this.idGenerator}}class ws{constructor(e,t){this.placeHolder=e,this.stateStore=t}compose(e){const t=this.stateStore.getStatesToProcess();let n=!1;for(const e in t)if(t.hasOwnProperty(e)){const a=t[e],r=this.stateStore.getLastOperation(a),i=this.stateStore.getComponentInstance(a),o=this.stateStore.getData(a);i.render(o,a,r),n=!0}if(!n)return;const a=this.stateStore.getLastOperation(e);this.composeInContainer(this.placeHolder,Number.MAX_VALUE,e,a)}composeChildren(e,t){if(!t)return;const n=this.stateStore.getChildrenIds(e);let a=0;for(let e=0;e<n.length;e++){const r=n[e],i=this.stateStore.getLastOperation(r);this.composeInContainer(t,a,r,i),i!==Yo.Delete&&a++}}composeInContainer(e,t,n,a){const r=this.stateStore.getComponentInstance(n).composeInContainer(e,t,a);this.composeChildren(n,r)}}class Xs{constructor(e){this.component=e}render(e,t,n){n!==Yo.Processed&&(n!==Yo.Delete?this.domNode=this.component.render(e,t):this.removeNode())}composeInContainer(e,t,n){if(n===Yo.Delete)return this.removeNode(),null;const a=this.cachedCurrentChildrenContainer;if(n===Yo.Processed)return a;const r=this.domNode,i=r.getAttribute("childrencontainer")?r:r.querySelector("[childrenContainer]");if(i&&a){const e=a.children;for(;e.length>0;)i.appendChild(e[0])}if(this.cachedCurrentChildrenContainer=i,t>=e.children.length)e.appendChild(r),this.cachedCurrentDomNode&&n===Yo.Update&&(this.cachedCurrentDomNode.remove?this.cachedCurrentDomNode.remove():this.cachedCurrentDomNode.parentNode&&this.cachedCurrentDomNode.parentNode.removeChild(this.cachedCurrentDomNode));else{const a=e.children[t];e.insertBefore(r,a),n===Yo.Update&&e.removeChild(a)}return this.cachedCurrentDomNode=this.domNode,i}removeNode(){this.domNode&&this.domNode.parentElement&&(this.domNode.remove?this.domNode.remove():this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode)),this.cachedCurrentDomNode&&this.cachedCurrentDomNode.parentElement&&(this.cachedCurrentDomNode.remove?this.cachedCurrentDomNode.remove():this.cachedCurrentDomNode.parentNode&&this.cachedCurrentDomNode.parentNode.removeChild(this.cachedCurrentDomNode))}}Xs.idGenerator=0;class Ws{constructor(e){this.stateStore=new Gs,this.compositor=new ws(e,this.stateStore),this.willRender=!1,this.rootStateId=-1}addRootState(e,t,n=!1){const a=new Xs(t),r=this.stateStore.add(e,a);return this.rootStateId=r,this.setForRender(n),r}addChildState(e,t,n,a=!1){const r=this.insertChildState(e,t,Number.MAX_VALUE,n);return this.setForRender(a),r}insertChildState(e,t,n,a,r=!1){const i=new Xs(a),o=this.stateStore.insertChildAt(e,n,t,i);return this.setForRender(r),o}updateState(e,t,n=!1){this.stateStore.update(e,t),this.setForRender(n)}removeState(e,t=!1){this.stateStore.remove(e),this.setForRender(t)}removeChildrenStates(e,t=!1){this.stateStore.removeChildren(e),this.setForRender(t)}getState(e){return this.stateStore.getData(e)}getGenericState(e){return this.getState(e)}getChildrenState(e){return this.stateStore.getChildrenIds(e).map((t=>this.stateStore.getData(e)))}getChildrenGenericState(e){return this.getChildrenState(e)}hasChildren(e){return this.stateStore.hasChildren(e)}updateAllChildrenState(e,t){const n=this.stateStore.getChildrenIds(e);for(const e of n){const n=this.getGenericState(e);t(n),this.updateState(e,n)}}updateAllChildrenGenericState(e,t){this.updateAllChildrenState(e,t)}setForRender(e){this.willRender||(this.willRender=!0,e?this.compose():setTimeout(this.compose.bind(this),Ws.REFRESHRATEINMILLISECONDS))}compose(){this.willRender=!1,this.compositor.compose(this.rootStateId),this.stateStore.flushPendingOperations()}}Ws.REFRESHRATEINMILLISECONDS=100;class Vs extends class{createFromHtml(e){const t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}htmlTemplate(e,...t){const n=e.raw;let a="";return t.forEach(((e,t)=>{let r=n[t];Array.isArray(e)&&(e=e.join("")),r&&r.length>0&&"$"===r[r.length-1]?r=r.slice(0,-1):e=this.htmlEscape(e),a+=r,a+=e})),a+=n[n.length-1],a}htmlEscape(e){return null==e||0===e.length?e:(this.dummyTextGeneratorElement.innerText=e,this.dummyTextGeneratorElement.innerHTML)}constructor(){this.dummyTextGeneratorElement=document.createElement("div")}}{constructor(){super(),this.events={}}addEventListener(e,t,n=null){return this.events[e]?this.events[e].add(t,n):-1}removeEventListener(e,t){this.events[e]&&this.events[e].remove(t)}renderElementFromTemplate(e,t,n){const a=this.createFromHtml(e);return this.bindCommands(a,t,n),a}bindCommands(e,t,n){e.getAttribute("commandname")&&this.bindCommand(e,t,n);const a=e.querySelectorAll("[commandName]");for(let e=0;e<a.length;e++){const r=a[e];this.bindCommand(r,t,n)}}bindCommand(e,t,n){const a=e.getAttribute("commandname");let r=e.getAttribute("commandeventbinding")||"";0===r.length&&(r="click");const i="true"===e.getAttribute("usecapture"),o="true"===e.getAttribute("stoppropagation");this.createEvent(a),this.mapEventListener(e,r,a,t,n,i,o)}mapEventListener(e,t,n,a,r,i=!1,o=!1){const s=this;o?e.addEventListener(t,(function(e){return e.stopPropagation(),e.preventDefault(),s.triggerEvent(n,this,a,r),!1}),i):e.addEventListener(t,(function(){s.triggerEvent(n,this,a,r)}),i)}createEvent(e){if(!this.events[e]){const t=new ji;this.events[e]=t}return this.events[e]}triggerEvent(e,t,n,a){this.events[e].trigger({sender:t,stateId:a,state:n})}}class Hs extends Vs{render(e,t){const n=this.htmlTemplate`<div>
            <div childrenContainer="true" class="captureMenuComponent ${e?"active":""}">
            </div>
            <div class="captureMenuLogComponent ${e.logVisible?"active":""}">
                <span class="${e.logLevel===Ki.error?"error":""}">${e.logText}<span>
            </div>
        </div>`;return this.renderElementFromTemplate(n,e,t)}}class Ys extends Vs{constructor(){super(),this.onCanvasSelected=this.createEvent("onCanvasSelected")}render(e,t){const n=document.createElement("li"),a=document.createElement("span");return a.innerText=`Id: ${e.id} - Size: ${e.width}*${e.height}`,n.appendChild(a),this.mapEventListener(n,"click","onCanvasSelected",e,t),n}}class ks extends Vs{constructor(){super(),this.onCaptureRequested=this.createEvent("onCaptureRequested"),this.onPlayRequested=this.createEvent("onPlayRequested"),this.onPauseRequested=this.createEvent("onPauseRequested"),this.onPlayNextFrameRequested=this.createEvent("onPlayNextFrameRequested")}render(e,t){const n=this.htmlTemplate`
        <div class="captureMenuActionsComponent">
            <div commandName="onCaptureRequested">
            </div>
            $${e?'<div commandName="onPauseRequested">\n                </div>':'<div commandName="onPlayRequested">\n                </div>\n                <div commandName="onPlayNextFrameRequested">\n                </div>'}
        </div>`;return this.renderElementFromTemplate(n,e,t)}}class Ks extends Vs{constructor(){super(),this.onCanvasSelection=this.createEvent("onCanvasSelection")}render(e,t){const n=this.htmlTemplate`
        <div class="canvasListComponent">
            <span commandName="onCanvasSelection">
                ${e.currentCanvasInformation?`${e.currentCanvasInformation.id} (${e.currentCanvasInformation.width}*${e.currentCanvasInformation.height})`:"Choose Canvas..."}
            </span>
            <ul childrenContainer="true" style="${e.showList?"display:block;visibility:visible":"display:none;visibility:hidden"}"></ul>
        </div>`;return this.renderElementFromTemplate(n,e,t)}}class zs extends Vs{render(e,t){const n=document.createElement("span");return n.className="fpsCounterComponent",n.innerText=e.toFixed(2)+" Fps",n}}class js{constructor(e={}){this.options=e,this.rootPlaceHolder=e.rootPlaceHolder||document.body,this.mvx=new Ws(this.rootPlaceHolder),this.isTrackingCanvas=!1,this.onCanvasSelected=new ji,this.onCaptureRequested=new ji,this.onPauseRequested=new ji,this.onPlayRequested=new ji,this.onPlayNextFrameRequested=new ji,this.captureMenuComponent=new Hs,this.canvasListComponent=new Ks,this.canvasListItemComponent=new Ys,this.actionsComponent=new ks,this.fpsCounterComponent=new zs,this.rootStateId=this.mvx.addRootState({visible:!0,logLevel:Ki.info,logText:js.SelectCanvasHelpText,logVisible:!this.options.hideLog},this.captureMenuComponent),this.canvasListStateId=this.mvx.addChildState(this.rootStateId,{currentCanvasInformation:null,showList:!1},this.canvasListComponent),this.actionsStateId=this.mvx.addChildState(this.rootStateId,!0,this.actionsComponent),this.fpsStateId=this.mvx.addChildState(this.rootStateId,0,this.fpsCounterComponent),this.actionsComponent.onCaptureRequested.add((()=>{const e=this.getSelectedCanvasInformation();e&&this.updateMenuStateLog(Ki.info,js.PleaseWaitHelpText,!0),setTimeout((()=>{this.onCaptureRequested.trigger(e)}),200)})),this.actionsComponent.onPauseRequested.add((()=>{this.onPauseRequested.trigger(this.getSelectedCanvasInformation()),this.mvx.updateState(this.actionsStateId,!1)})),this.actionsComponent.onPlayRequested.add((()=>{this.onPlayRequested.trigger(this.getSelectedCanvasInformation()),this.mvx.updateState(this.actionsStateId,!0)})),this.actionsComponent.onPlayNextFrameRequested.add((()=>{this.onPlayNextFrameRequested.trigger(this.getSelectedCanvasInformation())})),this.canvasListComponent.onCanvasSelection.add((e=>{this.mvx.updateState(this.canvasListStateId,{currentCanvasInformation:null,showList:!e.state.showList}),this.updateMenuStateLog(Ki.info,js.SelectCanvasHelpText),this.onCanvasSelected.trigger(null),this.isTrackingCanvas&&this.trackPageCanvases(),e.state.showList?this.showMenuStateLog():this.hideMenuStateLog()})),this.canvasListItemComponent.onCanvasSelected.add((e=>{this.mvx.updateState(this.canvasListStateId,{currentCanvasInformation:e.state,showList:!1}),this.onCanvasSelected.trigger(e.state),this.updateMenuStateLog(Ki.info,js.ActionsHelpText),this.showMenuStateLog()}))}getSelectedCanvasInformation(){return this.mvx.getGenericState(this.canvasListStateId).currentCanvasInformation}trackPageCanvases(){if(this.isTrackingCanvas=!0,document.body){const e=document.body.querySelectorAll("canvas");this.updateCanvasesList(e)}}updateCanvasesList(e){this.updateCanvasesListInformationInternal(e,(e=>({id:e.id,width:e.width,height:e.height,ref:e})))}updateCanvasesListInformation(e){this.updateCanvasesListInformationInternal(e,(e=>({id:e.id,width:e.width,height:e.height,ref:e.ref})))}display(){this.updateMenuStateVisibility(!0)}hide(){this.updateMenuStateVisibility(!1)}captureComplete(e){e?this.updateMenuStateLog(Ki.error,e):this.updateMenuStateLog(Ki.info,js.ActionsHelpText)}setFPS(e){this.mvx.updateState(this.fpsStateId,e)}updateCanvasesListInformationInternal(e,t){this.mvx.removeChildrenStates(this.canvasListStateId);const n=[];for(let a=0;a<e.length;a++){const r=t(e[a]);n.push(r),this.mvx.addChildState(this.canvasListStateId,r,this.canvasListItemComponent)}const a=n.length,r=this.mvx.getGenericState(this.canvasListStateId).showList;if(!r)if(1===a){const e=n[0];this.mvx.updateState(this.canvasListStateId,{currentCanvasInformation:e,showList:r}),this.updateMenuStateLog(Ki.info,js.ActionsHelpText),this.onCanvasSelected.trigger(e)}else this.updateMenuStateLog(Ki.info,js.SelectCanvasHelpText),this.onCanvasSelected.trigger(null)}hideMenuStateLog(){const e=this.mvx.getGenericState(this.rootStateId);this.mvx.updateState(this.rootStateId,{visible:e.visible,logLevel:e.logLevel,logText:e.logText,logVisible:!1})}showMenuStateLog(){const e=this.mvx.getGenericState(this.rootStateId);this.mvx.updateState(this.rootStateId,{visible:e.visible,logLevel:e.logLevel,logText:e.logText,logVisible:!this.options.hideLog})}updateMenuStateLog(e,t,n=!1){const a=this.mvx.getGenericState(this.rootStateId);this.mvx.updateState(this.rootStateId,{visible:a.visible,logLevel:e,logText:t,logVisible:!this.options.hideLog},n)}updateMenuStateVisibility(e){const t=this.mvx.getGenericState(this.rootStateId);this.mvx.updateState(this.rootStateId,{visible:e,logLevel:t.logLevel,logText:t.logText,logVisible:t.logVisible})}}js.SelectCanvasHelpText="Please, select a canvas in the list above.",js.ActionsHelpText="Record with the red button, you can also pause or continue playing the current scene.",js.PleaseWaitHelpText="Capturing, be patient (this can take up to 3 minutes)...";class Zs extends Vs{constructor(){super(),this.onCaptureLoaded=new ji}render(e,t){const n=this.htmlTemplate`
        <div class="captureListComponent ${e?"active":""}">
            <div class="openCaptureFile">
                <Span>Drag files here to open a previously saved capture.</span>
            </div>
            <ul childrenContainer="true"></ul>
        </div>`,a=this.renderElementFromTemplate(n,e,t),r=a.querySelector(".openCaptureFile");return r.addEventListener("dragenter",(e=>(this.drag(e),!1)),!1),r.addEventListener("dragover",(e=>(this.drag(e),!1)),!1),r.addEventListener("drop",(e=>{this.drop(e)}),!1),a}drag(e){e.stopPropagation(),e.preventDefault()}drop(e){e.stopPropagation(),e.preventDefault(),this.loadFiles(e)}loadFiles(e){let t=null;if(e&&e.dataTransfer&&e.dataTransfer.files&&(t=e.dataTransfer.files),e&&e.target&&e.target.files&&(t=e.target.files),t&&t.length>0)for(let e=0;e<t.length;e++){const n=t[e].name.toLowerCase().split(".").pop();t[e].type;if("json"===n){const n=t[e],a=new FileReader;a.onerror=e=>{zi.error("Error while reading file: "+n.name+e)},a.onload=e=>{try{const t=JSON.parse(e.target.result);this.onCaptureLoaded.trigger(t)}catch(e){zi.error("Error while reading file: "+n.name+e)}},a.readAsText(n)}}}}class qs extends Vs{constructor(){super(),this.onCaptureSelected=this.createEvent("onCaptureSelected"),this.onSaveRequested=this.createEvent("onSaveRequested")}render(e,t){const n=document.createElement("li");if(e.active&&(n.className="active"),e.capture.endState.VisualState.Attachments)for(const t of e.capture.endState.VisualState.Attachments){const e=document.createElement("img");e.src=encodeURI(t.src),n.appendChild(e)}else{const t=document.createElement("span");t.innerText=e.capture.endState.VisualState.FrameBufferStatus,n.appendChild(t)}const a=document.createElement("span");a.innerText=new Date(e.capture.startTime).toTimeString().split(" ")[0],n.appendChild(a);const r=document.createElement("a");return r.href="#",r.className="captureListItemSave",this.mapEventListener(r,"click","onSaveRequested",e,t,!1,!0),a.appendChild(r),this.mapEventListener(n,"click","onCaptureSelected",e,t),n}}class Qs extends Vs{render(e,t){const n=this.htmlTemplate`
        <div class="visualStateListComponent">
            <ul childrenContainer="true"></ul>
        </div>`;return this.renderElementFromTemplate(n,e,t)}}class $s{static scrollIntoView(e){const t=e.getBoundingClientRect();let n=e.parentElement;for(;n&&n.clientHeight===n.offsetHeight;)n=n.parentElement;if(!n)return;const a=n.getBoundingClientRect();t.top<a.top?e.scrollIntoView(!0):t.bottom>a.bottom&&e.scrollIntoView(!1)}}class Js extends Vs{constructor(){super(),this.onVisualStateSelected=this.createEvent("onVisualStateSelected")}render(e,t){const n=document.createElement("li");if(e.active&&(n.className="active",setTimeout((()=>{$s.scrollIntoView(n)}),1)),e.VisualState.Attachments)for(const t of e.VisualState.Attachments){if(!t.src)continue;const a=document.createElement("img");if(a.src=encodeURI(t.src),n.appendChild(a),e.VisualState.Attachments.length>1){const e=document.createElement("span");e.innerText=t.attachmentName,n.appendChild(e)}if(t.textureLayer){const e=document.createElement("span");e.innerText="Layer: "+t.textureLayer,n.appendChild(e)}if(t.textureCubeMapFace){const e=document.createElement("span");e.innerText=t.textureCubeMapFace,n.appendChild(e)}}else{const t=document.createElement("span");t.innerText=e.VisualState.FrameBufferStatus,n.appendChild(t)}const a=document.createElement("span");return a.innerText=e.VisualState.FrameBuffer?"Frame buffer: "+e.VisualState.FrameBuffer.__SPECTOR_Object_TAG.id:"Canvas frame buffer",n.appendChild(a),this.mapEventListener(n,"click","onVisualStateSelected",e,t),n}}class ec extends Vs{render(e,t){const n=this.htmlTemplate`
        <div class="commandListComponent">
            <ul childrenContainer="true"></ul>
        </div>`;return this.renderElementFromTemplate(n,e,t)}}class tc extends Vs{constructor(){super(),this.onCommandSelected=this.createEvent("onCommandSelected"),this.onVertexSelected=this.createEvent("onVertexSelected"),this.onFragmentSelected=this.createEvent("onFragmentSelected")}render(e,t){const n=document.createElement("li");let a="unknown";switch(e.capture.status){case oo.Deprecated:a="deprecated";break;case oo.Unused:a="unused";break;case oo.Disabled:a="disabled";break;case oo.Redundant:a="redundant";break;case oo.Valid:a="valid"}if(e.capture.VisualState&&(n.className=" drawCall"),e.active&&(n.className=" active",setTimeout((()=>{$s.scrollIntoView(n)}),1)),e.capture.marker){const t=document.createElement("span");t.className=a+" marker important",t.innerText=e.capture.marker+" ",t.style.fontWeight="1000",n.appendChild(t)}if("LOG"===e.capture.name){const t=document.createElement("span");t.className=a+" marker important",t.innerText=e.capture.text+" ",t.style.fontWeight="1000",n.appendChild(t)}else{const t=document.createElement("span");let r=e.capture.text;r=r.replace(e.capture.name,`<span class=" ${a} important">${e.capture.name}</span>`),t.innerHTML=r,n.appendChild(t)}if(e.capture.VisualState&&"clear"!==e.capture.name)try{const a=e.capture.DrawCall.shaders[0],r=e.capture.DrawCall.shaders[1],i=document.createElement("a");i.innerText=a.name,i.href="#",n.appendChild(i),this.mapEventListener(i,"click","onVertexSelected",e,t);const o=document.createElement("a");o.innerText=r.name,o.href="#",n.appendChild(o),this.mapEventListener(o,"click","onFragmentSelected",e,t)}catch(e){}return this.mapEventListener(n,"click","onCommandSelected",e,t),n}}class nc extends Vs{render(e,t){const n=this.htmlTemplate`
        <div class="commandDetailComponent" childrenContainer="true">
        </div>`;return this.renderElementFromTemplate(n,e,t)}}class ac extends Vs{render(e,t){const n=this.htmlTemplate`
        <div class="jsonContentComponent" childrenContainer="true">
        </div>`;return this.renderElementFromTemplate(n,e,t)}}class rc extends Vs{render(e,t){const n=this.htmlTemplate`
        <div class="jsonGroupComponent">
            <div class="jsonGroupComponentTitle">${e?e.replace(/([A-Z])/g," $1").trim():""}</div>
            <ul childrenContainer="true"></ul>
        </div>`;return this.renderElementFromTemplate(n,e,t)}}class ic extends Vs{render(e,t){const n=this.htmlTemplate`
            <li><span class="jsonItemComponentKey">${e.key}: </span><span class="jsonItemComponentValue">${e.value}</span><li>`;return this.renderElementFromTemplate(n,e,t)}}class oc extends Vs{render(e,t){const n=this.htmlTemplate`
        <li class="jsonItemImageHolder"><div class="jsonItemImage"><img src="${e.value}" style="${e.pixelated?"image-rendering: pixelated;":""}" /><span>${e.key}</span></div></li>`;return this.renderElementFromTemplate(n,e,t)}}class sc extends Vs{render(e,t){const n=this.htmlTemplate`
            <li><span class="jsonItemComponentKey">${e.key}: </span>
                <span class="jsonItemComponentValue">${e.value} (<a href="${e.help}" target="_blank" class="jsonSourceItemComponentOpen">Open help page</a>)
                </span>
            <li>`;return this.renderElementFromTemplate(n,e,t)}}class cc extends Vs{render(e,t){const n=document.createElement("div");if(n.className="jsonVisualStateItemComponent",e.Attachments)for(const t of e.Attachments){if(!t.src)continue;const a=document.createElement("img");if(a.src=encodeURI(t.src),n.appendChild(a),e.Attachments.length>1){const e=document.createElement("span");e.innerText=t.attachmentName,n.appendChild(e)}}else{const t=document.createElement("span");t.innerText=e.FrameBufferStatus,n.appendChild(t)}const a=document.createElement("span");return a.innerText=e.FrameBuffer?e.FrameBuffer.__SPECTOR_Object_TAG.displayText:"Canvas frame buffer",n.appendChild(a),n}}!function(e){e[e.Captures=0]="Captures",e[e.Information=10]="Information",e[e.InitState=20]="InitState",e[e.EndState=30]="EndState",e[e.Commands=40]="Commands"}(ko||(ko={}));class uc extends Vs{constructor(){super(),this.onCapturesClicked=this.createEvent("onCapturesClicked"),this.onCommandsClicked=this.createEvent("onCommandsClicked"),this.onInformationClicked=this.createEvent("onInformationClicked"),this.onInitStateClicked=this.createEvent("onInitStateClicked"),this.onEndStateClicked=this.createEvent("onEndStateClicked"),this.onCloseClicked=this.createEvent("onCloseClicked"),this.onSearchTextChanged=this.createEvent("onSearchTextChanged"),this.onSearchTextCleared=this.createEvent("onSearchTextCleared")}render(e,t){const n=this.htmlTemplate`<ul class="resultViewMenuComponent">
                <li class="resultViewMenuOpen resultViewMenuSmall"><a href="#" role="button">Menu</a></li>

                <li class="searchContainer">
                    <input type="text" placeHolder="Search..." value="${e.searchText}" commandName="onSearchTextChanged" commandEventBinding="change">
                    <a class="clearSearch" stoppropagation="true" CommandName="onSearchTextCleared">X</a>
                </li>
                <li><a class="${e.status===ko.Captures?"active":""} href="#" role="button" commandName="onCapturesClicked">Captures</a></li>
                <li><a class="${e.status===ko.Information?"active":""} href="#" role="button" commandName="onInformationClicked">Information</a></li>
                <li><a class="${e.status===ko.InitState?"active":""} href="#" role="button" commandName="onInitStateClicked">Init State</a></li>
                <li>
                    <a class="${e.status===ko.Commands?"active":""} href="#" role="button" commandName="onCommandsClicked">
                        Commands${e.commandCount>0?" ("+e.commandCount+")":""}
                    </a>
                </li>
                <li><a class="${e.status===ko.EndState?"active":""} href="#" role="button" commandName="onEndStateClicked">End State</a></li>
                <li><a role="button" commandName="onCloseClicked" stoppropagation="true">Close</a></li>
            </ul>`,a=this.renderElementFromTemplate(n,e,t),r=a.querySelector(".resultViewMenuOpen"),i=a.querySelectorAll("li:not(.resultViewMenuSmall)");return r.addEventListener("click",(e=>{if("true"===r.getAttribute("open")){r.setAttribute("open","false");for(let e=0;e<i.length;e++)i[e].style.display="none",i[e].style.visibility="hidden"}else{r.setAttribute("open","true");for(let e=0;e<i.length;e++)i[e].style.display="block",i[e].style.visibility="visible"}})),a}}class lc extends Vs{render(e,t){return this.renderElementFromTemplate('<div childrenContainer="true" class="resultViewContentComponent"></div>',e,t)}}class Ec extends Vs{render(e,t){const n=this.htmlTemplate`
            <div childrenContainer="true" class="resultViewComponent ${e?"active":""}">
            </div>`;return this.renderElementFromTemplate(n,e,t)}}class mc extends Vs{constructor(){super(),this.onTranslatedVertexSourceClicked=this.createEvent("onTranslatedVertexSourceClicked"),this.onTranslatedFragmentSourceClicked=this.createEvent("onTranslatedFragmentSourceClicked"),this.onVertexSourceClicked=this.createEvent("onVertexSourceClicked"),this.onFragmentSourceClicked=this.createEvent("onFragmentSourceClicked"),this.onSourceCodeCloseClicked=this.createEvent("onSourceCodeCloseClicked"),this.onSourceCodeChanged=this.createEvent("onSourceCodeChanged")}showError(e){if(!this.editor)return;const t=[];if(e=e||""){const n=/^.*ERROR:\W([0-9]+):([0-9]+):(.*)$/gm;let a=n.exec(e);for(;null!=a;)t.push({row:+a[2]-1,column:a[1],text:a[3]||"Error",type:"error"}),a=n.exec(e)}this.editor.getSession().setAnnotations(t)}render(e,t){const n=e.fragment?e.sourceFragment:e.sourceVertex;let a;a=e.translated?e.fragment?e.translatedSourceFragment:e.translatedSourceVertex:n?this._indentIfdef(this._beautify(n)):"";const r=this.htmlTemplate`
        <div class="sourceCodeComponentContainer">
            <div class="sourceCodeMenuComponentContainer">
                <ul class="sourceCodeMenuComponent">
                    $${e.translatedSourceVertex?this.htmlTemplate`<li><a class="${!e.fragment&&e.translated?"active":""}" href="#" role="button" commandName="onTranslatedVertexSourceClicked">Translated Vertex</a></li>`:""}
                    $${e.translatedSourceFragment?this.htmlTemplate`<li><a class="${e.fragment&&e.translated?"active":""}" href="#" role="button" commandName="onTranslatedFragmentSourceClicked">Translated Fragment</a></li>`:""}
                    <li><a class="${e.fragment||e.translated?"":"active"}" href="#" role="button" commandName="onVertexSourceClicked">Vertex</a></li>
                    <li><a class="${e.fragment&&!e.translated?"active":""}" href="#" role="button" commandName="onFragmentSourceClicked">Fragment</a></li>
                    <li><a href="#" role="button" commandName="onSourceCodeCloseClicked">Close</a></li>
                </ul>
            </div>
            $${this.htmlTemplate`<div class="sourceCodeComponent">${a}</div>`}
        </div>`,i=this.renderElementFromTemplate(r.replace(/<br>/g,"\n"),e,t);this.editor=ace.edit(i.querySelector(".sourceCodeComponent")),this.editor.setTheme("ace/theme/monokai"),this.editor.getSession().setMode("ace/mode/glsl"),this.editor.setShowPrintMargin(!1);let o=-1;return this.editor.setReadOnly(!e.editable&&!e.translated),this.editor.getSession().on("change",(n=>{-1!==o&&clearTimeout(o),o=setTimeout((()=>{this._triggerCompilation(this.editor,e,i,t)}),1500)})),i}_triggerCompilation(e,t,n,a){t.fragment?t.sourceFragment=e.getValue():t.sourceVertex=e.getValue(),this.triggerEvent("onSourceCodeChanged",n,t,a)}_beautify(e,t=0){e=e.trim(),e=this._adaptComments(e);const n=this._getBracket(e),a=n.firstIteration,r=n.lastIteration;let i,o="";for(let e=0;e<t;e++)o+="    ";if(-1===a)i=e=(e=(e=(e=(e=(e=(e=(e=o+e).replace(/;(?![^\(]*\))\s*(\/\/.*)?/g,(e=>e.trim()+"\n"))).replace(/\s*([*+-/=><\s]*=)\s*/g,(e=>" "+e.trim()+" "))).replace(/\s*(,)\s*/g,(e=>e.trim()+" "))).replace(/\n[ \t]+/g,"\n")).replace(/\n/g,"\n"+o)).replace(/\s+$/g,"")).replace(/\n+$/g,"");else{const n=e.substr(0,a),s=e.substr(r+1,e.length),c=e.substr(a+1,r-a-1).trim(),u=this._beautify(c,t+1);i=this._beautify(n,t)+" {\n"+u+"\n"+o+"}\n"+this._beautify(s,t),i=i.replace(/\s*\n+\s*;/g,";"),i=i.replace(/#endif[\t \f\v]*{/g,"\n {")}return i=i.replace(mc.semicolonReplacementKeyRegex,";"),i=i.replace(mc.openCurlyReplacementKeyRegex,"{"),i=i.replace(mc.closeCurlyReplacementKeyRegex,"}"),i}_adaptComments(e){let t=!1,n=!1;for(let a=0;a<e.length;a++){const r=e[a];"/"===r?"*"===e[a-1]?n=!1:"*"===e[a+1]?t||(n=!0,a++):"/"===e[a+1]&&(n||(t=!0,a++)):"\n"===r?t=!1:";"===r?(t||n)&&(e=e.substr(0,a)+mc.semicolonReplacementKey+e.substr(a+1)):"{"===r?(t||n)&&(e=e.substr(0,a)+mc.openCurlyReplacementKey+e.substr(a+1)):"}"===r&&(t||n)&&(e=e.substr(0,a)+mc.closeCurlyReplacementKey+e.substr(a+1))}return e}_getBracket(e,t=-1){const n=e.indexOf("{",t),a=e.substr(n+1).split("");let r=1,i=n,o=0;for(const e of a)if(i++,"{"===e&&r++,"}"===e&&r--,0===r){o=i;break}return n>-1&&0===o?this._getBracket(e,n+1):{firstIteration:n,lastIteration:o}}_indentIfdef(e){let t=0;const n=e.split("\n");for(let e=0;e<n.length;e++){const a=n[e];-1!==a.indexOf("#endif")&&t--,-1!==a.indexOf("#else")&&t--;let r="";for(let e=0;e<t;e++)r+="    ";n[e]=r+a,-1===a.indexOf("#if")&&-1===a.indexOf("#else")||t++}return n.join("\n")}}mc.semicolonReplacementKey="[[[semicolonReplacementKey]]]",mc.semicolonReplacementKeyRegex=new RegExp("\\[\\[\\[semicolonReplacementKey\\]\\]\\]","g"),mc.openCurlyReplacementKey="[[[openCurlyReplacementKey]]]",mc.openCurlyReplacementKeyRegex=new RegExp("\\[\\[\\[openCurlyReplacementKey\\]\\]\\]","g"),mc.closeCurlyReplacementKey="[[[closeCurlyReplacementKey]]]",mc.closeCurlyReplacementKeyRegex=new RegExp("\\[\\[\\[closeCurlyReplacementKey\\]\\]\\]","g");class _c extends Vs{render(e,t){const n=this.htmlTemplate`
                <div childrenContainer="true" class="${e?"informationColumnLeftComponent":"informationColumnRightComponent"}"></div>`;return this.renderElementFromTemplate(n,e,t)}}class dc{static getMDNLink(e){const t=dc.WebGL2Functions[e];if(t)return dc.WebGL2RootUrl+t;const n=dc.WebGLFunctions[e];return n?dc.WebGLRootUrl+n:dc.WebGLRootUrl+e}}dc.WebGL2RootUrl="https://developer.mozilla.org/en-US/docs/Web/API/WebGL2RenderingContext/",dc.WebGLRootUrl="https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/",dc.WebGL2Functions={beginQuery:"beginQuery",beginTransformFeedback:"beginTransformFeedback",bindBufferBase:"bindBufferBase",bindBufferRange:"bindBufferRange",bindSampler:"bindSampler",bindTransformFeedback:"bindTransformFeedback",bindVertexArray:"bindVertexArray",blitFramebuffer:"blitFramebuffer",clearBufferfv:"clearBuffer",clearBufferiv:"clearBuffer",clearBufferuiv:"clearBuffer",clearBufferfi:"clearBuffer",clientWaitSync:"clientWaitSync",compressedTexImage3D:"compressedTexImage3D",compressedTexSubImage3D:"compressedTexSubImage3D",copyBufferSubData:"copyBufferSubData",copyTexSubImage3D:"copyTexSubImage3D",createQuery:"createQuery",createSampler:"createSampler",createTransformFeedback:"createTransformFeedback",createVertexArray:"createVertexArray",deleteQuery:"deleteQuery",deleteSampler:"deleteSampler",deleteSync:"deleteSync",deleteTransformFeedback:"deleteTransformFeedback",deleteVertexArray:"deleteVertexArray",drawArraysInstanced:"drawArraysInstanced",drawBuffers:"drawBuffers",drawElementsInstanced:"drawElementsInstanced",drawRangeElements:"drawRangeElements",endQuery:"endQuery",endTransformFeedback:"endTransformFeedback",fenceSync:"fenceSync",framebufferTextureLayer:"framebufferTextureLayer",getActiveUniformBlockName:"getActiveUniformBlockName",getActiveUniformBlockParameter:"getActiveUniformBlockParameter",getActiveUniforms:"getActiveUniforms",getBufferSubData:"getBufferSubData",getFragDataLocation:"getFragDataLocation",getIndexedParameter:"getIndexedParameter",getInternalformatParameter:"getInternalformatParameter",getQuery:"getQuery",getQueryParameter:"getQueryParameter",getSamplerParameter:"getSamplerParameter",getSyncParameter:"getSyncParameter",getTransformFeedbackVarying:"getTransformFeedbackVarying",getUniformBlockIndex:"getUniformBlockIndex",getUniformIndices:"getUniformIndices",invalidateFramebuffer:"invalidateFramebuffer",invalidateSubFramebuffer:"invalidateSubFramebuffer",isQuery:"isQuery",isSampler:"isSampler",isSync:"isSync",isTransformFeedback:"isTransformFeedback",isVertexArray:"isVertexArray",pauseTransformFeedback:"pauseTransformFeedback",readBuffer:"readBuffer",renderbufferStorageMultisample:"renderbufferStorageMultisample",resumeTransformFeedback:"resumeTransformFeedback",samplerParameteri:"samplerParameter",samplerParameterf:"samplerParameter",texImage3D:"texImage3D",texStorage2D:"texStorage2D",texStorage3D:"texStorage3D",texSubImage3D:"texSubImage3D",transformFeedbackVaryings:"transformFeedbackVaryings",uniform1ui:"uniform",uniform2ui:"uniform",uniform3ui:"uniform",uniform4ui:"uniform",uniform1fv:"uniform",uniform2fv:"uniform",uniform3fv:"uniform",uniform4fv:"uniform",uniform1iv:"uniform",uniform2iv:"uniform",uniform3iv:"uniform",uniform4iv:"uniform",uniform1uiv:"uniform",uniform2uiv:"uniform",uniform3uiv:"uniform",uniform4uiv:"uniform",uniformBlockBinding:"uniformBlockBinding",uniformMatrix2fv:"uniformMatrix",uniformMatrix3x2fv:"uniformMatrix",uniformMatrix4x2fv:"uniformMatrix",uniformMatrix2x3fv:"uniformMatrix",uniformMatrix3fv:"uniformMatrix",uniformMatrix4x3fv:"uniformMatrix",uniformMatrix2x4fv:"uniformMatrix",uniformMatrix3x4fv:"uniformMatrix",uniformMatrix4fv:"uniformMatrix",vertexAttribDivisor:"vertexAttribDivisor",vertexAttribI4i:"vertexAttribI",vertexAttribI4ui:"vertexAttribI",vertexAttribI4iv:"vertexAttribI",vertexAttribI4uiv:"vertexAttribI",vertexAttribIPointer:"vertexAttribIPointer",waitSync:"waitSync"},dc.WebGLFunctions={uniform1f:"uniform",uniform1fv:"uniform",uniform1i:"uniform",uniform1iv:"uniform",uniform2f:"uniform",uniform2fv:"uniform",uniform2i:"uniform",uniform2iv:"uniform",uniform3f:"uniform",uniform3i:"uniform",uniform3iv:"uniform",uniform4f:"uniform",uniform4fv:"uniform",uniform4i:"uniform",uniform4iv:"uniform",uniformMatrix2fv:"uniformMatrix",uniformMatrix3fv:"uniformMatrix",uniformMatrix4fv:"uniformMatrix",vertexAttrib1f:"vertexAttrib",vertexAttrib2f:"vertexAttrib",vertexAttrib3f:"vertexAttrib",vertexAttrib4f:"vertexAttrib",vertexAttrib1fv:"vertexAttrib",vertexAttrib2fv:"vertexAttrib",vertexAttrib3fv:"vertexAttrib",vertexAttrib4fv:"vertexAttrib"};class Tc{constructor(e=null){this.rootPlaceHolder=e,this.onSourceCodeChanged=new ji,this.rootPlaceHolder=this.rootPlaceHolder||document.body,this.mvx=new Ws(this.rootPlaceHolder),this.searchText="",this.currentCommandId=-1,this.visible=!1,this.commandCount=0,this.commandListStateId=-1,this.commandDetailStateId=-1,this.currentCaptureStateId=-1,this.currentCommandStateId=-1,this.currentVisualStateId=-1,this.visualStateListStateId=-1,this.initVisualStateId=-1,this.sourceCodeComponentStateId=-1,this.captureListComponent=new Zs,this.captureListItemComponent=new qs,this.visualStateListComponent=new Qs,this.visualStateListItemComponent=new Js,this.commandListComponent=new ec,this.commandListItemComponent=new tc,this.commandDetailComponent=new nc,this.jsonContentComponent=new ac,this.jsonGroupComponent=new rc,this.jsonItemComponent=new ic,this.jsonImageItemComponent=new oc,this.jsonHelpItemComponent=new sc,this.jsonVisualStateItemComponent=new cc,this.resultViewMenuComponent=new uc,this.resultViewContentComponent=new lc,this.resultViewComponent=new Ec,this.sourceCodeComponent=new mc,this.informationColumnComponent=new _c,this.rootStateId=this.mvx.addRootState(null,this.resultViewComponent),this.menuStateId=this.mvx.addChildState(this.rootStateId,null,this.resultViewMenuComponent),this.contentStateId=this.mvx.addChildState(this.rootStateId,null,this.resultViewContentComponent),this.captureListStateId=this.mvx.addChildState(this.rootStateId,!1,this.captureListComponent),this.initKeyboardEvents(),this.initMenuComponent(),this.captureListComponent.onCaptureLoaded.add((e=>{this.addCapture(e)})),this.captureListItemComponent.onCaptureSelected.add((e=>{this.selectCapture(e.stateId)})),this.captureListItemComponent.onSaveRequested.add((e=>{this.saveCapture(e.state.capture)})),this.visualStateListItemComponent.onVisualStateSelected.add((e=>{this.selectVisualState(e.stateId)})),this.commandListItemComponent.onCommandSelected.add((e=>{this.selectCommand(e.stateId)})),this.commandListItemComponent.onVertexSelected.add((e=>{this.selectCommand(e.stateId),this.openShader(!1)})),this.commandListItemComponent.onFragmentSelected.add((e=>{this.selectCommand(e.stateId),this.openShader(!0)})),this.sourceCodeComponent.onSourceCodeCloseClicked.add((()=>{this.displayCurrentCapture()})),this.sourceCodeComponent.onTranslatedVertexSourceClicked.add((e=>{const t=this.mvx.getGenericState(this.sourceCodeComponentStateId);t.fragment=!1,t.translated=!0,this.mvx.updateState(this.sourceCodeComponentStateId,t)})),this.sourceCodeComponent.onTranslatedFragmentSourceClicked.add((e=>{const t=this.mvx.getGenericState(this.sourceCodeComponentStateId);t.fragment=!0,t.translated=!0,this.mvx.updateState(this.sourceCodeComponentStateId,t)})),this.sourceCodeComponent.onVertexSourceClicked.add((e=>{const t=this.mvx.getGenericState(this.sourceCodeComponentStateId);t.fragment=!1,t.translated=!1,this.mvx.updateState(this.sourceCodeComponentStateId,t)})),this.sourceCodeComponent.onFragmentSourceClicked.add((e=>{const t=this.mvx.getGenericState(this.sourceCodeComponentStateId);t.fragment=!0,t.translated=!1,this.mvx.updateState(this.sourceCodeComponentStateId,t)})),this.sourceCodeComponent.onSourceCodeChanged.add((e=>{this.onSourceCodeChanged.trigger({programId:e.state.programId,sourceFragment:e.state.sourceFragment,sourceVertex:e.state.sourceVertex,translatedSourceFragment:e.state.translatedSourceFragment,translatedSourceVertex:e.state.translatedSourceVertex})})),this.updateViewState()}saveCapture(e){const t=JSON.stringify(e,null,4),n=new Blob([t],{type:"octet/stream"}),a="capture "+new Date(e.startTime).toTimeString().split(" ")[0]+".json";if(navigator.msSaveBlob)navigator.msSaveBlob(n,a);else{const e=document.createElement("a"),t=window.URL.createObjectURL(n);e.setAttribute("href",t),e.setAttribute("download",a),e.click()}}selectCapture(e){this.currentCommandId=-1,this.currentCaptureStateId=e,this.displayCurrentCapture()}selectCommand(e){this.currentCommandStateId=e,this.currentVisualStateId=this.displayCurrentCommand(),this.displayCurrentVisualState()}selectVisualState(e){this.currentVisualStateId=e,this.currentCommandStateId=this.displayCurrentVisualState(),this.displayCurrentCommand()}display(){this.visible=!0,this.updateViewState()}hide(){this.visible=!1,this.updateViewState()}addCapture(e){const t=this.mvx.insertChildState(this.captureListStateId,{capture:e,active:!1},0,this.captureListItemComponent);return this.selectCapture(t),t}showSourceCodeError(e){this.sourceCodeComponent.showError(e)}initKeyboardEvents(){this.rootPlaceHolder.addEventListener("keydown",(e=>{this.mvx.getGenericState(this.menuStateId).status===ko.Commands&&(38===e.keyCode?(e.preventDefault(),e.stopPropagation(),this.selectPreviousCommand()):40===e.keyCode?(e.preventDefault(),e.stopPropagation(),this.selectNextCommand()):33===e.keyCode?(e.preventDefault(),e.stopPropagation(),this.selectPreviousVisualState()):34===e.keyCode&&(e.preventDefault(),e.stopPropagation(),this.selectNextVisualState()))}))}openShader(e){this.mvx.removeChildrenStates(this.contentStateId);const t=this.mvx.getGenericState(this.currentCommandStateId);this.sourceCodeComponentStateId=this.mvx.addChildState(this.contentStateId,{programId:t.capture.DrawCall.programStatus.program.__SPECTOR_Object_TAG.id,nameVertex:t.capture.DrawCall.shaders[0].name,nameFragment:t.capture.DrawCall.shaders[1].name,sourceVertex:t.capture.DrawCall.shaders[0].source,sourceFragment:t.capture.DrawCall.shaders[1].source,translatedSourceVertex:t.capture.DrawCall.shaders[0].translatedSource,translatedSourceFragment:t.capture.DrawCall.shaders[1].translatedSource,fragment:e,translated:!1,editable:t.capture.DrawCall.programStatus.RECOMPILABLE},this.sourceCodeComponent),this.commandDetailStateId=this.mvx.addChildState(this.contentStateId,null,this.commandDetailComponent),this.displayCurrentCommandDetail(t)}selectPreviousCommand(){const e=this.mvx.getGenericState(this.currentCommandStateId);e.previousCommandStateId<0||this.selectCommand(e.previousCommandStateId)}selectNextCommand(){const e=this.mvx.getGenericState(this.currentCommandStateId);e.nextCommandStateId<0||this.selectCommand(e.nextCommandStateId)}selectPreviousVisualState(){const e=this.mvx.getGenericState(this.currentVisualStateId);e.previousVisualStateId<0||this.selectVisualState(e.previousVisualStateId)}selectNextVisualState(){const e=this.mvx.getGenericState(this.currentVisualStateId);e.nextVisualStateId<0||this.selectVisualState(e.nextVisualStateId)}initMenuComponent(){this.mvx.updateState(this.menuStateId,{status:ko.Captures,searchText:this.searchText,commandCount:0}),this.resultViewMenuComponent.onCloseClicked.add((e=>{this.hide()})),this.resultViewMenuComponent.onCapturesClicked.add((e=>{this.displayCaptures()})),this.resultViewMenuComponent.onCommandsClicked.add((e=>{this.displayCurrentCapture()})),this.resultViewMenuComponent.onInformationClicked.add((e=>{this.displayInformation()})),this.resultViewMenuComponent.onInitStateClicked.add((e=>{this.displayInitState()})),this.resultViewMenuComponent.onEndStateClicked.add((e=>{this.displayEndState()})),this.resultViewMenuComponent.onSearchTextChanged.add((e=>{this.search(e.sender.value)})),this.resultViewMenuComponent.onSearchTextCleared.add((e=>{this.mvx.updateState(this.menuStateId,{status:e.state.status,searchText:"",commandCount:e.state.commandCount}),this.search("")}))}onCaptureRelatedAction(e){const t=this.mvx.getGenericState(this.currentCaptureStateId);return this.commandCount=t.capture.commands.length,this.mvx.removeChildrenStates(this.contentStateId),this.mvx.updateState(this.menuStateId,{status:e,searchText:this.searchText,commandCount:this.commandCount}),this.mvx.getGenericState(this.captureListStateId)&&this.mvx.updateState(this.captureListStateId,!1),t.capture}displayCaptures(){this.mvx.updateState(this.menuStateId,{status:ko.Captures,searchText:this.searchText,commandCount:this.commandCount}),this.mvx.updateState(this.captureListStateId,!0)}displayInformation(){const e=this.onCaptureRelatedAction(ko.Information),t=this.mvx.addChildState(this.contentStateId,!0,this.informationColumnComponent),n=this.mvx.addChildState(this.contentStateId,!1,this.informationColumnComponent),a=this.mvx.addChildState(t,null,this.jsonContentComponent);this.displayJSONGroup(a,"Canvas",e.canvas),this.displayJSONGroup(a,"Context",e.context);const r=this.mvx.addChildState(n,null,this.jsonContentComponent);for(const t of e.analyses)"Primitives"===t.analyserName?this.displayJSONGroup(r,"Vertices count",t):this.displayJSONGroup(r,t.analyserName,t);this.displayJSONGroup(r,"Frame Memory Changes",e.frameMemory),this.displayJSONGroup(r,"Total Memory (seconds since application start: bytes)",e.memory)}displayJSON(e,t){t.VisualState&&this.mvx.addChildState(e,t.VisualState,this.jsonVisualStateItemComponent);for(const n in t){if("VisualState"===n||"analyserName"===n||"source"===n||"translatedSource"===n)continue;const a=t[n];if("visual"===n)for(const n in a)a.hasOwnProperty(n)&&a[n]&&this.mvx.addChildState(e,{key:n,value:a[n],pixelated:"NEAREST"===t.samplerMagFilter||"NEAREST"===t.magFilter},this.jsonImageItemComponent);else{const t=this.getJSONAsString(e,n,a);if(null==t)continue;if(this.toFilter(n)&&this.toFilter(a))continue;this.mvx.addChildState(e,{key:n,value:t},this.jsonItemComponent)}a&&a.__SPECTOR_Metadata&&this.displayJSONGroup(e,"Metadata",a.__SPECTOR_Metadata)}}getJSONAsString(e,t,n){if(null===n)return"null";if(void 0===n)return"undefined";if("number"==typeof n)return Math.floor(n)===n?n.toFixed(0):n.toFixed(4);if("string"==typeof n)return n;if("boolean"==typeof n)return n?"true":"false";if(0===n.length)return"Empty Array";if(n.length){const a=[];for(let r=0;r<n.length;r++){const i=this.getJSONAsString(e,`${t}(${r.toFixed(0)})`,n[r]);null!==i&&a.push(i)}return 0===a.length?null:a.join(", ")}return n.help?(this.mvx.addChildState(e,{key:t,value:n.name,help:n.help},this.jsonHelpItemComponent),null):n.__SPECTOR_Object_TAG?n.__SPECTOR_Object_TAG.displayText:n.displayText?n.displayText:("object"==typeof n&&this.displayJSONGroup(e,t,n),null)}displayJSONGroup(e,t,n){if(!n)return;const a=this.mvx.addChildState(e,t,this.jsonGroupComponent);this.displayJSON(a,n),this.mvx.hasChildren(a)||this.mvx.removeState(a)}displayInitState(){const e=this.onCaptureRelatedAction(ko.InitState),t=this.mvx.addChildState(this.contentStateId,null,this.jsonContentComponent);this.displayJSON(t,e.initState)}displayEndState(){const e=this.onCaptureRelatedAction(ko.EndState),t=this.mvx.addChildState(this.contentStateId,null,this.jsonContentComponent);this.displayJSON(t,e.endState)}displayCurrentCapture(){const e=this.onCaptureRelatedAction(ko.Commands);this.mvx.updateAllChildrenGenericState(this.captureListStateId,(e=>(e.active=!1,e))),this.mvx.updateState(this.currentCaptureStateId,{capture:e,active:!0}),this.createVisualStates(e),this.commandListStateId=this.mvx.addChildState(this.contentStateId,null,this.commandListComponent),this.commandDetailStateId=this.mvx.addChildState(this.contentStateId,null,this.commandDetailComponent),this.createCommands(e)}displayCurrentCommand(){if(this.mvx.getGenericState(this.menuStateId).status!==ko.Commands)return-1;const e=this.mvx.getGenericState(this.currentCommandStateId),t=e.capture;return this.currentCommandId=t.id,this.mvx.updateAllChildrenGenericState(this.commandListStateId,(e=>(e.active=!1,e))),this.mvx.updateState(this.currentCommandStateId,{capture:t,visualStateId:e.visualStateId,previousCommandStateId:e.previousCommandStateId,nextCommandStateId:e.nextCommandStateId,active:!0}),this.displayCurrentCommandDetail(e)}displayCurrentCommandDetail(e){const t=e.capture;this.mvx.removeChildrenStates(this.commandDetailStateId);const n=this.mvx.getGenericState(e.visualStateId);this.mvx.addChildState(this.commandDetailStateId,n.VisualState,this.jsonVisualStateItemComponent);let a="Unknown";switch(t.status){case oo.Deprecated:a="Deprecated";break;case oo.Unused:a="Unused";break;case oo.Disabled:a="Disabled";break;case oo.Redundant:a="Redundant";break;case oo.Valid:a="Valid"}const r=dc.getMDNLink(t.name);t.result?this.displayJSONGroup(this.commandDetailStateId,"Global",{name:{help:r,name:t.name},duration:t.commandEndTime-t.startTime,result:t.result,status:a}):"LOG"!==t.name&&this.displayJSONGroup(this.commandDetailStateId,"Global",{name:{help:r,name:t.name},duration:t.commandEndTime-t.startTime,status:a});for(const e in t)"VisualState"!==e&&"result"!==e&&"object"==typeof t[e]&&this.displayJSONGroup(this.commandDetailStateId,e,t[e]);return e.visualStateId}displayCurrentVisualState(){if(this.mvx.getGenericState(this.menuStateId).status!==ko.Commands)return null;const e=this.mvx.getGenericState(this.currentVisualStateId);return e.commandStateId===Number.MIN_VALUE?this.displayInitState():e.commandStateId===Number.MAX_VALUE&&this.displayEndState(),this.mvx.updateAllChildrenGenericState(this.visualStateListStateId,(e=>(e.active=!1,e))),e.active=!0,this.mvx.updateState(this.currentVisualStateId,e),e.commandStateId}createVisualStates(e){this.visualStateListStateId=this.mvx.addChildState(this.contentStateId,null,this.visualStateListComponent),this.mvx.removeChildrenStates(this.visualStateListStateId),this.initVisualStateId=this.mvx.addChildState(this.visualStateListStateId,{VisualState:e.initState.VisualState,time:e.startTime,commandStateId:Number.MIN_VALUE,active:!1},this.visualStateListItemComponent)}createCommands(e){this.mvx.removeChildrenStates(this.commandListStateId);let t=this.initVisualStateId,n=!1,a=null,r=-1,i=null,o=-1;for(let s=0;s<e.commands.length;s++){const c=e.commands[s];if(this.toFilter(c.marker)&&this.toFilter(c.name)&&c.id!==this.currentCommandId&&("LOG"!==c.name||this.toFilter(c.text)))continue;const u={capture:c,previousCommandStateId:r,nextCommandStateId:-1,visualStateId:void 0,active:!1},l=this.mvx.addChildState(this.commandListStateId,u,this.commandListItemComponent);if(a&&(a=this.mvx.getGenericState(r),a.nextCommandStateId=l,this.mvx.updateState(r,a)),r=l,a=u,c.VisualState){const e={VisualState:c.VisualState,time:c.endTime,commandStateId:l,active:!1,previousVisualStateId:o,nextVisualStateId:-1};t=this.mvx.addChildState(this.visualStateListStateId,e,this.visualStateListItemComponent),i&&(i=this.mvx.getGenericState(o),i.nextVisualStateId=t,this.mvx.updateState(o,i)),i=e,o=t,n=!0}else if(!n){const e=this.mvx.getGenericState(this.initVisualStateId);e.commandStateId=l,e.previousVisualStateId=-1,e.nextVisualStateId=-1,this.mvx.updateState(this.initVisualStateId,e),i=e,o=t,n=!0}u.visualStateId=t,this.mvx.updateState(l,u),(-1===this.currentCommandId&&0===s||this.currentCommandId===c.id)&&(this.currentCommandStateId=l,this.displayCurrentCommand(),this.currentVisualStateId=t,this.displayCurrentVisualState())}}updateViewState(){this.mvx.updateState(this.rootStateId,this.visible)}toFilter(e){return e=(e+="").toLowerCase(),!!(this.searchText&&this.searchText.length>2&&-1===e.indexOf(this.searchText.toLowerCase()))}search(e){this.searchText=e;switch(this.mvx.getGenericState(this.menuStateId).status){case ko.Captures:case ko.Commands:this.displayCurrentCapture();break;case ko.EndState:this.displayEndState();break;case ko.Information:this.displayInformation();break;case ko.InitState:this.displayInitState()}this.searchText=""}}const Ac={CaptureMenu:js,ResultView:Tc};class Rc{static getFirstAvailable3dContext(e){return this.tryGetContextFromHelperField(e)||this.tryGetContextFromCanvas(e,"webgl")||this.tryGetContextFromCanvas(e,"experimental-webgl")||this.tryGetContextFromCanvas(e,"webgl2")||this.tryGetContextFromCanvas(e,"experimental-webgl2")}static tryGetContextFromHelperField(e){const t=e instanceof HTMLCanvasElement?e.getAttribute("__spector_context_type"):e.__spector_context_type;if(t)return this.tryGetContextFromCanvas(e,t)}static tryGetContextFromCanvas(e,t){let n;try{n=e.getContext(t)}catch(e){}return n}constructor(){this.noFrameTimeout=-1,this.captureNextFrames=0,this.captureNextCommands=0,this.quickCapture=!1,this.fullCapture=!1,this.retry=0,this.contexts=[],this.timeSpy=new Ds,this.onCaptureStarted=new ji,this.onCapture=new ji,this.onError=new ji,this.timeSpy.onFrameStart.add(this.onFrameStart,this),this.timeSpy.onFrameEnd.add(this.onFrameEnd,this),this.timeSpy.onError.add(this.onErrorInternal,this)}displayUI(e=!1){this.captureMenu||(this.getCaptureUI(),this.captureMenu.onPauseRequested.add(this.pause,this),this.captureMenu.onPlayRequested.add(this.play,this),this.captureMenu.onPlayNextFrameRequested.add(this.playNextFrame,this),this.captureMenu.onCaptureRequested.add((e=>{e&&this.captureCanvas(e.ref)}),this),setInterval((()=>{this.captureMenu.setFPS(this.getFps())}),1e3),e||this.captureMenu.trackPageCanvases(),this.captureMenu.display()),this.resultView||(this.getResultUI(),this.onCapture.add((e=>{this.resultView.display(),this.resultView.addCapture(e)})))}getResultUI(){return this.resultView||(this.resultView=new Tc,this.resultView.onSourceCodeChanged.add((e=>{this.rebuildProgramFromProgramId(e.programId,e.sourceVertex,e.sourceFragment,(t=>{this.referenceNewProgram(e.programId,t),this.resultView.showSourceCodeError(null)}),(e=>{this.resultView.showSourceCodeError(e)}))}))),this.resultView}getCaptureUI(){return this.captureMenu||(this.captureMenu=new js),this.captureMenu}rebuildProgramFromProgramId(e,t,n,a,r){const i=Es.getFromGlobalStore(e);this.rebuildProgram(i,t,n,a,r)}rebuildProgram(e,t,n,a,r){ki.rebuildProgram(e,t,n,a,r)}referenceNewProgram(e,t){Es.updateInGlobalStore(e,t)}pause(){this.timeSpy.changeSpeedRatio(0)}play(){this.timeSpy.changeSpeedRatio(1)}playNextFrame(){this.timeSpy.playNextFrame()}drawOnlyEveryXFrame(e){this.timeSpy.changeSpeedRatio(e)}getFps(){return this.timeSpy.getFps()}spyCanvases(){this.canvasSpy?this.onErrorInternal("Already spying canvas."):(this.canvasSpy=new ys,this.canvasSpy.onContextRequested.add(this.spyContext,this))}spyCanvas(e){this.canvasSpy?this.onErrorInternal("Already spying canvas."):(this.canvasSpy=new ys(e),this.canvasSpy.onContextRequested.add(this.spyContext,this))}getAvailableContexts(){return this.getAvailableContexts()}captureCanvas(e,t=0,n=!1,a=!1){const r=this.getAvailableContextSpyByCanvas(e);if(r)this.captureContextSpy(r,t,n,a);else{const r=Rc.getFirstAvailable3dContext(e);r?this.captureContext(r,t,n,a):zi.error("No webgl context available on the chosen canvas.")}}captureContext(e,t=0,n=!1,a=!1){let r=this.getAvailableContextSpyByCanvas(e.canvas);r||(r=e.getIndexedParameter?new bs({context:e,version:2,recordAlways:!1}):new bs({context:e,version:1,recordAlways:!1}),r.onMaxCommand.add(this.stopCapture,this),this.contexts.push({canvas:r.context.canvas,contextSpy:r})),r&&this.captureContextSpy(r,t,n,a)}captureContextSpy(e,t=0,n=!1,a=!1){this.quickCapture=n,this.fullCapture=a,this.capturingContext?this.onErrorInternal("Already capturing a context."):(this.retry=0,this.capturingContext=e,this.capturingContext.setMarker(this.marker),(t=Math.min(t,1e4))>0?this.captureCommands(t):this.captureFrames(1),this.noFrameTimeout=setTimeout((()=>{t>0?this.stopCapture():this.capturingContext&&this.retry>1?this.onErrorInternal("No frames with gl commands detected. Try moving the camera."):this.onErrorInternal("No frames detected. Try moving the camera or implementing requestAnimationFrame.")}),1e4))}captureNextFrame(e,t=!1,n=!1){e instanceof HTMLCanvasElement||self.OffscreenCanvas&&e instanceof OffscreenCanvas?this.captureCanvas(e,0,t,n):this.captureContext(e,0,t,n)}startCapture(e,t,n=!1,a=!1){e instanceof HTMLCanvasElement||self.OffscreenCanvas&&e instanceof OffscreenCanvas?this.captureCanvas(e,t,n,a):this.captureContext(e,t,n,a)}stopCapture(){if(this.capturingContext){const e=this.capturingContext.stopCapture();if(e.commands.length>0)return this.noFrameTimeout>-1&&clearTimeout(this.noFrameTimeout),this.triggerCapture(e),this.capturingContext=void 0,this.captureNextFrames=0,this.captureNextCommands=0,e;0===this.captureNextCommands&&(this.retry++,this.captureFrames(1))}}setMarker(e){this.marker=e,this.capturingContext&&this.capturingContext.setMarker(e)}clearMarker(){this.marker=null,this.capturingContext&&this.capturingContext.clearMarker()}log(e){this.capturingContext&&this.capturingContext.log(e)}captureFrames(e){this.captureNextFrames=e,this.captureNextCommands=0,this.playNextFrame()}captureCommands(e){this.captureNextFrames=0,this.captureNextCommands=e,this.play(),this.capturingContext?(this.onCaptureStarted.trigger(void 0),this.capturingContext.startCapture(e,this.quickCapture,this.fullCapture)):(this.onErrorInternal("No context to capture from."),this.captureNextCommands=0)}spyContext(e){let t=this.getAvailableContextSpyByCanvas(e.context.canvas);t||(t=new bs({context:e.context,version:e.contextVersion,recordAlways:!0}),t.onMaxCommand.add(this.stopCapture,this),this.contexts.push({canvas:t.context.canvas,contextSpy:t})),t.spy()}getAvailableContextSpyByCanvas(e){for(const t of this.contexts)if(t.canvas===e)return t.contextSpy}onFrameStart(){this.captureNextCommands>0||(this.captureNextFrames>0?(this.capturingContext&&(this.onCaptureStarted.trigger(void 0),this.capturingContext.startCapture(0,this.quickCapture,this.fullCapture)),this.captureNextFrames--):this.capturingContext=void 0)}onFrameEnd(){this.captureNextCommands>0||0===this.captureNextFrames&&this.stopCapture()}triggerCapture(e){this.captureMenu&&this.captureMenu.captureComplete(null),this.onCapture.trigger(e)}onErrorInternal(e){if(zi.error(e),this.noFrameTimeout>-1&&clearTimeout(this.noFrameTimeout),!this.capturingContext)throw e;this.capturingContext=void 0,this.captureNextFrames=0,this.captureNextCommands=0,this.retry=0,this.captureMenu&&this.captureMenu.captureComplete(e),this.onError.trigger(e)}}window.SPECTOR=Yi;let pc;pc=Wr,pc=i,pc=Gn,pc=Yn,pc=ri,pc=_i,pc=ui,pc=$n,pc=Ri,pc=Hi,pc=Fi,pc=Ii,pc=wi,((e=(()=>{}))=>{window.onload=()=>{if(void 0!==window.SPECTOR){const e=new Yi.Spector;window.spector=e,console.log(" spector ",e),e.spyCanvas(),document.getElementById("spector").addEventListener("click",(()=>{console.log(" display ui "),e.displayUI()})),document.getElementById("start").addEventListener("click",(()=>{const t=document.getElementById("webgl");e.startCapture(t,50)})),e.resultView||(e.getResultUI(),e.onCapture.add((t=>{t.commands=t.commands.filter((e=>"getError"!==e.name)),console.log(" ---- capture result ",t),e.resultView.display(),e.resultView.addCapture(t)})))}e()}})(pc);
//# sourceMappingURL=index.c9e54f56.js.map
